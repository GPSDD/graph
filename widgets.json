{
  "data": [
    {
      "id": "4fb869c8-6a9a-4a66-90b8-6425eff6dd52",
      "type": "widget",
      "attributes": {
        "name": "Total CO2 emissions by year-2",
        "dataset": null,
        "slug": "total-co2-emissions-by-year-2",
        "userId": null,
        "description": "This dateset shows the total CO2 emission per country for the years 1990-2011. ",
        "source": "CAIT",
        "sourceUrl": null,
        "authors": "CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.",
        "application": [],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "name": "table",
              "format": {
                "parse": {
                  "x": "date"
                }
              },
              "values": []
            },
            {
              "name": "summary",
              "source": "table",
              "transform": [
                {
                  "type": "aggregate",
                  "summarize": {
                    "y": [
                      "min",
                      "max"
                    ]
                  }
                },
                {
                  "expr": "datum.max_y-datum.min_y",
                  "type": "formula",
                  "field": "difference"
                },
                {
                  "expr": "datum.min_y === 0 ? 0 : (datum.difference > 0 ? datum.min_y - datum.difference * 0.2  : datum.min_y * 0.8)",
                  "type": "formula",
                  "field": "min"
                },
                {
                  "expr": "datum.min < 0 ? 0 : datum.min",
                  "type": "formula",
                  "field": "min"
                },
                {
                  "expr": "datum.max_y === 0 ? 10 : (datum.difference > 0 ? datum.max_y + datum.difference * 0.2 : datum.max_y * 1.2)",
                  "type": "formula",
                  "field": "max"
                }
              ]
            },
            {
              "name": "computed",
              "source": "table",
              "transform": [
                {
                  "type": "cross",
                  "with": "summary"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "width": {
                    "mult": 0.03,
                    "field": {
                      "group": "width"
                    }
                  }
                },
                "hover": {
                  "fill": {
                    "value": "#c32d7b"
                  }
                },
                "update": {
                  "fill": {
                    "value": "#5BB1D2"
                  }
                }
              }
            },
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "unit"
                    ]
                  }
                ]
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": -30
                  },
                  "y": {
                    "value": -15
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.unit}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "time",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "data": "computed",
                "field": "a.y"
              },
              "domainMax": {
                "data": "computed",
                "field": "b.max"
              },
              "domainMin": {
                "data": "computed",
                "field": "b.min"
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-05-24T15:44:13.292Z",
        "updatedAt": "2016-05-24T15:44:13.292Z"
      }
    },
    {
      "id": "afe4962c-121b-46ae-a250-fcf55e56b984",
      "type": "widget",
      "attributes": {
        "name": "Example Carto Dataset5",
        "dataset": "be76f130-ed4e-4972-827d-aef8e0dc6b18",
        "slug": "example-carto-dataset5",
        "userId": "5820ad9469a0287982f4cd18",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "rw"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-08T15:30:18.985Z",
        "updatedAt": "2017-02-08T15:30:18.985Z"
      }
    },
    {
      "id": "51851e22-1eda-4bf5-bbcc-cde3f9a3a943",
      "type": "widget",
      "attributes": {
        "name": "Example Carto Dataset6",
        "dataset": "be76f130-ed4e-4972-827d-aef8e0dc6b18",
        "slug": "example-carto-dataset6",
        "userId": "5820ad9469a0287982f4cd18",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "rw"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-08T15:30:34.505Z",
        "updatedAt": "2017-02-08T15:30:34.505Z"
      }
    },
    {
      "id": "641970f9-84da-4560-a715-ad4f70a3b8f4",
      "type": "widget",
      "attributes": {
        "name": "Single growing crop under high water stress conditions",
        "dataset": "d69adfa5-2087-458d-8f8f-388c888ed8ab",
        "slug": "single-growing-crop-under-high-water-stress-conditions",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/d69adfa5-2087-458d-8f8f-388c888ed8ab?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "data": {
            "url": "https://wri-01.carto.com/api/v2/sql?q=WITH chstress AS (SELECT iso, VALUES FROM aqueduct_water_stress_country_ranking_bau WHERE YEAR = {{year}} AND TYPE = 'all' AND VALUES > 4 ORDER BY iso DESC), crops AS (SELECT * FROM combined01_prepared WHERE YEAR = {{year}} AND impactparameter = 'Area' AND scenario = 'SSP2-MIRO'), result as (SELECT YEAR, commodity, round((sum(crops.value)*247.11)::numeric, 2) AS value FROM crops INNER JOIN chstress ON crops.iso=chstress.iso WHERE lower(commodity) = '{{commodity}}' GROUP BY YEAR, commodity ORDER BY YEAR) SELECT case when year > 2010 then 'will be' else 'are' end as verb, case when year > 2010 then 'in ' || to_char(year, '9999') else '' end as year, commodity, value from result "
          },
          "type": "text",
          "template": "There {{verb}} {{value}} hectares of {{commodity}} crops growing under high water stress conditions {{year}}.",
          "sql_config": [],
          "params_config": [
            {
              "key": "year",
              "required": true
            },
            {
              "key": "commodity",
              "required": true
            }
          ],
          "template_config": [
            {
              "key": "verb"
            },
            {
              "key": "value",
              "format": ".2s"
            },
            {
              "key": "commodity"
            },
            {
              "key": "year"
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-19T12:58:47.689Z",
        "updatedAt": "2017-02-09T10:07:49.890Z"
      }
    },
    {
      "id": "4f8f572d-4cb3-4e1a-93f9-ae24e5733442",
      "type": "widget",
      "attributes": {
        "name": "Example Carto Dataset4",
        "dataset": "be76f130-ed4e-4972-827d-aef8e0dc6b18",
        "slug": "example-carto-dataset4",
        "userId": "5820ad9469a0287982f4cd18",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "rw"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-08T15:29:55.366Z",
        "updatedAt": "2017-02-08T15:29:55.366Z"
      }
    },
    {
      "id": "2370a881-2189-4490-afda-911202f7a2e0",
      "type": "widget",
      "attributes": {
        "name": "Widget prep test",
        "dataset": "6c19495c-ad1c-4f00-bae6-f76b2d81a375",
        "slug": "widget-prep-test",
        "userId": null,
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [],
        "verified": false,
        "default": false,
        "published": false,
        "queryUrl": "query/6c19495c-ad1c-4f00-bae6-f76b2d81a375?sql=select * from table",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "http://api.resourcewatch.org:81/query/6c19495c-ad1c-4f00-bae6-f76b2d81a375?sql=select * from table",
              "name": "line",
              "format": {
                "type": "json",
                "parse": {
                  "x": "date"
                },
                "property": "data"
              }
            },
            {
              "name": "axis",
              "values": [
                {
                  "x": "Year",
                  "y": "Number of days exceeding"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#1a3e62"
                  },
                  "strokeWidth": {
                    "value": 3
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": 0,
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": -20
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.y | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": 22
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.x | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "time",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "line",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "line",
                    "field": "y"
                  }
                ]
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 28,
            "right": 5,
            "bottom": 30
          }
        },
        "template": true,
        "layerId": null,
        "createdAt": "2016-07-28T08:34:07.159Z",
        "updatedAt": "2016-07-28T08:34:07.159Z"
      }
    },
    {
      "id": "5f8739c0-00d8-4c75-9271-2b3592e75007",
      "type": "widget",
      "attributes": {
        "name": "fawefw",
        "dataset": "a972a30d-f766-4d68-a85d-392538b4ccf9",
        "slug": "fawefw",
        "userId": "58f63cdbd0659c0b06fdf5f9",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-05-31T19:23:24.002Z",
        "updatedAt": "2017-05-31T19:23:24.002Z"
      }
    },
    {
      "id": "4cda3c6a-c838-4a81-9656-a0aadeeb1eb8",
      "type": "widget",
      "attributes": {
        "name": "Forest loss in the last decade",
        "dataset": "a05fde4e-3c43-402f-9ae9-5c621c487d43",
        "slug": "forest-loss-in-the-last-decade",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/a05fde4e-3c43-402f-9ae9-5c621c487d43?sql=SELECT%20ST_HISTOGRAM(raster,%20lossyear,%2014,%20true)%20FROM%20%22UMD/hansen/global_forest_change_2015%22&geostore=7b4ecfaafeec39860d958f46fa4e8a99",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/a05fde4e-3c43-402f-9ae9-5c621c487d43?sql=SELECT%20ST_HISTOGRAM(raster,%20lossyear,%2014,%20true)%20FROM%20%22UMD/hansen/global_forest_change_2015%22&geostore=7b4ecfaafeec39860d958f46fa4e8a99",
              "name": "raw",
              "format": {
                "type": "json",
                "property": "data[0].lossyear"
              },
              "transform": [
                {
                  "test": "datum[0] > 0",
                  "type": "filter"
                },
                {
                  "expr": "2000 + (datum[0] + 1)",
                  "type": "formula",
                  "field": "x"
                },
                {
                  "expr": "datum[1]",
                  "type": "formula",
                  "field": "value"
                }
              ]
            },
            {
              "name": "total",
              "source": "raw",
              "transform": [
                {
                  "type": "aggregate",
                  "summarize": [
                    {
                      "as": [
                        "sum"
                      ],
                      "ops": [
                        "sum"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "table",
              "source": "raw",
              "transform": [
                {
                  "as": [
                    "total"
                  ],
                  "on": "total",
                  "keys": [
                    "sum"
                  ],
                  "type": "lookup",
                  "onKey": "key",
                  "default": null
                },
                {
                  "expr": "(datum.value/datum.total.sum) * 100",
                  "type": "formula",
                  "field": "y"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "value": "#2e57b8"
                  }
                },
                "update": {
                  "fill": {
                    "value": "#00a0e1"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-02T17:32:21.827Z",
        "updatedAt": "2017-03-28T10:56:46.804Z"
      }
    },
    {
      "id": "4edebf4a-a4e7-4d68-82a3-63829b5f3bfb",
      "type": "widget",
      "attributes": {
        "name": "efrwef2",
        "dataset": "a972a30d-f766-4d68-a85d-392538b4ccf9",
        "slug": "efrwef2",
        "userId": "58f63cdbd0659c0b06fdf5f9",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-05-31T19:26:00.581Z",
        "updatedAt": "2017-05-31T19:26:00.581Z"
      }
    },
    {
      "id": "14a08a36-e9c7-4f3a-aeb1-f3e411c94a68",
      "type": "widget",
      "attributes": {
        "name": "ncuiawnfeiw",
        "dataset": "bbfcf170-5c47-40b0-880d-b04648eba354",
        "slug": "ncuiawnfeiw",
        "userId": "58f63cdbd0659c0b06fdf5f9",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-06-02T14:23:05.784Z",
        "updatedAt": "2017-06-02T14:23:05.784Z"
      }
    },
    {
      "id": "606c813b-d716-4b0b-8717-9389425c9262",
      "type": "widget",
      "attributes": {
        "name": "Irrigated vs Rainfed",
        "dataset": "fc85eac5-d27c-49d2-a248-dee26ec858bc",
        "slug": "irrigated-vs-rainfed",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-30T16:37:22.308Z",
        "updatedAt": "2017-01-30T16:39:37.426Z"
      }
    },
    {
      "id": "20ec7861-5251-40a7-9503-5ee3686a66a3",
      "type": "widget",
      "attributes": {
        "name": "Estimated C02 emission",
        "dataset": "d02df2f6-d80c-4274-bb6f-f062061655c4",
        "slug": "estimated-c02-emission",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/d02df2f6-d80c-4274-bb6f-f062061655c4?sql=select country, rank, iso3, total from estimated_co2_emission_filtered",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=select country as x, total as y from estimated_co2_emission_filtered ORDER BY total desc LIMIT 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-06-06T15:12:38.749Z",
        "updatedAt": "2017-04-06T07:52:24.550Z"
      }
    },
    {
      "id": "888b3dbd-697c-41f8-a6b2-f7f75452fb81",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Hot Days - Lower Emissions (B1)",
        "dataset": "a33a0b4e-8e38-4cf8-820e-dd216212360d",
        "slug": "projected-change-in-number-of-hot-days-lower-emissions-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of days with the hottest temperatures is projected to increase dramatically. The historical (1971-2000) distribution of temperature for the hottest 2% of days (about seven days each year) echoes the distinct north-south gradient in average temperatures. However, by mid-century (2041-2070), the projected change in number of days exceeding those hottest temperatures is greatest in the western areas and Gulf Coast for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "a2ee5d1f-27db-4e2c-92ef-e90792b406c0"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:42.472Z",
        "updatedAt": "2017-03-21T12:29:51.299Z"
      }
    },
    {
      "id": "cf7a9c40-6c3a-49d2-afb0-de16b9a2d2c6",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Warm Nights - Higher Emissions (A2)",
        "dataset": "5824f21e-9faa-4b32-851a-6633a12302aa",
        "slug": "historical-temperature-distribution-of-warm-nights-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of nights with the warmest temperatures is projected to increase dramatically. The historical (1971-2000) distribution of temperature for the warmest 2% of nights (Top: about seven days each year) echoes the distinct north-south gradient in average temperatures. By mid-century (2041-2070), the projected change in number of nights exceeding those warmest temperatures is greatest in the south for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-3_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "abccfcb0-c672-4b22-9d91-05e54927933c"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:41.185Z",
        "updatedAt": "2017-03-21T12:33:06.415Z"
      }
    },
    {
      "id": "7189d4fb-c830-4300-877e-d4dea003d3c5",
      "type": "widget",
      "attributes": {
        "name": "Crops produced in areas of high water stress",
        "dataset": "6ffd8b3a-8318-4b39-b53f-ad3a09916bd7",
        "slug": "crops-produced-in-areas-of-high-water-stress",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/6ffd8b3a-8318-4b39-b53f-ad3a09916bd7?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "data": {
            "url": "https://wri-01.carto.com/api/v2/sql?q=WITH chstress AS (SELECT iso, VALUES FROM aqueduct_water_stress_country_ranking_bau WHERE YEAR = {{year}} AND TYPE = 'all' ORDER BY iso DESC), crops AS (SELECT * FROM combined01_prepared WHERE YEAR = {{year}} AND impactparameter = 'Pop. at risk of hunger' AND scenario = 'SSP2-MIRO'), resultado AS (SELECT crops.*, chstress. VALUES FROM crops INNER JOIN chstress ON crops.iso=chstress.iso ORDER BY value DESC), result as (SELECT round(value::numeric, 2) AS value, region, YEAR, iso FROM resultado WHERE iso = '{{iso}}') SELECT case when year > 2010 then 'will be' else 'are' end as verb, case when year > 2010 then 'in ' || to_char(year, '9999') else '' end as year, Case when value < 1 then 'less than 1' else to_char(value, '9999') end as value, region AS country, iso FROM RESULT"
          },
          "type": "text",
          "template": "{{value}} of country's population {{verb}} at high risk of hunger {{year}} in {{country}}.",
          "sql_config": [],
          "sql_params": [],
          "params_config": [
            {
              "key": "year",
              "required": true
            },
            {
              "key": "iso",
              "required": true
            }
          ],
          "template_config": [
            {
              "key": "verb"
            },
            {
              "key": "value",
              "suffix": "%"
            },
            {
              "key": "country"
            },
            {
              "key": "year"
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-19T16:07:50.791Z",
        "updatedAt": "2017-02-02T19:19:04.932Z"
      }
    },
    {
      "id": "ec856000-1e8f-4e93-a76a-533d3eeea0d0",
      "type": "widget",
      "attributes": {
        "name": "Risk Areas in Porto Alegre",
        "dataset": "1a3d8068-7247-4184-baa6-79926c11eebb",
        "slug": "risk-areas-in-porto-alegre",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "type": "map",
          "layer_id": "dfc8f1ac-35bd-4149-851f-4cbe01d50f0f"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T17:32:59.245Z",
        "updatedAt": "2017-03-21T14:09:17.207Z"
      }
    },
    {
      "id": "13de93db-bc3e-42dc-89bc-c81121c8d5ed",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Frost-Free Season Days - Higher Emissions (A2)",
        "dataset": "14813f7c-a635-4ed0-802f-3f4395daedd4",
        "slug": "projected-change-in-number-of-days-over-35-u-s-midwest",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected increase in annual average temperatures by mid-century (2041-2070) as compared to the 1971-2000 period tell only part of the climate change story. Maps also show annual projected increases in the number of the hottest days (days over 95ÁF), longer frost-free seasons, and an increase in cooling degree days, defined as the number of degrees that a dayÍs average temperature is above 65ÁF, which generally leads to an increase in energy use for air conditioning. Projections are from global climate models that assume emissions of heat-trapping gases continue to rise (A2 scenario). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "901ce25e-7707-4f98-98f5-a824386253ea"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:38.688Z",
        "updatedAt": "2017-03-21T12:39:21.826Z"
      }
    },
    {
      "id": "8fa7ab70-8195-4bc6-973d-336cb34aec7d",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Days Over 95ºF",
        "dataset": "48f596dc-561e-473b-a4b2-c40f44800cbd",
        "slug": "projected-change-in-number-of-days-over-95-f",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "type": "map",
          "layer_id": "2d0cef39-d2cd-423c-973c-16a049aa71af"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T17:19:01.313Z",
        "updatedAt": "2017-03-21T14:10:09.968Z"
      }
    },
    {
      "id": "514dc521-9486-45e5-aeaf-fa9950a692aa",
      "type": "widget",
      "attributes": {
        "name": "Projected Increases in the Number of Days over 90ºF - Higher Emissions",
        "dataset": "119506b3-c5a3-423d-8050-d99f15f12457",
        "slug": "projected-increases-in-the-number-of-days-over-90-f-higher-emissions",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "type": "map",
          "layer_id": "a37ce228-235d-4790-ba4d-d91cc764a400"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T16:22:41.398Z",
        "updatedAt": "2017-03-21T14:13:27.325Z"
      }
    },
    {
      "id": "96e5e426-33a8-40fe-9f7f-f36d9db82a8c",
      "type": "widget",
      "attributes": {
        "name": "Projected Increases in the Number of Days over 90ºF - Lower Emissions",
        "dataset": "2223f9c9-1acf-4e37-b807-f4b7063b47b1",
        "slug": "projected-increases-in-the-number-of-days-over-90-f-lower-emissions",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "type": "map",
          "layer_id": "76224de7-af33-4b5b-bf52-8a90c7b39275"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T16:16:55.896Z",
        "updatedAt": "2017-03-21T14:14:26.557Z"
      }
    },
    {
      "id": "e717bebf-8bfa-4eba-9ce0-67eed3f924db",
      "type": "widget",
      "attributes": {
        "name": "Projected Increases in the Number of Days over 90ºF - Historical",
        "dataset": "8ed34061-7996-41fd-8a8e-3f9458fa6cf5",
        "slug": "projected-increases-in-the-number-of-days-over-90-f-historical",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "type": "map",
          "layer_id": "6be490f0-15bb-4ddd-9aa7-1ae97cec4feb"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T15:45:26.825Z",
        "updatedAt": "2017-03-21T14:15:08.871Z"
      }
    },
    {
      "id": "8f67fadd-d8df-4a28-82dd-a22a337d71b9",
      "type": "widget",
      "attributes": {
        "name": "Percentage of country's population at high risk of hunger.",
        "dataset": "f1d24950-c764-4f90-950a-4541f798eb95",
        "slug": "ercentage-of-country-s-population-is-at-high-risk-of-hunger",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/f1d24950-c764-4f90-950a-4541f798eb95?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "data": {
            "url": "https://wri-01.carto.com/api/v2/sql?q=WITH RESULT AS (SELECT                 round(value::numeric, 2) AS value, region, year, iso FROM combined01_prepared WHERE year = {{year}} AND impactparameter = 'Share Pop. at risk of hunger' AND scenario = 'SSP2-MIRO' and iso = upper('{{iso}}'))  SELECT CASE WHEN year > 2005 THEN 'will be' ELSE 'are' END AS verb, CASE WHEN year > 2005 THEN 'in ' || to_char(year, '9999') ELSE '' END AS year, CASE WHEN value < 1 THEN 'less than 1' ELSE to_char(value, '9999') END AS value, region AS country, iso FROM RESULT"
          },
          "type": "text",
          "template": "{{value}} of country's population {{verb}} at high risk of hunger {{year}} in {{country}}.",
          "dictionary": "food",
          "sql_config": [],
          "sql_params": [],
          "params_config": [
            {
              "key": "year",
              "required": true
            },
            {
              "key": "iso",
              "required": true
            }
          ],
          "template_config": [
            {
              "key": "verb"
            },
            {
              "key": "value",
              "suffix": "%"
            },
            {
              "key": "country"
            },
            {
              "key": "year"
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-19T15:56:52.337Z",
        "updatedAt": "2017-05-16T10:29:53.498Z"
      }
    },
    {
      "id": "d45d552d-e957-44ef-a542-918f4c0ce9b9",
      "type": "widget",
      "attributes": {
        "name": "Test widget",
        "dataset": "c57be9e2-52be-4077-81fd-fc4d7cfb53ef",
        "slug": "test-widget",
        "userId": "58e22f662071c01c02f76a0f",
        "description": "aasadf",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": true,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-05-16T15:11:13.498Z",
        "updatedAt": "2017-05-16T15:11:13.498Z"
      }
    },
    {
      "id": "9391e42c-f32b-40d9-a282-3083e617464f",
      "type": "widget",
      "attributes": {
        "name": "World Price (USD/Ton) ",
        "dataset": "c4ee894f-2a9f-4681-9c3d-d94cf106f796",
        "slug": "world-price-usd-ton",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "val",
              "ticks": 7,
              "tick_size": 0,
              "properties": {
                "labels": {
                  "text": {
                    "template": "{{datum.data | number:'.3s'}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "cat",
              "tick_size": 80,
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#eeeeee"
                  }
                },
                "labels": {
                  "text": {
                    "template": "{{datum.data | slice:0,1 | upper}}{{datum.data | slice:1,100, datum.crop}}"
                  },
                  "type": {
                    "value": "axis"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "font_size": {
                    "value": 14
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 2
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select round((sum(value))::numeric,2) as val,avg(value) as val_avg, max_value, commodity, impactparameter, region, '2005 usd/Ton' as units from (SELECT  max(value) over (partition by impactparameter) max_value, * FROM combined01_prepared where scenario = 'SSP2-MIRO' and impactparameter = 'World price') r {{where}} group by max_value, region, commodity, impactparameter order by impactparameter asc, commodity asc limit 5",
              "name": "tabls",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "legend",
              "source": "tabls",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "t"
                  ],
                  "summarize": [
                    {
                      "ops": [
                        "sum"
                      ],
                      "field": "val"
                    }
                  ]
                }
              ]
            },
            {
              "name": "separate_line",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 680,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "tabls",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "commodity"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "from": {
                    "transform": [
                      {
                        "expr": "format('.3s', datum.val)",
                        "type": "formula",
                        "field": "capitalize"
                      }
                    ]
                  },
                  "name": "bars",
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "val",
                        "scale": "val"
                      },
                      "y": {
                        "offset": -8
                      },
                      "x2": {
                        "scale": "val",
                        "value": 0
                      },
                      "fill": {
                        "field": "commodity",
                        "scale": "color"
                      },
                      "height": {
                        "band": true,
                        "value": 20
                      },
                      "stroke": {
                        "value": "#fff"
                      },
                      "padding": 5,
                      "stroke_width": {
                        "value": 2
                      }
                    },
                    "update": {
                      "fill_opacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "mark": "bars"
                  },
                  "type": "text",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x2",
                        "offset": 5
                      },
                      "y": {
                        "field": "y"
                      },
                      "dy": {
                        "mult": 0.55,
                        "field": "height"
                      },
                      "fill": {
                        "value": "#758290"
                      },
                      "text": {
                        "field": "datum.capitalize"
                      },
                      "align": {
                        "value": "left"
                      },
                      "baseline": {
                        "value": "middle"
                      },
                      "font_size": {
                        "value": 12
                      }
                    }
                  },
                  "interactive": false
                }
              ],
              "scales": [
                {
                  "name": "pos",
                  "type": "ordinal",
                  "range": "height",
                  "domain": {
                    "field": "val"
                  }
                }
              ],
              "properties": {
                "enter": {
                  "y": {
                    "field": "key",
                    "scale": "cat"
                  },
                  "height": {
                    "band": true,
                    "scale": "cat"
                  }
                },
                "hover": {
                  "text_fill": {
                    "value": "#758290"
                  }
                }
              }
            },
            {
              "from": {
                "data": "separate_line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "offset": -120
                  },
                  "y": {
                    "field": "y",
                    "offset": 235
                  },
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              }
            }
          ],
          "width": 480,
          "height": 200,
          "scales": [
            {
              "name": "cat",
              "nice": true,
              "type": "ordinal",
              "range": "height",
              "domain": {
                "data": "tabls",
                "field": "commodity"
              },
              "padding": 0.5
            },
            {
              "name": "val",
              "nice": true,
              "type": "linear",
              "range": "width",
              "round": true,
              "domain": {
                "data": "tabls",
                "field": "val"
              }
            },
            {
              "name": "color",
              "nice": true,
              "type": "ordinal",
              "range": [
                "#3d6ac4",
                "#749be9",
                "#51d4f0",
                "#b1f3b7"
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            },
            {
              "name": "legend-series-x",
              "nice": true,
              "type": "ordinal",
              "range": [
                32,
                270
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            },
            {
              "name": "legend-series-y",
              "nice": true,
              "type": "ordinal",
              "range": [
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            }
          ],
          "padding": {
            "top": 15,
            "left": 100,
            "right": 80,
            "bottom": 35
          },
          "sql_config": [
            {
              "key": "where",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "iso",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "commodity",
                    "label": "Crop"
                  },
                  {
                    "key": "val",
                    "label": "Price",
                    "format": ".3s",
                    "suffix": " usd/ton"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-03T12:38:04.477Z",
        "updatedAt": "2017-03-31T09:41:44.673Z"
      }
    },
    {
      "id": "af969fd8-fd47-430d-ad13-9113e42e9fed",
      "type": "widget",
      "attributes": {
        "name": "Kilocalories per capita",
        "dataset": "202c67a5-5370-4578-b8d6-16533fc44980",
        "slug": "kilocalories-per-capita",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/202c67a5-5370-4578-b8d6-16533fc44980?sql=select * from combined01_prepared",
        "widgetConfig": {
          "axes": [
            {
              "type": "y",
              "scale": "yscale",
              "tickSize": 110,
              "properties": {
                "ticks": {
                  "stroke": {
                    "value": "#eeeeee"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.data|left:1|upper}}{{datum.data|slice:1}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "fontSize": {
                    "value": 14
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "x",
              "scale": "xscale",
              "ticks": 10,
              "tickSize": 0,
              "properties": {
                "grid": {
                  "layer": "front"
                },
                "labels": {
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.data | number: '.2s'}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with r as (select round((sum(value))::numeric,2) as val,avg(value) as val_avg, max_value, commodity, impactparameter, region from (SELECT  max(value) over (partition by impactparameter) max_value, * FROM combined01_prepared where scenario = 'SSP2-GFDL' and impactparameter = 'Kcal per capita') r {{where}}  group by max_value, region, commodity, impactparameter order by impactparameter asc, commodity asc), s as (select unnest(array_agg(distinct impactparameter)) as t, unnest(ARRAY[1,2,3,2,5,2,7,8]) f, unnest(ARRAY['Mha','Tons','Kcal/day','Tons','M','Tons','2005 usd/Ton','Tons/ha']) units from combined01_prepared) select r.*, s.f, s.units from r inner join s on t=impactparameter ",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "formatted",
              "source": "table",
              "transform": [
                {
                  "expr": "1844",
                  "type": "formula",
                  "field": "min"
                },
                {
                  "expr": "format('',datum.val) + ' Kcal'",
                  "type": "formula",
                  "field": "label"
                }
              ]
            }
          ],
          "name": "Kcal per capita",
          "marks": [
            {
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "formatted"
                  },
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "max_value",
                        "scale": "xscale"
                      },
                      "y": {
                        "field": "impactparameter",
                        "scale": "yscale",
                        "offset": "5"
                      },
                      "x2": {
                        "scale": "xscale",
                        "value": 0
                      },
                      "width": {
                        "band": true,
                        "field": "max_value"
                      },
                      "height": {
                        "band": true,
                        "value": 20
                      },
                      "stroke": {
                        "value": "#e8e8e8"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "formatted"
                  },
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "val",
                        "scale": "xscale"
                      },
                      "y": {
                        "field": "impactparameter",
                        "scale": "yscale",
                        "offset": "5"
                      },
                      "x2": {
                        "scale": "xscale",
                        "value": 0
                      },
                      "fill": {
                        "field": "impactparameter",
                        "scale": "color"
                      },
                      "width": {
                        "band": true,
                        "field": "val"
                      },
                      "height": {
                        "band": true,
                        "value": 20
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "formatted"
                  },
                  "type": "text",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "val",
                        "scale": "xscale",
                        "offset": 5
                      },
                      "y": {
                        "field": "impactparameter",
                        "scale": "yscale",
                        "offset": "15"
                      },
                      "fill": {
                        "value": "#758290"
                      },
                      "text": {
                        "field": "label"
                      },
                      "align": {
                        "value": "left"
                      },
                      "baseline": {
                        "value": "middle"
                      },
                      "fontSize": {
                        "value": 12
                      }
                    }
                  }
                },
                {
                  "type": "group",
                  "marks": [
                    {
                      "from": {
                        "data": "formatted"
                      },
                      "name": "bar2",
                      "type": "rect",
                      "properties": {
                        "enter": {
                          "x": {
                            "field": "min",
                            "scale": "xscale"
                          },
                          "y": {
                            "field": "impactparameter",
                            "scale": "yscale",
                            "offset": "0"
                          },
                          "fill": {
                            "value": "#4a596a"
                          },
                          "width": {
                            "band": true,
                            "value": 2
                          },
                          "height": {
                            "band": true,
                            "value": 30
                          }
                        }
                      }
                    },
                    {
                      "from": {
                        "data": "formatted"
                      },
                      "type": "text",
                      "properties": {
                        "enter": {
                          "x": {
                            "field": "min",
                            "scale": "xscale",
                            "offset": -50
                          },
                          "y": {
                            "field": "impactparameter",
                            "scale": "yscale",
                            "offset": "-10"
                          },
                          "fill": {
                            "value": "#758290"
                          },
                          "text": {
                            "template": "Minimum requirement"
                          },
                          "align": {
                            "value": "left"
                          },
                          "baseline": {
                            "value": "middle"
                          },
                          "fontSize": {
                            "value": 12
                          },
                          "fontWeight": {
                            "value": 600
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          ],
          "width": 450,
          "height": 50,
          "scales": [
            {
              "name": "yscale",
              "type": "ordinal",
              "range": "height",
              "domain": {
                "data": "formatted",
                "field": "impactparameter"
              }
            },
            {
              "name": "xscale",
              "nice": true,
              "type": "linear",
              "range": "width",
              "domain": {
                "data": "formatted",
                "field": "max_value"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "data": "formatted",
                "field": "name"
              }
            }
          ],
          "padding": {
            "top": 45,
            "left": 130,
            "right": 60,
            "bottom": 30
          },
          "sqlConfig": [
            {
              "key": "where",
              "keyParams": [
                {
                  "key": "year",
                  "required": true
                },
                {
                  "key": "iso",
                  "required": true
                }
              ]
            }
          ],
          "paramsConfig": []
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-03T12:43:53.336Z",
        "updatedAt": "2017-02-05T19:12:51.680Z"
      }
    },
    {
      "id": "ec40fa88-2f75-4681-abd4-0161db504ee6",
      "type": "widget",
      "attributes": {
        "name": "Precipitation change sonoma",
        "dataset": "c9a1753c-9bc5-4024-b4bd-dff9ec9044c1",
        "slug": "precipitation-change-sonoma",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/c9a1753c-9bc5-4024-b4bd-dff9ec9044c1?sql=select x,  y  from precip_in_per_year",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "title": "Years",
              "values": [
                1920,
                1940,
                1960,
                1980,
                2000,
                2020,
                2040,
                2060,
                2080,
                2099
              ],
              "formatType": "text",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "title": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "title": "Annual Precipitation in inches",
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 0.5
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "title": {
                  "x": {
                    "value": 50
                  },
                  "y": {
                    "value": -20
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://prep-admin.carto.com/api/v2/sql?q=select * from sonoma_widgets_sonoma_precip order by date asc",
              "name": "data",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "hist",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date < 2010",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "modeled",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date > 2009",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date == senal.date",
                  "type": "filter"
                },
                {
                  "expr": "datum.date > 2010 ? senal.xRight : senal.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "datum.date < 2010 ? datum.hst : datum.ccsm4_rcp85",
                  "type": "formula",
                  "field": "value"
                },
                {
                  "expr": "senal.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "by": "date",
                  "type": "sort"
                }
              ]
            }
          ],
          "marks": [
            {
              "type": "rule",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "scale": "y",
                    "value": 56.4
                  },
                  "x2": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "stroke": {
                    "value": "#263e57"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "type": "rule",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "scale": "y",
                    "value": 27.1
                  },
                  "x2": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "value": -15
                  },
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    },
                    "offset": 45
                  },
                  "y2": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    },
                    "offset": 48
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "width": {
                    "value": 9
                  },
                  "opacity": {
                    "value": 0.5
                  }
                }
              }
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": 50
                  },
                  "fill": {
                    "value": "#3b4f63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "value": "10TH Percentile (27.1 IN/YR)"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.7
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "mult": 0.5,
                    "field": {
                      "group": "width"
                    },
                    "offset": -25
                  },
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    },
                    "offset": 45
                  },
                  "y2": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    },
                    "offset": 48
                  },
                  "fill": {
                    "value": "#263e57"
                  },
                  "width": {
                    "value": 9
                  }
                }
              }
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "mult": 0.5,
                    "field": {
                      "group": "width"
                    }
                  },
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": -9
                  },
                  "dy": {
                    "value": 50
                  },
                  "fill": {
                    "value": "#3b4f63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "value": "90TH Percentile (56.4 IN/YR)"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.7
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "hist"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "hst",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#ddd000"
                  },
                  "strokeWidth": {
                    "value": 3
                  }
                }
              }
            },
            {
              "from": {
                "data": "modeled"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "ccsm4_rcp85",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#ddd000"
                  },
                  "strokeWidth": {
                    "value": 3
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip"
              },
              "name": "tooltip",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{senal.date}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{parent.value|number:'.2f'}} IN"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "senal.y"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 130
                  },
                  "height": {
                    "value": 55
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "rule",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "value": 0
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "stroke": {
                    "value": "#000000"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "value",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#c15467"
                  },
                  "size": {
                    "value": 20
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "data",
                "field": "date"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": true,
              "range": "height",
              "domain": {
                "data": "data",
                "field": "hst"
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 50,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "x": 1920,
                "y": 0
              },
              "name": "senal",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX()), xRight: +iscale('x', eventX() - 130), date: round(iscale('x', eventX())), y: iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-03T17:54:53.836Z",
        "updatedAt": "2017-03-21T12:00:21.534Z"
      }
    },
    {
      "id": "2cb0babd-55b0-4fee-9596-0832cf9d48dc",
      "type": "widget",
      "attributes": {
        "name": "Projected changes in streamflow - Rain dominant",
        "dataset": "6a18cd92-acd3-4107-b855-95fa2af24473",
        "slug": "projected-changes-in-streamflow-rain-dominant",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select * from index_6a18cd92acd34107b85595fa2af24473",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0.1
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "scale": "xlabels"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 10,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 9
                  },
                  "fontWeight": {
                    "value": 100
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, historical as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Samish' order by numeric_m ASC",
              "name": "line1",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2040s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Samish' order by numeric_m ASC",
              "name": "line2",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2080s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Samish' order by numeric_m ASC",
              "name": "line3",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "name": "axis",
              "values": [
                {
                  "x": "Years",
                  "y": "cfs"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Historical"
                },
                {
                  "cat": "A1B_2040s"
                },
                {
                  "cat": "A1B_2080s"
                }
              ]
            }
          ],
          "name": "Rain dominant",
          "marks": [
            {
              "from": {
                "data": "line1"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#111"
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "from": {
                "data": "line2"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#fff000"
                  },
                  "strokeDash": {
                    "value": [
                      3,
                      2
                    ]
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "line3"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#c34545"
                  },
                  "strokeDash": {
                    "value": [
                      3,
                      2
                    ]
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": 0,
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": -10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.y | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": 470
                  },
                  "dy": {
                    "value": 10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.x | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "legends"
              },
              "name": "point",
              "type": "symbol",
              "properties": {
                "enter": {
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "size": {
                    "value": 36
                  },
                  "fillOpacity": {
                    "value": 0.5
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "xlabels",
              "type": "ordinal",
              "range": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "z"
                  }
                ]
              },
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "y"
                  },
                  {
                    "data": "line2",
                    "field": "y"
                  },
                  {
                    "data": "line3",
                    "field": "y"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#111",
                "#fff000",
                "#c34545"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "title": "Samish river",
              "offset": 20,
              "properties": {
                "title": {
                  "dy": {
                    "value": -5
                  },
                  "fontSize": {
                    "value": 14
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data|truncate:15}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.8,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -30
                  },
                  "fill": {
                    "value": "#efefef"
                  },
                  "width": {
                    "value": 100
                  },
                  "height": {
                    "value": 70
                  },
                  "fillOpacity": {
                    "value": 0.8
                  }
                },
                "symbols": {
                  "stroke": {
                    "value": "transparent"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 28,
            "right": 5,
            "bottom": 30
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-23T11:10:14.716Z",
        "updatedAt": "2017-03-21T12:45:40.165Z"
      }
    },
    {
      "id": "e0afb344-2839-43f5-8774-31619d34dcf5",
      "type": "widget",
      "attributes": {
        "name": "State Fragility Index",
        "dataset": "42de3f98-ba1c-4572-a227-2e18d45239a5",
        "slug": "state-fragility-index",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T18:03:54.701Z",
        "updatedAt": "2017-02-06T18:03:54.701Z"
      }
    },
    {
      "id": "822e16a1-6a9f-4eb7-aa0d-c384e4baa29e",
      "type": "widget",
      "attributes": {
        "name": "Percentage of Urban Population with Access to an Improved Water Source (WHO/UNICEF)",
        "dataset": "ed2f7e86-bde1-457d-abd9-bac2abee5bc4",
        "slug": "percentage-of-urban-population-with-access-to-an-improved-water-source-who-unicef",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-28T16:18:06.223Z",
        "updatedAt": "2017-03-28T16:18:06.223Z"
      }
    },
    {
      "id": "f6f18cd2-ce95-4436-af73-32378ebaa551",
      "type": "widget",
      "attributes": {
        "name": "Crops growing under high water stress conditions in a country",
        "dataset": "357933c6-2780-427b-bf02-e83dcf457de6",
        "slug": "crops-growing-under-high-water-stress-conditions-in-a-country",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/357933c6-2780-427b-bf02-e83dcf457de6?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "data": {
            "url": "https://wri-01.carto.com/api/v2/sql?q=WITH chstress AS (SELECT iso, VALUES FROM aqueduct_water_stress_country_ranking_bau WHERE YEAR = {{year}} AND TYPE = 'all' ORDER BY iso DESC), crops AS (SELECT * FROM combined01_prepared WHERE YEAR = {{year}} AND impactparameter = 'Area' AND scenario = 'SSP2-MIRO'), result as (SELECT YEAR, crops.iso, region, round((sum(crops.value)*247.11)::numeric,2) AS value FROM crops INNER JOIN chstress ON crops.iso=chstress.iso WHERE crops.iso = '{{iso}}' GROUP BY region, YEAR, crops.iso ORDER BY iso) SELECT case when year > 2010 then 'will be' else 'are' end as verb, case when year > 2010 then 'in ' || to_char(year, '9999') else '' end as year , iso, region as country, value from result "
          },
          "type": "text",
          "template": "There {{verb}} an estimated {{value}} hectares growing crops under high water stress conditions {{year}} in {{country}}.",
          "sql_config": [],
          "params_config": [
            {
              "key": "year",
              "required": true
            },
            {
              "key": "iso",
              "required": true
            }
          ],
          "template_config": [
            {
              "key": "verb"
            },
            {
              "key": "value",
              "format": ".2s"
            },
            {
              "key": "country"
            },
            {
              "key": "year"
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-19T14:02:21.498Z",
        "updatedAt": "2017-02-09T11:55:28.768Z"
      }
    },
    {
      "id": "e87ccaea-7a54-4ffd-8721-b96b29e86d1b",
      "type": "widget",
      "attributes": {
        "name": "Number of Days over 95ºF - Historical Climate",
        "dataset": "ce9ca0d8-4365-4b62-ad87-350c0fc58f41",
        "slug": "historic-number-of-days-over-95-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected average number of days per year with maximum temperatures above 95ÁF for 2041-2070 compared to 1971-2000, assuming emissions continue to grow (A2 scenario). Patterns are similar, but less pronounced, assuming a reduced emissions scenario (B1). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_17-4_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "4fd04aed-746c-48e0-97bb-75b308bae526"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:43.413Z",
        "updatedAt": "2017-03-21T12:25:25.047Z"
      }
    },
    {
      "id": "f30386c9-7fd1-4669-878f-faaaa44abb95",
      "type": "widget",
      "attributes": {
        "name": "Temperature maximums in Porto Alegre",
        "dataset": "c2d418e1-6fef-4204-863c-090d0461334d",
        "slug": "temperature-maximums-in-porto-alegre",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Annual historic and projected temperature minimums in degrees Celsius derived from the NEX-GDDP downscaled data for the RCP4.5 and RCP 8.5 scenarios. In addition to seasonal fluctuation, this graph shows a trend of increased annual temperature lows from 1950 to 2100 for Porto Alegre. The RCP4.5 scenario, which assumes stabilization shortly after 2100, shows an increased high of about 2°C. The RCP8.5 scenario, characterized by relatively high greenhouse gas emissions, projects an almost 5°C increase.",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/c2d418e1-6fef-4204-863c-090d0461334d?sql=select * from index_c2d418e16fef4204863c090d0461334d",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "title": "years",
              "values": [
                1950,
                1970,
                1990,
                2010,
                2030,
                2050,
                2070,
                2090
              ],
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "top"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              }
            },
            {
              "grid": false,
              "type": "y",
              "scale": "y",
              "ticks": 10,
              "title": "ºC",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "y": {
                    "value": -20
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/c2d418e1-6fef-4204-863c-090d0461334d?sql=select%20*%20from%20index_c2d418e16fef4204863c090d0461334d%20order%20by%20date%20ASC%20LIMIT%201200",
              "name": "data",
              "format": {
                "type": "json",
                "property": "data"
              }
            },
            {
              "name": "rcp45",
              "source": "data",
              "transform": [
                {
                  "test": "test(/rcp45/gi, datum.type)",
                  "type": "filter"
                },
                {
                  "type": "aggregate",
                  "groupby": [
                    "date"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "min",
                        "max"
                      ],
                      "ops": [
                        "min",
                        "max"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "rcp85",
              "source": "data",
              "transform": [
                {
                  "test": "test(/rcp85/gi, datum.type)",
                  "type": "filter"
                },
                {
                  "type": "aggregate",
                  "groupby": [
                    "date"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "min",
                        "max"
                      ],
                      "ops": [
                        "min",
                        "max"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Mean RCP 4.5"
                },
                {
                  "cat": "Mean RCP 8.5"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date == indexDate.date",
                  "type": "filter"
                },
                {
                  "expr": "datum.date > 2080 ? indexDate.xRight : indexDate.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "indexDate.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "by": "type",
                  "type": "sort"
                }
              ]
            },
            {
              "name": "tooltip_rcp45",
              "source": "tooltip",
              "transform": [
                {
                  "test": "datum.type == 'hist_rcp45_mean'",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "tooltip_rcp85",
              "source": "tooltip",
              "transform": [
                {
                  "test": "datum.type == 'hist_rcp85_mean'",
                  "type": "filter"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "datalines-rcp45",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#25b5cd"
                      },
                      "fillOpacity": {
                        "value": 0.4
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "data",
                    "transform": [
                      {
                        "test": "datum.type == 'hist_rcp45_mean'",
                        "type": "filter"
                      }
                    ]
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#25b5cd"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "datalines-rcp85",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#efa600"
                      },
                      "fillOpacity": {
                        "value": 0.4
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "data",
                    "transform": [
                      {
                        "test": "datum.type == 'hist_rcp85_mean'",
                        "type": "filter"
                      }
                    ]
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#efa600"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "from": {
                "data": "tooltip_rcp45"
              },
              "name": "tooltip_rcp45",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.xLeft}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "RCP 4.5: {{parent.value|number:'.2f'}} ºC"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 100
                  },
                  "height": {
                    "value": 55
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip_rcp85"
              },
              "name": "tooltip_rcp85",
              "type": "group",
              "marks": [
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 50
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "RCP 8.5: {{parent.value|number:'.2f'}} ºC"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "width": {
                    "value": 150
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 1
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip_rcp45"
              },
              "size": 4,
              "type": "rule",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "value": 0
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "stroke": {
                    "value": "#000000"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip",
                "transform": [
                  {
                    "test": "datum.type == 'hist_rcp45_mean' || datum.type == 'hist_rcp85_mean'",
                    "type": "filter"
                  }
                ]
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "value",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#c15467"
                  },
                  "size": {
                    "value": 20
                  }
                }
              }
            }
          ],
          "width": 600,
          "height": 400,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "date"
                  }
                ]
              }
            },
            {
              "name": "y",
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "value"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#25b5cd",
                "#efa600"
              ],
              "domain": {
                "sort": true,
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "offset": 50,
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.05,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -10
                  }
                },
                "symbols": {
                  "size": {
                    "value": 30
                  },
                  "shape": {
                    "value": "square"
                  },
                  "strokeOpacity": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 5,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "yval": 0
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX() + 10), xRight: +iscale('x', eventX() - 110), date: +iscale('x', eventX()), yval: iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T09:41:26.677Z",
        "updatedAt": "2017-03-21T14:18:08.518Z"
      }
    },
    {
      "id": "0bf764d6-9bb8-4565-bd11-4d729d0fd004",
      "type": "widget",
      "attributes": {
        "name": "Temperature lows in Porto Alegre",
        "dataset": "62520fd2-2dfb-4a13-840b-35ac88fc7aa4",
        "slug": "temperature-lows-in-porto-alegre",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Annual historic and projected temperature minimums in degrees Celsius derived from the NEX-GDDP downscaled data for the RCP4.5 and RCP 8.5 scenarios. In addition to seasonal fluctuation, this graph shows a trend of increased annual temperature lows from 1950 to 2100 for Porto Alegre. The RCP4.5 scenario, which assumes stabilization shortly after 2100, shows an increased high of about 2°C. The RCP8.5 scenario, characterized by relatively high greenhouse gas emissions, projects an almost 5°C increase.",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/62520fd2-2dfb-4a13-840b-35ac88fc7aa4?sql=select * from index_62520fd22dfb4a13840b35ac88fc7aa4",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "title": "years",
              "values": [
                1950,
                1970,
                1990,
                2010,
                2030,
                2050,
                2070,
                2090
              ],
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "top"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              }
            },
            {
              "grid": false,
              "type": "y",
              "scale": "y",
              "ticks": 10,
              "title": "ºF",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "y": {
                    "value": -20
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/62520fd2-2dfb-4a13-840b-35ac88fc7aa4?sql=select%20*%20from%20index_62520fd22dfb4a13840b35ac88fc7aa4%20order%20by%20date%20ASC%20LIMIT%201200",
              "name": "data",
              "format": {
                "type": "json",
                "property": "data"
              }
            },
            {
              "name": "rcp45",
              "source": "data",
              "transform": [
                {
                  "test": "test(/rcp45/gi, datum.type)",
                  "type": "filter"
                },
                {
                  "type": "aggregate",
                  "groupby": [
                    "date"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "min",
                        "max"
                      ],
                      "ops": [
                        "min",
                        "max"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "rcp85",
              "source": "data",
              "transform": [
                {
                  "test": "test(/rcp85/gi, datum.type)",
                  "type": "filter"
                },
                {
                  "type": "aggregate",
                  "groupby": [
                    "date"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "min",
                        "max"
                      ],
                      "ops": [
                        "min",
                        "max"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Mean RCP 4.5"
                },
                {
                  "cat": "Mean RCP 8.5"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date == indexDate.date",
                  "type": "filter"
                },
                {
                  "expr": "datum.date > 2080 ? indexDate.xRight : indexDate.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "indexDate.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "by": "type",
                  "type": "sort"
                }
              ]
            },
            {
              "name": "tooltip_rcp45",
              "source": "tooltip",
              "transform": [
                {
                  "test": "datum.type == 'hist_rcp45_mean'",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "tooltip_rcp85",
              "source": "tooltip",
              "transform": [
                {
                  "test": "datum.type == 'hist_rcp85_mean'",
                  "type": "filter"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "datalines-rcp45",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#25b5cd"
                      },
                      "fillOpacity": {
                        "value": 0.4
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "data",
                    "transform": [
                      {
                        "test": "datum.type == 'hist_rcp45_mean'",
                        "type": "filter"
                      }
                    ]
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#25b5cd"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "datalines-rcp85",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#efa600"
                      },
                      "fillOpacity": {
                        "value": 0.4
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "data",
                    "transform": [
                      {
                        "test": "datum.type == 'hist_rcp85_mean'",
                        "type": "filter"
                      }
                    ]
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#efa600"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "from": {
                "data": "tooltip_rcp45"
              },
              "name": "tooltip_rcp45",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.xLeft}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "RCP 4.5: {{parent.value|number:'.2f'}} ºF"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 100
                  },
                  "height": {
                    "value": 55
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip_rcp85"
              },
              "name": "tooltip_rcp85",
              "type": "group",
              "marks": [
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 50
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "RCP 8.5: {{parent.value|number:'.2f'}} ºF"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "width": {
                    "value": 150
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 1
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip_rcp45"
              },
              "size": 4,
              "type": "rule",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "value": 0
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "stroke": {
                    "value": "#000000"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip",
                "transform": [
                  {
                    "test": "datum.type == 'hist_rcp45_mean' || datum.type == 'hist_rcp85_mean'",
                    "type": "filter"
                  }
                ]
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "value",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#c15467"
                  },
                  "size": {
                    "value": 20
                  }
                }
              }
            }
          ],
          "width": 600,
          "height": 400,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "date"
                  }
                ]
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "value"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#25b5cd",
                "#efa600"
              ],
              "domain": {
                "sort": true,
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "offset": 50,
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.05,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -10
                  }
                },
                "symbols": {
                  "size": {
                    "value": 30
                  },
                  "shape": {
                    "value": "square"
                  },
                  "strokeOpacity": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 5,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "yval": 0
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX() + 10), xRight: +iscale('x', eventX() - 110), date: +iscale('x', eventX()), yval: iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T09:15:39.774Z",
        "updatedAt": "2017-03-21T14:19:36.673Z"
      }
    },
    {
      "id": "d0143c52-0920-4700-8c28-9600fcdf76e7",
      "type": "widget",
      "attributes": {
        "name": "Projected changes in streamflow - Snow dominant",
        "dataset": "6a18cd92-acd3-4107-b855-95fa2af24473",
        "slug": "projected-changes-in-streamflow-snow-dominant",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/6a18cd92-acd3-4107-b855-95fa2af24473?select * from index_6a18cd92acd34107b85595fa2af24473",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0.1
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "scale": "xlabels"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 10,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 9
                  },
                  "fontWeight": {
                    "value": 100
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, historical as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Sauk' order by numeric_m ASC",
              "name": "line1",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2040s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Sauk' order by numeric_m ASC",
              "name": "line2",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2080s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Sauk' order by numeric_m ASC",
              "name": "line3",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "name": "axis",
              "values": [
                {
                  "x": "Years",
                  "y": "cfs"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Historical"
                },
                {
                  "cat": "A1B_2040s"
                },
                {
                  "cat": "A1B_2080s"
                }
              ]
            }
          ],
          "name": "Snow dominant",
          "marks": [
            {
              "from": {
                "data": "line1"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#111"
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "from": {
                "data": "line2"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#fff000"
                  },
                  "strokeDash": {
                    "value": [
                      3,
                      2
                    ]
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "line3"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#c34545"
                  },
                  "strokeDash": {
                    "value": [
                      3,
                      2
                    ]
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": 0,
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": -10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.y | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": 470
                  },
                  "dy": {
                    "value": 10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.x | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "legends"
              },
              "name": "point",
              "type": "symbol",
              "properties": {
                "enter": {
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "size": {
                    "value": 36
                  },
                  "fillOpacity": {
                    "value": 0.5
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "xlabels",
              "type": "ordinal",
              "range": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "z"
                  }
                ]
              },
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "y"
                  },
                  {
                    "data": "line2",
                    "field": "y"
                  },
                  {
                    "data": "line3",
                    "field": "y"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#111",
                "#fff000",
                "#c34545"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "title": "Sauk river",
              "offset": 20,
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data|truncate:15}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.8,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -30
                  },
                  "fill": {
                    "value": "#efefef"
                  },
                  "width": {
                    "value": 100
                  },
                  "height": {
                    "value": 70
                  },
                  "fillOpacity": {
                    "value": 0.8
                  }
                },
                "symbols": {
                  "stroke": {
                    "value": "transparent"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 28,
            "right": 5,
            "bottom": 30
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-23T15:34:38.455Z",
        "updatedAt": "2017-03-21T14:21:06.659Z"
      }
    },
    {
      "id": "98e026bc-ab55-4086-adb2-afdc9b918985",
      "type": "widget",
      "attributes": {
        "name": "Projected changes in streamflow - Mixed rain and snow",
        "dataset": "6a18cd92-acd3-4107-b855-95fa2af24473",
        "slug": "projected-changes-in-streamflow-mixed-rain-and-snow",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/6a18cd92-acd3-4107-b855-95fa2af24473?select * from index_6a18cd92acd34107b85595fa2af24473",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0.1
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "scale": "xlabels"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 10,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 9
                  },
                  "fontWeight": {
                    "value": 100
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, historical as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Snohomish' order by numeric_m ASC",
              "name": "line1",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2040s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Snohomish' order by numeric_m ASC",
              "name": "line2",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "url": "https://api.resourcewatch.org/query/6a18cd92-acd3-4107-b855-95fa2af24473?sql=select numeric_m as x, A1B_2080s as y, month as z from index_6a18cd92acd34107b85595fa2af24473 where streamflow='Snohomish' order by numeric_m ASC",
              "name": "line3",
              "format": {
                "type": "json",
                "property": "data"
              },
              "transform": [
                {
                  "by": [
                    "x"
                  ],
                  "type": "sort"
                }
              ]
            },
            {
              "name": "axis",
              "values": [
                {
                  "x": "Years",
                  "y": "cfs"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Historical"
                },
                {
                  "cat": "A1B_2040s"
                },
                {
                  "cat": "A1B_2080s"
                }
              ]
            }
          ],
          "name": "Mixed rain and snow",
          "marks": [
            {
              "from": {
                "data": "line1"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#111"
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "from": {
                "data": "line2"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#fff000"
                  },
                  "strokeDash": {
                    "value": [
                      3,
                      2
                    ]
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "line3"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#c34545"
                  },
                  "strokeDash": {
                    "value": [
                      3,
                      2
                    ]
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": 0,
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": -10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.y | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": 470
                  },
                  "dy": {
                    "value": 10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.x | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "legends"
              },
              "name": "point",
              "type": "symbol",
              "properties": {
                "enter": {
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "size": {
                    "value": 36
                  },
                  "fillOpacity": {
                    "value": 0.5
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "xlabels",
              "type": "ordinal",
              "range": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "z"
                  }
                ]
              },
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "line1",
                    "field": "y"
                  },
                  {
                    "data": "line2",
                    "field": "y"
                  },
                  {
                    "data": "line3",
                    "field": "y"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#111",
                "#fff000",
                "#c34545"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "title": "Snohomish river",
              "offset": 20,
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data|truncate:15}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.8,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -30
                  },
                  "fill": {
                    "value": "#efefef"
                  },
                  "width": {
                    "value": 100
                  },
                  "height": {
                    "value": 70
                  },
                  "fillOpacity": {
                    "value": 0.8
                  }
                },
                "symbols": {
                  "stroke": {
                    "value": "transparent"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 28,
            "right": 5,
            "bottom": 30
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-23T11:39:14.270Z",
        "updatedAt": "2017-03-21T14:22:32.180Z"
      }
    },
    {
      "id": "570355b8-01b5-435c-b682-58ae45d52115",
      "type": "widget",
      "attributes": {
        "name": "Temperature change",
        "dataset": "3a17f882-a1b3-47dc-a52b-e68d7d02aae5",
        "slug": "temperature-change",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3a17f882-a1b3-47dc-a52b-e68d7d02aae5?sql=select%20year%20as%20x,%20annual%20as%20y%20from%20index_3a17f882a1b347dca52be68d7d02aae5%20order%20by%20year%20asc",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/3a17f882-a1b3-47dc-a52b-e68d7d02aae5?sql=select year as x, annual as y from index_3a17f882a1b347dca52be68d7d02aae5 order by year ASC",
              "name": "line",
              "format": {
                "type": "json",
                "parse": {
                  "x": "date"
                },
                "property": "data"
              }
            },
            {
              "name": "stats",
              "source": "line",
              "transform": [
                {
                  "type": "aggregate",
                  "summarize": {
                    "x": [
                      "mean",
                      "variance",
                      "count"
                    ],
                    "y": [
                      "mean"
                    ]
                  }
                }
              ]
            },
            {
              "name": "regression",
              "source": "line",
              "transform": [
                {
                  "type": "cross",
                  "with": "stats"
                },
                {
                  "expr": "(datum.a.x - datum.b.mean_x) * (datum.a.y - datum.b.mean_y) / datum.b.count_x",
                  "type": "formula",
                  "field": "precovariance"
                },
                {
                  "type": "aggregate",
                  "summarize": {
                    "precovariance": [
                      "sum"
                    ]
                  }
                },
                {
                  "expr": "datum.sum_precovariance",
                  "type": "formula",
                  "field": "covariance"
                },
                {
                  "type": "cross",
                  "with": "stats"
                },
                {
                  "expr": "datum.a.covariance / datum.b.variance_x",
                  "type": "formula",
                  "field": "a_factor"
                },
                {
                  "expr": "datum.b.mean_y - datum.a_factor * datum.b.mean_x",
                  "type": "formula",
                  "field": "b_factor"
                },
                {
                  "type": "cross",
                  "with": "line"
                },
                {
                  "expr": "datum.a.a_factor * datum.b.x + datum.a.b_factor",
                  "type": "formula",
                  "field": "y"
                },
                {
                  "expr": "datum.b.x",
                  "type": "formula",
                  "field": "x"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "line",
              "transform": [
                {
                  "type": "cross",
                  "with": "stats"
                },
                {
                  "test": "datum.a.x == utc(currentYear, 0, 1)",
                  "type": "filter"
                },
                {
                  "expr": "datum.a.x > utc(utcyear(datum.b.mean_x), 0, 1) ? tooltip.xRight : tooltip.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "tooltip.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "expr": "datum.a.y",
                  "type": "formula",
                  "field": "y"
                }
              ]
            },
            {
              "name": "axis",
              "values": [
                {
                  "x": "Years",
                  "y": "ºF"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#c34545"
                  },
                  "strokeWidth": {
                    "value": 3
                  }
                }
              }
            },
            {
              "from": {
                "data": "stats"
              },
              "type": "rule",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "field": "mean_y",
                    "scale": "y"
                  },
                  "x2": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 2
                  },
                  "strokeOpacity": {
                    "value": 0.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "regression"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#263e57"
                  },
                  "opacity": {
                    "value": 0.3
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": 0,
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": -10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.y | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": 470
                  },
                  "dy": {
                    "value": 22
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.x | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip",
                "transform": [
                  {
                    "type": "cross",
                    "with": "axis"
                  },
                  {
                    "expr": "datum.b.y",
                    "type": "formula",
                    "field": "yUnit"
                  },
                  {
                    "expr": "datum.a.xTooltip",
                    "type": "formula",
                    "field": "xTooltip"
                  },
                  {
                    "expr": "datum.a.y",
                    "type": "formula",
                    "field": "y"
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{currentYear}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{parent.y|number:'.2f'}} {{parent.yUnit}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y",
                    "offset": -55
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 150
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "xData",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "stroke": {
                    "value": "#c34545"
                  },
                  "fontSize": {
                    "value": 12
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "time",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "line",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "line",
                    "field": "y"
                  }
                ]
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 28,
            "right": 5,
            "bottom": 30
          },
          "signals": [
            {
              "init": "0",
              "name": "currentYear",
              "streams": [
                {
                  "expr": "utcyear(iscale('x', eventX()))",
                  "type": "mousemove"
                }
              ]
            },
            {
              "init": {
                "x": 0,
                "y": 0
              },
              "name": "tooltip",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX()), xRight: +iscale('x', eventX() - 150)}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-02T07:51:45.298Z",
        "updatedAt": "2017-03-21T14:23:58.358Z"
      }
    },
    {
      "id": "a5dc9b40-281d-478e-b566-3736580ac602",
      "type": "widget",
      "attributes": {
        "name": "Country Water Risk Exposure and Risk of Hunger (all crops, water stress, baseline)",
        "dataset": "90199a31-1f11-4319-a615-35bf8a0c625f",
        "slug": "country-water-risk-exposure-and-risk-of-hunger-all-crops-water-stress-baseline",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": false,
        "queryUrl": "query/90199a31-1f11-4319-a615-35bf8a0c625f?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "axes": [
            {
              "grid": false,
              "type": "x",
              "layer": "back",
              "scale": "x",
              "ticks": 5,
              "tick_size": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  },
                  "stroke_width": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#eeeeee"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#758290"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "font_size": {
                    "value": 14
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 2
                  }
                }
              },
              "tick_width": 0,
              "tick_padding": 20
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 5,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "labels": {
                  "dy": {
                    "value": 3
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.data|number:'.2s'}}"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "font_size": {
                    "value": 14
                  }
                }
              },
              "tick_padding": 10
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with chstress as (SELECT iso, values from aqueduct_water_stress_country_ranking_bau WHERE year = 2010 and type = 'all' and values > 4 order by iso desc), crops as (SELECT * FROM combined01_prepared WHERE year = 2010 and impactparameter = 'Pop. at risk of hunger' and scenario = 'SSP2-GFDL') select crops.*, chstress.values from crops inner join chstress on crops.iso=chstress.iso order by values desc",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "arrow_hide",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 6,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "size": {
                "value": 150
              },
              "type": "symbol",
              "shape": "circle",
              "properties": {
                "enter": {
                  "x": {
                    "field": "value",
                    "scale": "x"
                  },
                  "y": {
                    "field": "values",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "steelblue"
                  },
                  "opacity": {
                    "value": 0.8
                  }
                },
                "hover": {
                  "opacity": {
                    "value": 0.3
                  }
                },
                "update": {
                  "opacity": {
                    "value": 0.8
                  }
                }
              }
            },
            {
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 45
                      },
                      "y": {
                        "value": 14.5
                      },
                      "fill": {
                        "value": "#4a596a"
                      },
                      "text": {
                        "template": "{{tooltip.region}}"
                      },
                      "align": {
                        "value": "center"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "font_size": {
                        "value": 11
                      }
                    }
                  }
                },
                {
                  "type": "symbol",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 45
                      },
                      "y": {
                        "value": 26
                      },
                      "fill": {
                        "value": "#e1e6e8"
                      },
                      "size": {
                        "value": 30
                      },
                      "shape": {
                        "value": "triangle-down"
                      },
                      "stroke": [
                        {
                          "test": "!tooltip._id",
                          "value": 0
                        },
                        {
                          "value": 0.2
                        }
                      ],
                      "opacity": [
                        {
                          "test": "!tooltip._id",
                          "value": 0
                        },
                        {
                          "value": 1
                        }
                      ],
                      "stroke_opacity": {
                        "value": 0.2
                      }
                    }
                  }
                },
                {
                  "type": "symbol",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 45
                      },
                      "y": {
                        "value": 22
                      },
                      "fill": {
                        "value": "#fff"
                      },
                      "size": {
                        "value": 60
                      },
                      "shape": {
                        "value": "triangle-down"
                      },
                      "opacity": [
                        {
                          "test": "!tooltip._id",
                          "value": 0
                        },
                        {
                          "value": 1
                        }
                      ]
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "scale": "x",
                    "offset": -45,
                    "signal": "tooltip.value"
                  },
                  "y": {
                    "scale": "y",
                    "offset": -38,
                    "signal": "tooltip.values"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 90
                  },
                  "height": {
                    "value": 23
                  },
                  "stroke": [
                    {
                      "value": "#e1e6e8"
                    }
                  ],
                  "fill_opacity": [
                    {
                      "test": "!tooltip._id",
                      "value": 0
                    },
                    {
                      "value": 1
                    }
                  ],
                  "stroke_opacity": [
                    {
                      "test": "!tooltip._id",
                      "value": 0
                    },
                    {
                      "value": 2
                    }
                  ]
                }
              }
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": 319
                  },
                  "y": {
                    "value": 252
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "Risk of Hunger"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              }
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": -100
                  },
                  "y": {
                    "value": 0
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "Water"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              }
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": -100
                  },
                  "y": {
                    "value": 22
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "Risk"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              }
            }
          ],
          "width": 426,
          "height": 200,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "value"
              }
            },
            {
              "name": "size",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "table",
                "field": "values"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "values"
              }
            }
          ],
          "padding": {
            "top": 50,
            "left": 130,
            "right": 30,
            "bottom": 90
          },
          "signals": [
            {
              "init": {},
              "name": "tooltip",
              "streams": [
                {
                  "expr": "datum",
                  "type": "symbol:mouseover"
                },
                {
                  "expr": "{}",
                  "type": "symbol:mouseout"
                }
              ]
            }
          ],
          "sql_config": [
            {
              "key": "where",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                }
              ]
            },
            {
              "key": "where2",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "water_column",
              "required": false
            },
            {
              "key": "year",
              "required": true
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-31T11:51:07.659Z",
        "updatedAt": "2017-01-31T11:51:07.659Z"
      }
    },
    {
      "id": "28e9bc98-a1b1-4a5b-99e8-c809480ac91e",
      "type": "widget",
      "attributes": {
        "name": "World Price (USD/Ton)",
        "dataset": "28e9bc98-a1b1-4a5b-99e8-c809480ac91e",
        "slug": "summary-table-for-world-price",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/c4ee894f-2a9f-4681-9c3d-d94cf106f796?sql=select * from combined01_prepared",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "val",
              "ticks": 7,
              "tick_size": 0,
              "properties": {
                "labels": {
                  "text": {
                    "template": "{{datum.data | number:'.3s'}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "scale": "cat",
              "tick_size": 80,
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#eeeeee"
                  }
                },
                "labels": {
                  "text": {
                    "template": "{{datum.data | slice:0,1 | upper}}{{datum.data | slice:1,100, datum.crop}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "font_size": {
                    "value": 14
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 2
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with r as (select round((sum(value))::numeric,2) as val,avg(value) as val_avg, max_value, commodity, impactparameter, region from (SELECT  max(value) over (partition by impactparameter) max_value, * FROM combined01_prepared where scenario = 'SSP2-GFDL' and impactparameter = 'World price') r {{where}} group by max_value, region, commodity, impactparameter order by impactparameter asc, commodity asc), s as (select unnest(array_agg(distinct impactparameter)) as t, unnest(ARRAY[1,2,3,2,5,2,7,8]) f, unnest(ARRAY['Mha','Tons','Kcal/day','Tons','M','Tons','2005 usd/Ton','Tons/ha']) units from combined01_prepared) select r.*, s.f, s.units from r inner join s on t=impactparameter ",
              "name": "tabls",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select distinct(commodity) from combined01_prepared where commodity <> '-'",
              "name": "comm",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "legend",
              "source": "tabls",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "t"
                  ],
                  "summarize": [
                    {
                      "ops": [
                        "sum"
                      ],
                      "field": "val"
                    }
                  ]
                }
              ]
            },
            {
              "name": "separate_line",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 680,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "tabls",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "commodity"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "from": {
                    "transform": [
                      {
                        "expr": "format('.3s', datum.val)",
                        "type": "formula",
                        "field": "capitalize"
                      }
                    ]
                  },
                  "name": "bars",
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "val",
                        "scale": "val"
                      },
                      "y": {
                        "offset": -8
                      },
                      "x2": {
                        "scale": "val",
                        "value": 0
                      },
                      "fill": {
                        "field": "commodity",
                        "scale": "color"
                      },
                      "height": {
                        "band": true,
                        "value": 20
                      },
                      "stroke": {
                        "value": "#fff"
                      },
                      "padding": 5,
                      "stroke_width": {
                        "value": 2
                      }
                    },
                    "update": {
                      "fill_opacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "mark": "bars"
                  },
                  "type": "text",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x2",
                        "offset": 5
                      },
                      "y": {
                        "field": "y"
                      },
                      "dy": {
                        "mult": 0.55,
                        "field": "height"
                      },
                      "fill": {
                        "value": "#758290"
                      },
                      "text": {
                        "field": "datum.capitalize"
                      },
                      "align": {
                        "value": "left"
                      },
                      "baseline": {
                        "value": "middle"
                      },
                      "font_size": {
                        "value": 12
                      }
                    }
                  }
                }
              ],
              "scales": [
                {
                  "name": "pos",
                  "type": "ordinal",
                  "range": "height",
                  "domain": {
                    "field": "val"
                  }
                }
              ],
              "properties": {
                "enter": {
                  "y": {
                    "field": "key",
                    "scale": "cat"
                  },
                  "height": {
                    "band": true,
                    "scale": "cat"
                  }
                },
                "hover": {
                  "text_fill": {
                    "value": "#758290"
                  }
                }
              }
            },
            {
              "from": {
                "data": "separate_line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "offset": -120
                  },
                  "y": {
                    "field": "y",
                    "offset": 235
                  },
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              }
            }
          ],
          "width": 480,
          "height": 200,
          "scales": [
            {
              "name": "cat",
              "nice": true,
              "type": "ordinal",
              "range": "height",
              "domain": {
                "data": "comm",
                "field": "commodity"
              },
              "padding": 0.5
            },
            {
              "name": "val",
              "nice": true,
              "type": "linear",
              "range": "width",
              "round": true,
              "domain": {
                "data": "tabls",
                "field": "val"
              }
            },
            {
              "name": "color",
              "nice": true,
              "type": "ordinal",
              "range": [
                "#3d6ac4",
                "#749be9",
                "#51d4f0",
                "#b1f3b7"
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            },
            {
              "name": "legend-series-x",
              "nice": true,
              "type": "ordinal",
              "range": [
                32,
                270
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            },
            {
              "name": "legend-series-y",
              "nice": true,
              "type": "ordinal",
              "range": [
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            }
          ],
          "padding": {
            "top": 15,
            "left": 100,
            "right": 80,
            "bottom": 35
          },
          "sql_config": [
            {
              "key": "where",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "iso",
              "required": true
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-31T12:48:55.986Z",
        "updatedAt": "2017-03-03T11:35:22.336Z"
      }
    },
    {
      "id": "518ad6e8-448f-45e6-943e-359af82e4ed0",
      "type": "widget",
      "attributes": {
        "name": "Projected precipitation change in Puget Sound",
        "dataset": "49ef62d6-eebe-4a52-800e-d48d3d15996d",
        "slug": "projected-precipitation-change-in-puget-sound",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "This graph shows average yearly precipitation for the Puget Sound region, relative to the average for 1950-1999 (horizontal gray line, corresponding to an annual total precipitation of 78 inches). The black line shows the average simulated precipitation for 1950-2005, based on the individual model results indicated by the thin grey lines. The thick colored lines show the average among model projections for two emissions scenarios (low: RCP 4.5, and high: RCP 8.5), while the thin colored lines show individual model projections for each scenario. Data source: Downscaled climate projections developed by Abatzoglou and Brown (2011).",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "/query/49ef62d6-eebe-4a52-800e-d48d3d15996d?sql=select year, AVG_HIST,AVG_RCP45, AVG_RCP85 from index_49ef62d6eebe4a52800ed48d3d15996d order by year ASC",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "title": "years",
              "values": [
                1950,
                1970,
                1990,
                2010,
                2030,
                2050,
                2070,
                2090
              ],
              "formatType": "string",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "top"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              }
            },
            {
              "grid": false,
              "type": "y",
              "scale": "y",
              "ticks": 3,
              "title": "ºF",
              "values": [
                -60,
                -40,
                -20,
                0,
                20,
                40,
                60
              ],
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 0
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "y": {
                    "value": -20
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://prep-admin.carto.com/api/v2/sql?q=SELECT year, avg_hist,avg_rcp45, avg_rcp85, min_hist, min_rcp45, min_rcp85, max_hist, max_rcp45, max_rcp85 FROM precip_graph order by year asc",
              "name": "data",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "hist",
              "source": "data",
              "transform": [
                {
                  "test": "datum.year < 2006",
                  "type": "filter"
                },
                {
                  "expr": "(-(datum.avg_hist)*100)",
                  "type": "formula",
                  "field": "AVG_HIST_perc"
                },
                {
                  "expr": "((datum.min_hist )*100)",
                  "type": "formula",
                  "field": "min_hist"
                },
                {
                  "expr": "((datum.max_hist)*100)",
                  "type": "formula",
                  "field": "max_hist"
                }
              ]
            },
            {
              "name": "rcp45",
              "source": "data",
              "transform": [
                {
                  "test": "datum.year >= 2006",
                  "type": "filter"
                },
                {
                  "expr": "((datum.avg_rcp45 )*100)",
                  "type": "formula",
                  "field": "AVG_RCP45_perc"
                },
                {
                  "expr": "((datum.min_rcp45)*100)",
                  "type": "formula",
                  "field": "min_rcp45"
                },
                {
                  "expr": "((datum.max_rcp45)*100)",
                  "type": "formula",
                  "field": "max_rcp45"
                }
              ]
            },
            {
              "name": "rcp85",
              "source": "data",
              "transform": [
                {
                  "test": "datum.year >= 2006",
                  "type": "filter"
                },
                {
                  "expr": "((datum.avg_rcp85 )*100)",
                  "type": "formula",
                  "field": "AVG_RCP85_perc"
                },
                {
                  "expr": "((datum.min_rcp85 )*100)",
                  "type": "formula",
                  "field": "min_rcp85"
                },
                {
                  "expr": "((datum.max_rcp85 )*100)",
                  "type": "formula",
                  "field": "max_rcp85"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Historical"
                },
                {
                  "cat": "Low emissions (RCP 4.5)"
                },
                {
                  "cat": "High emissions (RCP 4.5)"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "range-modeled",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "hist"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min_hist",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max_hist",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#111"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min_rcp45",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max_rcp45",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#fff000"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min_rcp85",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max_rcp85",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#c34545"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "datalines",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "hist"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "AVG_HIST_perc",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#3b4f63"
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "AVG_RCP45_perc",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#fff000"
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "AVG_RCP85_perc",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#f00"
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "tooltip",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.year}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.yval|number:'.2f'}} ºF"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "scale": "x",
                    "offset": 0,
                    "signal": "indexDate.xval"
                  },
                  "y": {
                    "scale": "y",
                    "offset": 0,
                    "signal": "indexDate.yval"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 60
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "ease": "linear",
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "scale": "x",
                    "signal": "indexDate.xval"
                  },
                  "y": {
                    "scale": "y",
                    "signal": "indexDate.yval"
                  },
                  "size": {
                    "value": 3
                  },
                  "shape": {
                    "value": "cross"
                  },
                  "stroke": {
                    "value": "#000"
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "hist",
                    "field": "year"
                  },
                  {
                    "data": "rcp45",
                    "field": "year"
                  },
                  {
                    "data": "rcp85",
                    "field": "year"
                  }
                ]
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "hist",
                    "field": "min_hist"
                  },
                  {
                    "data": "rcp45",
                    "field": "max_hist"
                  },
                  {
                    "data": "rcp85",
                    "field": "max_rcp85"
                  }
                ]
              },
              "domainMin": -60
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#111",
                "#fff000",
                "#c34545"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "offset": 50,
              "stroke": "color",
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.1,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.01,
                    "field": {
                      "group": "height"
                    },
                    "offset": -20
                  }
                },
                "symbols": {
                  "size": {
                    "value": 10
                  },
                  "shape": {
                    "value": "circle"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 5,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "year": 1950
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xval: +iscale('x', eventX()),yval: +iscale('y', eventY()), year:round(iscale('x', eventX()))}",
                  "type": "@datalines:mouseover"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-05T10:24:38.184Z",
        "updatedAt": "2017-03-21T12:10:00.069Z"
      }
    },
    {
      "id": "6d84d2a8-ddd2-4395-8396-84d238868ba9",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Wettest 5-day Total Precipitation (inches) - Higher Emissions (A2)",
        "dataset": "26570216-acb5-422c-896a-465574f0a552",
        "slug": "projected-change-in-wettest-5-day-total-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Precipitation patterns affect many aspects of life, from agriculture to urban storm drains. These maps show projected changes for the middle of the current century (2041-2070) relative to the end of the last century (1971-2000) across the Midwest under continued emissions (A2 scenario). Maps show increases in the amount of rain falling in the wettest 5-day period over a year, and indicate that heavy precipitation events will increase in intensity in the future across the Midwest. (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-6_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "33100742-3f8d-4e33-8d85-8dbbc8f4ce4f"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:38.996Z",
        "updatedAt": "2017-03-21T12:38:47.234Z"
      }
    },
    {
      "id": "a16ba67f-1ab5-481a-a317-09479c2bbe6a",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Consecutive Dry Days - Higher Emissions (A2)",
        "dataset": "2bb6dcbf-0420-4bf3-b6b5-e38793047b9f",
        "slug": "projected-change-in-consecutive-dry-days-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Precipitation patterns affect many aspects of life, from agriculture to urban storm drains. These maps show projected changes for the middle of the current century (2041-2070) relative to the end of the last century (1971-2000) across the Midwest under continued emissions (A2 scenario). Maps show change in the average maximum number of consecutive days each year with less than 0.01 inches of precipitation. An increase in this variable has been used to indicate an increase in the chance of drought in the future. (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-6_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "32dae14e-03c6-41f9-9bda-4709501b6266"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:39.601Z",
        "updatedAt": "2017-03-21T12:37:21.608Z"
      }
    },
    {
      "id": "fef407c5-746f-4734-9d5d-c2d2ab2e9712",
      "type": "widget",
      "attributes": {
        "name": "State Fragility Index.",
        "dataset": "42de3f98-ba1c-4572-a227-2e18d45239a5",
        "slug": "state-fragility-index-1",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": null,
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T18:26:18.095Z",
        "updatedAt": "2017-02-06T18:26:18.095Z"
      }
    },
    {
      "id": "73f00267-fe34-42aa-a611-13b102f38d75",
      "type": "widget",
      "attributes": {
        "name": "Precipitation change",
        "dataset": "06c44f9a-aae7-401e-874c-de13b7764959",
        "slug": "precipitation-change",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/06c44f9a-aae7-401e-874c-de13b7764959?sql=select annual as x, year as y from index_06c44f9aaae7401e874cde13b7764959%20order%20by%20year%20asc",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "ticks": {
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "labels": {
                  "dy": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "f",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#333"
                  },
                  "strokeWidth": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "strokeOpacity": {
                    "value": 0.1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "steelblue"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 300
                  }
                },
                "majorTicks": {
                  "strokeWidth": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/06c44f9a-aae7-401e-874c-de13b7764959?sql=select annual as y, year as x from index_06c44f9aaae7401e874cde13b7764959%20order%20by%20year%20asc",
              "name": "line",
              "format": {
                "type": "json",
                "parse": {
                  "x": "date"
                },
                "property": "data"
              }
            },
            {
              "name": "stats",
              "source": "line",
              "transform": [
                {
                  "type": "aggregate",
                  "summarize": {
                    "x": [
                      "mean",
                      "variance",
                      "count"
                    ],
                    "y": [
                      "mean"
                    ]
                  }
                }
              ]
            },
            {
              "name": "regression",
              "source": "line",
              "transform": [
                {
                  "type": "cross",
                  "with": "stats"
                },
                {
                  "expr": "(datum.a.x - datum.b.mean_x) * (datum.a.y - datum.b.mean_y) / datum.b.count_x",
                  "type": "formula",
                  "field": "precovariance"
                },
                {
                  "type": "aggregate",
                  "summarize": {
                    "precovariance": [
                      "sum"
                    ]
                  }
                },
                {
                  "expr": "datum.sum_precovariance",
                  "type": "formula",
                  "field": "covariance"
                },
                {
                  "type": "cross",
                  "with": "stats"
                },
                {
                  "expr": "datum.a.covariance / datum.b.variance_x",
                  "type": "formula",
                  "field": "a_factor"
                },
                {
                  "expr": "datum.b.mean_y - datum.a_factor * datum.b.mean_x",
                  "type": "formula",
                  "field": "b_factor"
                },
                {
                  "type": "cross",
                  "with": "line"
                },
                {
                  "expr": "datum.a.a_factor * datum.b.x + datum.a.b_factor",
                  "type": "formula",
                  "field": "y"
                },
                {
                  "expr": "datum.b.x",
                  "type": "formula",
                  "field": "x"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "line",
              "transform": [
                {
                  "type": "cross",
                  "with": "stats"
                },
                {
                  "test": "datum.a.x == utc(currentYear, 0, 1)",
                  "type": "filter"
                },
                {
                  "expr": "datum.a.x > utc(utcyear(datum.b.mean_x), 0, 1) ? tooltip.xRight : tooltip.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "tooltip.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "expr": "datum.a.y",
                  "type": "formula",
                  "field": "y"
                }
              ]
            },
            {
              "name": "axis",
              "values": [
                {
                  "x": "Years",
                  "y": "mm"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "#3e7cd2"
                  },
                  "strokeWidth": {
                    "value": 3
                  }
                }
              }
            },
            {
              "from": {
                "data": "stats"
              },
              "type": "rule",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "field": "mean_y",
                    "scale": "y"
                  },
                  "x2": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "stroke": {
                    "value": "#000"
                  },
                  "strokeWidth": {
                    "value": 2
                  },
                  "strokeOpacity": {
                    "value": 0.5
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": 0,
                  "dx": {
                    "value": -25
                  },
                  "dy": {
                    "value": -10
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.y | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": 0,
                  "y": {
                    "mult": 1,
                    "field": {
                      "group": "height"
                    }
                  },
                  "dx": {
                    "value": 470
                  },
                  "dy": {
                    "value": 22
                  },
                  "fill": {
                    "value": "#3B4F63"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "text": {
                    "template": "{{datum.x | upper}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "opacity": {
                    "value": 0.5
                  },
                  "fontSize": {
                    "value": 10
                  },
                  "fontWeight": {
                    "value": 700
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip",
                "transform": [
                  {
                    "type": "cross",
                    "with": "axis"
                  },
                  {
                    "expr": "datum.b.y",
                    "type": "formula",
                    "field": "yUnit"
                  },
                  {
                    "expr": "datum.a.xTooltip",
                    "type": "formula",
                    "field": "xTooltip"
                  },
                  {
                    "expr": "datum.a.y",
                    "type": "formula",
                    "field": "y"
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{currentYear}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{parent.y|number:'.2f'}} {{parent.yUnit}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y",
                    "offset": -55
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 150
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "xData",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "stroke": {
                    "value": "#c34545"
                  },
                  "fontSize": {
                    "value": 12
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "time",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "line",
                    "field": "x"
                  }
                ]
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "line",
                    "field": "y"
                  }
                ]
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 28,
            "right": 5,
            "bottom": 30
          },
          "signals": [
            {
              "init": "0",
              "name": "currentYear",
              "streams": [
                {
                  "expr": "utcyear(iscale('x', eventX()))",
                  "type": "mousemove"
                }
              ]
            },
            {
              "init": {
                "x": 0,
                "y": 0
              },
              "name": "tooltip",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX()), xRight: +iscale('x', eventX() - 150)}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-03T16:17:06.863Z",
        "updatedAt": "2017-03-21T16:07:57.631Z"
      }
    },
    {
      "id": "f4fa1fba-e588-476d-a9c0-5100d071a1c7",
      "type": "widget",
      "attributes": {
        "name": "Sustainable Development Goals Indicators Tracker (World Bank)",
        "dataset": "9a74e4c4-33b5-46d8-90d0-ea0615b1620f",
        "slug": "sustainable-development-goals-indicators-tracker-world-bank",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/9a74e4c4-33b5-46d8-90d0-ea0615b1620f?sql=select * from table",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.cartodb.com/api/v2/sql?q=WITH a AS ( SELECT * FROM sdg_data WHERE country_name = 'World' AND indicator_name='Aquaculture production (metric tons)') SELECT indicator_code, indicator_name, unnest(array[ '1990', '1991','1992', '1993', '1994', '1995','1996', '1997','1998', '1999', '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014']) AS x, unnest(array[ y_1990, y_1991, y_1992, y_1993, y_1994, y_1995, y_1996, y_1997, y_1998, y_1999, y_2000, y_2001, y_2002, y_2003, y_2004, y_2005, y_2006, y_2007, y_2008, y_2009, y_2010, y_2011, y_2012, y_2013, y_2014]) AS y FROM a order by x",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-13T16:53:34.237Z",
        "updatedAt": "2017-04-06T10:16:31.551Z"
      }
    },
    {
      "id": "18c71403-598b-492b-a1d8-681df4227ebc",
      "type": "widget",
      "attributes": {
        "name": "Average Annual Temperature - Historical Climate",
        "dataset": "3fd545ce-1ce4-42b6-b503-21ec01e1bd93",
        "slug": "temperature-distribution-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The region has a distinct north-south gradient in average temperature patterns (left), with a hotter south and colder north. For precipitation (right), the regional gradient runs west-east, with a wetter east and a much drier west. Averages shown here are for the period 1981-2010. (Figure source: adapted from Kunkel et al. 2013).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-1_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "a1cdb449-8d5a-493f-b110-b787548e5c97"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:40.233Z",
        "updatedAt": "2017-03-21T12:34:52.372Z"
      }
    },
    {
      "id": "d30d3c55-fbf1-4510-b4cb-af65da40f915",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Heavy Precipitation Days - Lower Emissions (B1)",
        "dataset": "48e1ff23-9d22-4b4d-a6fb-f29d76ab5855",
        "slug": "projected-change-in-number-of-heavy-precipitation-days-lower-emissions-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of days with the heaviest precipitation is not projected to change dramatically. The historical (1971-2000) distribution of the greatest 2% of daily precipitation (Top: about seven days each year) echoes the regional east-west gradient in average precipitation. By mid-century (2041-2070), the projected change in days exceeding those precipitation amounts remains greatest in the northern area for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-4_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "4f0f8ec8-7342-4167-903e-1b9d60ba3f20"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:40.531Z",
        "updatedAt": "2017-03-21T12:34:15.460Z"
      }
    },
    {
      "id": "acfd71bb-c331-4651-99c6-6230ea01bc8a",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Heavy Precipitation Days - Higher Emissions (A2)",
        "dataset": "2a4382d0-026c-484e-b0a3-f02d1c207070",
        "slug": "projected-change-in-number-of-heavy-precipitation-days-higher-emissions-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of days with the heaviest precipitation is not projected to change dramatically. The historical (1971-2000) distribution of the greatest 2% of daily precipitation (Top: about seven days each year) echoes the regional east-west gradient in average precipitation. By mid-century (2041-2070), the projected change in days exceeding those precipitation amounts remains greatest in the northern area for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-4_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "0a677609-e488-409d-9edd-9109155707ae"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:39.295Z",
        "updatedAt": "2017-03-21T12:38:02.972Z"
      }
    },
    {
      "id": "90e92159-81ac-446b-abd5-e17d7c389519",
      "type": "widget",
      "attributes": {
        "name": "Average Annual Precipitation (inches) - Historical Climate",
        "dataset": "0c4d8351-edf5-47eb-bbbd-a302eda84412",
        "slug": "precipitation-distribution-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The region has a distinct north-south gradient in average temperature patterns (left), with a hotter south and colder north. For precipitation (right), the regional gradient runs west-east, with a wetter east and a much drier west. Averages shown here are for the period 1981-2010. (Figure source: adapted from Kunkel et al. 2013).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-1_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "4cd4a9c3-a292-45e5-b5b2-1458b9a4774f"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:38.370Z",
        "updatedAt": "2017-03-21T12:42:40.965Z"
      }
    },
    {
      "id": "ea0ecd72-41f4-4ced-965c-c95204174048",
      "type": "widget",
      "attributes": {
        "name": "Total CO2 emissions by years",
        "dataset": "11de2bc1-368b-42ed-a207-aaff8ece752b",
        "slug": "total-co2-emissions-by-year",
        "userId": "5858f37140621f11066fb2f7",
        "description": "This dateset shows the total CO2 emission per country for the years 1990-2011.",
        "source": "CAIT",
        "sourceUrl": "",
        "authors": "CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/11de2bc1-368b-42ed-a207-aaff8ece752b?sql=select * FROM cait_2_0_country_ghg_emissions_filtered order by total asc",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=select total as y, 1 as group, to_number(to_char(year, 'yyyy'), '9999') as x FROM cait_2_0_country_ghg_emissions_filtered",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "name": "Line vizzualitation",
          "marks": [
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "group"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x",
                        "scale": "x"
                      },
                      "y": {
                        "field": "y",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "group",
                        "scale": "group"
                      },
                      "strokeWidth": {
                        "value": 2
                      }
                    }
                  }
                }
              ]
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "group",
              "type": "ordinal",
              "range": "colorRange1",
              "domain": {
                "data": "table",
                "field": "group"
              }
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-05-24T12:10:58.212Z",
        "updatedAt": "2017-04-18T14:53:03.130Z"
      }
    },
    {
      "id": "11e41fa5-080c-4468-bbff-d7e0b7e000f2",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Average Precipitation (inches) - Higher Emissions (A2)",
        "dataset": "d443beca-d199-4872-9d7d-d82c45e43151",
        "slug": "projected-change-in-average-precipitation-between-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Precipitation patterns affect many aspects of life, from agriculture to urban storm drains. These maps show projected changes for the middle of the current century (2041-2070) relative to the end of the last century (1971-2000) across the Midwest under continued emissions (A2 scenario). Maps show the changes in total annual average precipitation. Across the entire Midwest, the total amount of water from rainfall and snowfall is projected to increase. (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-6_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "0b021478-f4d3-4a1e-ae88-ab97f0085bc9"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:43.738Z",
        "updatedAt": "2017-03-21T12:24:55.407Z"
      }
    },
    {
      "id": "e41b9fb2-e3e7-4f0e-9fbe-738cd5ee9204",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Warm Nights - Lower Emissions (B1)",
        "dataset": "ccc113e6-fee1-472f-a815-114123489eb4",
        "slug": "projected-change-in-number-of-warm-nights-lower-emissions-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of nights with the warmest temperatures is projected to increase dramatically. The historical (1971-2000) distribution of temperature for the warmest 2% of nights (Top: about seven days each year) echoes the distinct north-south gradient in average temperatures. By mid-century (2041-2070), the projected change in number of nights exceeding those warmest temperatures is greatest in the south for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-3_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "e82c6136-7f7e-4980-80b7-b6482605306f"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:43.101Z",
        "updatedAt": "2017-03-21T12:26:17.329Z"
      }
    },
    {
      "id": "45430086-5ada-4404-922f-4f072b158420",
      "type": "widget",
      "attributes": {
        "name": "Projected Number of Days Over 95º - Higher Emissions (A2)",
        "dataset": "af6798f6-4dea-470f-875c-0ec497450368",
        "slug": "projected-number-of-days-over-95-2041-2070-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected average number of days per year with maximum temperatures above 95ÁF for 2041-2070 compared to 1971-2000, assuming emissions continue to grow (A2 scenario). Patterns are similar, but less pronounced, assuming a reduced emissions scenario (B1). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_17-4_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "382c9047-eed3-49e5-9d7f-d34461eb838d"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:42.799Z",
        "updatedAt": "2017-03-21T12:27:52.170Z"
      }
    },
    {
      "id": "e7ece9fc-6de2-494d-811c-90ab4ca52b39",
      "type": "widget",
      "attributes": {
        "name": "Projected Difference in Number of Heavy Precipitation Days - Higher Emissions (A2)",
        "dataset": "7f042ee4-2aed-4c2d-9313-908738b39174",
        "slug": "projected-change-in-heavy-precipitation-between-u-s",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Precipitation patterns affect many aspects of life, from agriculture to urban storm drains. These maps show projected changes for the middle of the current century (2041-2070) relative to the end of the last century (1971-2000) across the Midwest under continued emissions (A2 scenario). Maps show increase in the number of days with very heavy precipitation (top 2% of all rainfalls each year). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-6_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "d91702cf-882e-46cb-959f-c212b74cb643"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:42.144Z",
        "updatedAt": "2017-03-21T12:30:28.316Z"
      }
    },
    {
      "id": "62a47758-15ba-4b10-868a-e2bbc8ca60a5",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Hot Days - Higher Emissions (A2)",
        "dataset": "f9d9637d-9a40-47a1-b3b0-ab89483225de",
        "slug": "projected-change-in-number-of-hot-days-higher-emissions-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of days with the hottest temperatures is projected to increase dramatically. The historical (1971-2000) distribution of temperature for the hottest 2% of days (about seven days each year) echoes the distinct north-south gradient in average temperatures. However, by mid-century (2041-2070), the projected change in number of days exceeding those hottest temperatures is greatest in the western areas and Gulf Coast for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "f19ff006-f3e0-4b70-aa1e-9da602a86a34"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:49:49.317Z",
        "updatedAt": "2017-03-21T12:22:29.481Z"
      }
    },
    {
      "id": "b568e47c-cc4b-49a7-a260-c993a2feeffc",
      "type": "widget",
      "attributes": {
        "name": "Hottest 2% of Days - Historical Climate",
        "dataset": "5fad614d-ec7f-416b-b3a2-24258c969549",
        "slug": "historical-temperature-distribution-of-hot-days-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of days with the hottest temperatures is projected to increase dramatically. The historical (1971-2000) distribution of temperature for the hottest 2% of days (about seven days each year) echoes the distinct north-south gradient in average temperatures. However, by mid-century (2041-2070), the projected change in number of days exceeding those hottest temperatures is greatest in the western areas and Gulf Coast for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "abac7e4a-aa60-4fbb-be9d-1d9830313ded"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:41.520Z",
        "updatedAt": "2017-03-21T12:31:51.122Z"
      }
    },
    {
      "id": "b4d051a5-83eb-4dec-82a1-b21de01f693f",
      "type": "widget",
      "attributes": {
        "name": "Projected increases in maximum monthly summer air temperature (ºF) ",
        "dataset": "d6472fd7-9fb1-4af4-8267-a6bc2220e76a",
        "slug": "projected-increases-in-maximum-monthly-summer-air-temperature-f",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected change in 30-year maximum monthly summer air temperature in ºF represented by 2 thresholds, maximum monthly summer temperatures exceeding 85°F in yellow, and exceeding 90°F in red.",
        "source": "",
        "sourceUrl": null,
        "authors": "L.E. Flint and A.L. Flint, 2014, California Basin Characterization Model: A Dataset of Historical and Future Hydrologic Response to Climate Change, U.S. Geological Survey Data Release, doi:10.5066/F76T0JPB",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/d6472fd7-9fb1-4af4-8267-a6bc2220e76a?sql=select * from tmx1951_1980_ave_hst",
        "widgetConfig": {
          "url": "https://resource-watch.github.io/insights/sonoma-maps/summer-air-temperature.html",
          "type": "embed"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-20T14:59:35.557Z",
        "updatedAt": "2017-03-21T12:58:45.338Z"
      }
    },
    {
      "id": "667d3061-8fe5-49d0-a9ce-60684d06f3ab",
      "type": "widget",
      "attributes": {
        "name": "Projected increases in minimum monthly winter air temperature (ºF)",
        "dataset": "83e983f3-9d21-4abd-b4af-6dbfff8e60bc",
        "slug": "projected-increases-in-minimum-monthly-winter-air-temperature-f",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected change in 30-year minimum monthly winter air temperature in ºF represented by 2 thresholds, maximum monthly summer temperatures exceeding 39°F in yellow, and exceeding 43°F in red.",
        "source": "",
        "sourceUrl": null,
        "authors": "L.E. Flint and A.L. Flint, 2014, California Basin Characterization Model: A Dataset of Historical and Future Hydrologic Response to Climate Change, U.S. Geological Survey Data Release, doi:10.5066/F76T0JPB",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "url": "https://resource-watch.github.io/insights/sonoma-maps/winter-air-temperature.html",
          "type": "embed"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-20T15:20:59.169Z",
        "updatedAt": "2017-03-21T12:16:39.618Z"
      }
    },
    {
      "id": "c5e4571d-5a20-459d-b3ec-a9ef96753ec0",
      "type": "widget",
      "attributes": {
        "name": "Heaviest 2% of Daily Precipitation - Historical Climate",
        "dataset": "f15b7b21-4aa5-49ad-b1c1-ae0074fcef54",
        "slug": "historical-distribution-of-heavy-precipitation-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of days with the heaviest precipitation is not projected to change dramatically. The historical (1971-2000) distribution of the greatest 2% of daily precipitation (Top: about seven days each year) echoes the regional east-west gradient in average precipitation. By mid-century (2041-2070), the projected change in days exceeding those precipitation amounts remains greatest in the northern area for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-4_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "63decdad-7a38-4afd-a33e-dbece1377c18"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:49:49.030Z",
        "updatedAt": "2017-03-21T12:23:40.021Z"
      }
    },
    {
      "id": "8abc3cd9-1686-4864-9e4a-50159d2b4e2c",
      "type": "widget",
      "attributes": {
        "name": "Greatest GDP per capita in 2015",
        "dataset": "995c82b4-6fd0-44de-b21c-20fdce9738d9",
        "slug": "greatest-gdp-per-capita-in-2015",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/995c82b4-6fd0-44de-b21c-20fdce9738d9?sql=SELECT _2015_yr2015 as total,  country_code as iso3, country_name as country, rank() over (order by _2015_yr2015 desc) as rank FROM gdp_per_capita where _2015_yr2015 is not null",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT _2015_yr2015 as y, country_name as x FROM gdp_per_capita where _2015_yr2015 is not null ORDER BY _2015_yr2015 desc LIMIT 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T16:43:41.411Z",
        "updatedAt": "2017-04-06T08:08:27.306Z"
      }
    },
    {
      "id": "94e850ea-34d7-49d6-90dd-01fd17350820",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Cooling Degree Days - Higher Emissions (A2)",
        "dataset": "e5464f35-e839-4585-a4e3-d55b58afe8a5",
        "slug": "projeced-change-in-cooling-degree-days-u-s-midwest",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected increase in annual average temperatures by mid-century (2041-2070) as compared to the 1971-2000 period tell only part of the climate change story. Maps also show annual projected increases in the number of the hottest days (days over 95ÁF), longer frost-free seasons, and an increase in cooling degree days, defined as the number of degrees that a dayÍs average temperature is above 65ÁF, which generally leads to an increase in energy use for air conditioning. Projections are from global climate models that assume emissions of heat-trapping gases continue to rise (A2 scenario). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "b3b59061-e69e-42f7-ac88-fe2d500d2a2b"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:44.656Z",
        "updatedAt": "2017-03-21T12:24:12.404Z"
      }
    },
    {
      "id": "eb14a35e-50bc-44c0-88fd-199324550468",
      "type": "widget",
      "attributes": {
        "name": "Production, Food Demand and Net Trade",
        "dataset": "25b0ab35-0865-42f8-9b02-24870d0c4e82",
        "slug": "production-food-demand-and-net-trade",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/25b0ab35-0865-42f8-9b02-24870d0c4e82?sql=select * from combined01_prepared",
        "widgetConfig": {
          "axes": [
            {
              "grid": true,
              "type": "y",
              "scale": "yscale",
              "tick_size": 100,
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#eeeeee"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.data|left:1|upper}}{{datum.data|slice:1|truncate:12}}"
                  },
                  "type": {
                    "value": "axis"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "font_size": {
                    "value": 14
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 2
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "x",
              "scale": "xscale",
              "ticks": 7,
              "tick_size": 0,
              "properties": {
                "grid": {
                  "layer": "front"
                },
                "labels": {
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.data | number:'.3s'}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "font_size": {
                    "value": 12
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q= SELECT impactparameter AS name, sum(value) AS y FROM combined01_prepared WHERE impactparameter in ('Food Demand', 'Production', 'Net trade') and scenario = 'SSP2-MIRO' {{and}} group by impactparameter",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "impact",
              "values": [
                {
                  "name": "Production"
                },
                {
                  "name": "Food Demand"
                },
                {
                  "name": "Net trade"
                }
              ]
            }
          ],
          "name": "Net Trade",
          "marks": [
            {
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "table",
                    "transform": [
                      {
                        "expr": "format('.3s',datum.y)",
                        "type": "formula",
                        "field": "val"
                      }
                    ]
                  },
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "y",
                        "scale": "xscale"
                      },
                      "y": {
                        "field": "name",
                        "scale": "yscale",
                        "offset": 13
                      },
                      "x2": {
                        "scale": "xscale",
                        "value": 0
                      },
                      "fill": {
                        "field": "name",
                        "scale": "color"
                      },
                      "width": {
                        "band": true,
                        "field": "y"
                      },
                      "height": {
                        "band": true,
                        "value": 20
                      }
                    }
                  }
                },
                {
                  "from": {
                    "mark": "bars"
                  },
                  "type": "text",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x2",
                        "offset": 5
                      },
                      "y": {
                        "field": "y"
                      },
                      "dy": {
                        "mult": 0.55,
                        "field": "height"
                      },
                      "fill": {
                        "value": "#758290"
                      },
                      "text": {
                        "field": "datum.val"
                      },
                      "align": {
                        "value": "left"
                      },
                      "baseline": {
                        "value": "middle"
                      },
                      "font_size": {
                        "value": 12
                      }
                    }
                  },
                  "interactive": false
                }
              ]
            }
          ],
          "width": 450,
          "height": 200,
          "scales": [
            {
              "name": "yscale",
              "type": "ordinal",
              "range": "height",
              "domain": {
                "data": "impact",
                "field": "name"
              }
            },
            {
              "name": "xscale",
              "nice": true,
              "type": "linear",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "data": "table",
                "field": "name"
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 115,
            "right": 45,
            "bottom": 30
          },
          "dictionary": "food",
          "sql_config": [
            {
              "key": "and",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                },
                {
                  "key": "iso",
                  "required": true
                },
                {
                  "key": "commodity",
                  "required": true
                }
              ]
            }
          ],
          "params_config": [],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "name",
                    "label": "Impact"
                  },
                  {
                    "key": "y",
                    "label": "Value",
                    "format": ".3s"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-01T11:29:47.676Z",
        "updatedAt": "2017-05-16T10:11:44.604Z"
      }
    },
    {
      "id": "e2778762-4b3d-498c-8b4a-869ac834f406",
      "type": "widget",
      "attributes": {
        "name": "Water risk",
        "dataset": "dbd97231-5330-4910-b3a2-fa9e7dbac598",
        "slug": "water-risk",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/dbd97231-5330-4910-b3a2-fa9e7dbac598?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "axes": [
            {
              "grid": false,
              "type": "x",
              "layer": "back",
              "scale": "x",
              "ticks": 7,
              "title": "Years",
              "orient": "top",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  },
                  "stroke_width": {
                    "value": 1.5
                  }
                },
                "title": {
                  "fill": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": "{{datum.data}}%"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "scale": "y",
              "ticks": 6,
              "properties": {
                "labels": {
                  "x": {
                    "offset": -25
                  },
                  "text": {
                    "template": "{{datum.data}}%"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with sd as (SELECT crops_countries_stats.*, {{water_column}} as risk FROM crops_countries_stats inner join crops_stats on crops_countries_stats.crop=crops_stats.crop where iso = '{{iso}}'), t as (select sum(area) as area, risk, crop from sd group by  risk, crop order by risk asc), r as (SELECT sum(value) as value, commodity FROM combined01_prepared where iso='{{iso}}' and year='{{year}}' and impactparameter='Food Demand' group by commodity ), d as ( select (value*100/(sum(value) over())) as value, commodity from r ) select crop, risk, value, ((area*100)/sum(area) over(partition by crop)) area_perc from d inner join t on lower(commodity)=crop order by risk asc, crop asc",
              "name": "hist",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "stats_risk",
              "source": "hist",
              "transform": [
                {
                  "type": "stack",
                  "field": "area_perc",
                  "offset": "zero",
                  "output": {
                    "end": "val_e",
                    "mid": "val_m",
                    "start": "val_s"
                  },
                  "groupby": [
                    "crop"
                  ]
                },
                {
                  "type": "stack",
                  "field": "value",
                  "offset": "zero",
                  "output": {
                    "end": "t_e",
                    "mid": "t_m",
                    "start": "t_s"
                  },
                  "groupby": [
                    "risk"
                  ]
                }
              ]
            },
            {
              "name": "legend_crop",
              "source": "stats_risk",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "crop"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "t_m"
                      ],
                      "ops": [
                        "max"
                      ],
                      "field": "t_m"
                    },
                    {
                      "as": [
                        "t_e"
                      ],
                      "ops": [
                        "max"
                      ],
                      "field": "t_e"
                    }
                  ]
                },
                {
                  "by": "t_m",
                  "type": "sort"
                }
              ]
            },
            {
              "name": "legend_risk",
              "values": [
                {
                  "risk": "1.No Data"
                },
                {
                  "risk": "2.Low"
                },
                {
                  "risk": "3.Mid-low"
                },
                {
                  "risk": "4.Mid-High"
                },
                {
                  "risk": "5.High"
                },
                {
                  "risk": "6.Extremely high"
                }
              ]
            },
            {
              "name": "separate_line",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 680,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "legend_crop"
              },
              "name": "label",
              "type": "text",
              "properties": {
                "update": {
                  "x": {
                    "field": "t_m",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "value": 0,
                    "offset": 18
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.crop | slice:0,1 |upper}}{{datum.crop | slice:1,100, datum.crop}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "angle": {
                    "value": 0
                  },
                  "font_size": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "stats_risk"
              },
              "name": "columns",
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "t_s",
                    "scale": "x"
                  },
                  "y": {
                    "field": "val_s",
                    "scale": "y"
                  },
                  "x2": {
                    "field": "t_e",
                    "scale": "x"
                  },
                  "y2": {
                    "field": "val_e",
                    "scale": "y"
                  },
                  "fill": [
                    {
                      "test": "datum.risk",
                      "field": "risk",
                      "scale": "color"
                    },
                    {
                      "value": "grey"
                    }
                  ],
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              }
            },
            {
              "from": {
                "data": "separate_line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "offset": -120
                  },
                  "y": {
                    "field": "y",
                    "offset": 260
                  },
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              }
            }
          ],
          "height": 220,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "stats_risk",
                    "field": "t_e"
                  }
                ]
              }
            },
            {
              "name": "xl",
              "type": "linear",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "legend_crop",
                    "field": "crop"
                  }
                ]
              }
            },
            {
              "name": "x_label",
              "type": "ordinal",
              "range": {
                "fields": [
                  {
                    "data": "legend_crop",
                    "field": "crop"
                  }
                ]
              },
              "domain": {
                "fields": [
                  {
                    "data": "legend_crop",
                    "field": "t_m"
                  }
                ]
              },
              "points": false
            },
            {
              "name": "y",
              "type": "linear",
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "stats_risk",
                    "field": "val_e"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "riskColor",
              "domain": {
                "data": "legend_risk",
                "field": "risk"
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": [
                0,
                90,
                160,
                0,
                90,
                160
              ],
              "domain": {
                "data": "legend_risk",
                "field": "risk"
              }
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -345,
                -345,
                -345,
                -320,
                -320,
                -320
              ],
              "domain": {
                "data": "legend_risk",
                "field": "risk"
              }
            }
          ],
          "legends": [
            {
              "fill": "color",
              "properties": {
                "labels": {
                  "x": {
                    "scale": "legend-series-x",
                    "offset": 10
                  },
                  "y": {
                    "scale": "legend-series-y"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.05,
                    "field": {
                      "group": "width"
                    },
                    "offset": -58
                  },
                  "y": {
                    "mult": 1.1,
                    "field": {
                      "group": "height"
                    },
                    "offset": 394
                  }
                },
                "symbols": {
                  "x": {
                    "scale": "legend-series-x"
                  },
                  "y": {
                    "scale": "legend-series-y",
                    "offset": -5
                  },
                  "size": {
                    "value": 100
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 40,
            "left": 70,
            "right": 30,
            "bottom": 120
          },
          "sql_config": [],
          "params_config": [
            {
              "key": "water_column",
              "sufix": "l",
              "required": true
            },
            {
              "key": "year",
              "required": true
            },
            {
              "key": "iso",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "crop",
                    "label": "Crop"
                  },
                  {
                    "key": "value",
                    "label": "Crop percentage",
                    "format": ".2f",
                    "suffix": "%"
                  },
                  {
                    "key": "risk",
                    "label": "Risk"
                  },
                  {
                    "key": "area_perc",
                    "label": "Risk percentage",
                    "format": ".2f",
                    "suffix": "%"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-20T16:08:33.474Z",
        "updatedAt": "2017-03-30T17:41:47.796Z"
      }
    },
    {
      "id": "7b29a2a5-515a-4e22-846f-03ad3d2c0a13",
      "type": "widget",
      "attributes": {
        "name": "Water stress on food production",
        "dataset": "5be16fea-5b1a-4daf-a9e9-9dc1f6ea6d4e",
        "slug": "widget-default",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/5be16fea-5b1a-4daf-a9e9-9dc1f6ea6d4e?sql=select * from crops limit 100",
        "widgetConfig": {
          "axes": [
            {
              "grid": false,
              "type": "x",
              "scale": "x",
              "ticks": 7,
              "title": "Years",
              "orient": "top",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "title": {
                  "fill": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": "{{datum.data}}%"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "scale": "y",
              "ticks": 6,
              "properties": {
                "labels": {
                  "x": {
                    "offset": -25
                  },
                  "text": {
                    "template": "{{datum.data}}%"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with t as (select sum(area) as area, {{water_column}} as risk, crop from crops_stats group by {{water_column}}, crop order by risk asc), r as (SELECT sum(value) as value, commodity FROM combined01_prepared where year='{{year}}' and impactparameter='Food Demand' group by commodity ), d as ( select (value*100/(sum(value) over())) as value, commodity from r ) select crop, risk,value, (area*100/sum(area) over(partition by crop)) area_perc from d inner join t on lower(commodity)=crop order by risk asc, crop asc",
              "name": "hist",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "stats_risk",
              "source": "hist",
              "transform": [
                {
                  "type": "stack",
                  "field": "area_perc",
                  "offset": "zero",
                  "output": {
                    "end": "val_e",
                    "mid": "val_m",
                    "start": "val_s"
                  },
                  "groupby": [
                    "crop"
                  ]
                },
                {
                  "type": "stack",
                  "field": "value",
                  "offset": "zero",
                  "output": {
                    "end": "t_e",
                    "mid": "t_m",
                    "start": "t_s"
                  },
                  "groupby": [
                    "risk"
                  ]
                }
              ]
            },
            {
              "name": "legend_crop",
              "source": "stats_risk",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "crop"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "t_m"
                      ],
                      "ops": [
                        "max"
                      ],
                      "field": "t_m"
                    },
                    {
                      "as": [
                        "t_e"
                      ],
                      "ops": [
                        "max"
                      ],
                      "field": "t_e"
                    }
                  ]
                },
                {
                  "by": "t_m",
                  "type": "sort"
                }
              ]
            },
            {
              "name": "legend_risk",
              "values": [
                {
                  "risk": "1.No Data"
                },
                {
                  "risk": "2.Low"
                },
                {
                  "risk": "3.Mid-low"
                },
                {
                  "risk": "4.Mid-High"
                },
                {
                  "risk": "5.High"
                },
                {
                  "risk": "6.Extremely high"
                }
              ]
            },
            {
              "name": "separate_line",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 680,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "legend_crop"
              },
              "name": "label",
              "type": "text",
              "properties": {
                "update": {
                  "x": {
                    "field": "t_m",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "value": 0,
                    "offset": 18
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.crop | slice:0,1 |upper}}{{datum.crop | slice:1,100, datum.crop}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "angle": {
                    "value": 0
                  },
                  "font_size": {
                    "value": 12
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "stats_risk"
              },
              "name": "columns",
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "t_s",
                    "scale": "x"
                  },
                  "y": {
                    "field": "val_s",
                    "scale": "y"
                  },
                  "x2": {
                    "field": "t_e",
                    "scale": "x"
                  },
                  "y2": {
                    "field": "val_e",
                    "scale": "y"
                  },
                  "fill": [
                    {
                      "test": "datum.risk",
                      "field": "risk",
                      "scale": "color"
                    },
                    {
                      "value": "grey"
                    }
                  ],
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              }
            },
            {
              "from": {
                "data": "separate_line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "offset": -120
                  },
                  "y": {
                    "field": "y",
                    "offset": 260
                  },
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              },
              "interactive": false
            }
          ],
          "height": 220,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "stats_risk",
                    "field": "t_e"
                  }
                ]
              }
            },
            {
              "name": "xl",
              "type": "linear",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "legend_crop",
                    "field": "crop"
                  }
                ]
              }
            },
            {
              "name": "x_label",
              "type": "ordinal",
              "range": {
                "fields": [
                  {
                    "data": "legend_crop",
                    "field": "crop"
                  }
                ]
              },
              "domain": {
                "fields": [
                  {
                    "data": "legend_crop",
                    "field": "t_m"
                  }
                ]
              },
              "points": false
            },
            {
              "name": "y",
              "type": "linear",
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "stats_risk",
                    "field": "val_e"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "riskColor",
              "domain": {
                "data": "legend_risk",
                "field": "risk"
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": [
                0,
                90,
                160,
                0,
                90,
                160
              ],
              "domain": {
                "data": "legend_risk",
                "field": "risk"
              }
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -345,
                -345,
                -345,
                -320,
                -320,
                -320
              ],
              "domain": {
                "data": "legend_risk",
                "field": "risk"
              }
            }
          ],
          "legends": [
            {
              "fill": "color",
              "properties": {
                "labels": {
                  "x": {
                    "scale": "legend-series-x",
                    "offset": 10
                  },
                  "y": {
                    "scale": "legend-series-y"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.05,
                    "field": {
                      "group": "width"
                    },
                    "offset": -58
                  },
                  "y": {
                    "mult": 1.1,
                    "field": {
                      "group": "height"
                    },
                    "offset": 394
                  }
                },
                "symbols": {
                  "x": {
                    "scale": "legend-series-x"
                  },
                  "y": {
                    "scale": "legend-series-y",
                    "offset": -5
                  },
                  "size": {
                    "value": 100
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 40,
            "left": 70,
            "right": 30,
            "bottom": 120
          },
          "sql_config": [],
          "params_config": [
            {
              "key": "water_column",
              "sufix": "l",
              "required": true
            },
            {
              "key": "year",
              "required": true
            },
            {
              "key": "iso",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "crop",
                    "label": "Crop"
                  },
                  {
                    "key": "value",
                    "label": "Crop percentage",
                    "format": ".2f",
                    "suffix": "%"
                  },
                  {
                    "key": "risk",
                    "label": "Risk"
                  },
                  {
                    "key": "area_perc",
                    "label": "Risk percentage",
                    "format": ".2f",
                    "suffix": "%"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-15T15:02:37.619Z",
        "updatedAt": "2017-03-30T16:49:40.258Z"
      }
    },
    {
      "id": "fb80535d-b829-47c0-a71a-161b2a15ee98",
      "type": "widget",
      "attributes": {
        "name": "Summary table, total crops production area",
        "dataset": "5725b51a-f966-46f9-ac53-7e25fe052c00",
        "slug": "summary-table-total-crops-production-area",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/5725b51a-f966-46f9-ac53-7e25fe052c00?sql=select * from combined01_prepared limit 100",
        "widgetConfig": {
          "axes": [
            {
              "type": "y",
              "scale": "cat",
              "tick_size": 80,
              "properties": {
                "labels": {
                  "text": {
                    "template": "{{datum.data | slice:0,1 | upper}}{{datum.data | slice:1,100, datum.crop}}"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              }
            },
            {
              "type": "x",
              "scale": "val",
              "ticks": 5,
              "properties": {
                "labels": {
                  "text": {
                    "template": "{{datum.data | number:'.2s'}}"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q= with r as (SELECT sum(area*{{water_column}}/crop_total_area) as risk, crop, irrigation FROM crops_stats  group by crop, irrigation), s as (SELECT commodity, irrigation, sum(value) area FROM combined01_prepared where impactparameter='Area' and year={{year}} and scenario='SSP2-GFDL' group by irrigation, commodity), d as (select r.*, s.area from r join  s on  r.crop=lower(s.commodity) and r.irrigation=s.irrigation) select area, crop, irrigation, risk, CASE WHEN risk=0 THEN 'No data' WHEN risk>0.8 THEN 'Extremely high' WHEN risk >0.4 THEN 'High' WHEN risk >0.2 THEN 'Medium-high' WHEN risk >0.1 THEN 'Low' ELSE 'lower' END  as t from d",
              "name": "tabls",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "legend",
              "source": "tabls",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "t"
                  ],
                  "summarize": [
                    {
                      "ops": [
                        "sum"
                      ],
                      "field": "area"
                    }
                  ]
                }
              ]
            },
            {
              "name": "separate_line",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 680,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "tabls",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "crop"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "from": {
                    "transform": [
                      {
                        "expr": "slice(upper(datum.irrigation), 0,1) + slice(datum.irrigation, 1)",
                        "type": "formula",
                        "field": "capitalize"
                      }
                    ]
                  },
                  "name": "bars",
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "area",
                        "scale": "val"
                      },
                      "y": {
                        "field": "irrigation",
                        "scale": "pos",
                        "offset": 0
                      },
                      "x2": {
                        "scale": "val",
                        "value": 0
                      },
                      "fill": {
                        "field": "t",
                        "scale": "color"
                      },
                      "height": {
                        "band": true,
                        "scale": "pos"
                      },
                      "stroke": {
                        "value": "#fff"
                      },
                      "padding": 5,
                      "stroke_width": {
                        "value": 2
                      }
                    },
                    "update": {
                      "fill_opacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "mark": "bars"
                  },
                  "type": "text",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x2",
                        "offset": 5
                      },
                      "y": {
                        "field": "y"
                      },
                      "dy": {
                        "mult": 0.55,
                        "field": "height"
                      },
                      "fill": {
                        "value": "#758290"
                      },
                      "text": {
                        "field": "datum.capitalize"
                      },
                      "align": {
                        "value": "left"
                      },
                      "baseline": {
                        "value": "middle"
                      },
                      "font_size": {
                        "value": 12
                      }
                    }
                  },
                  "interactive": false
                }
              ],
              "scales": [
                {
                  "name": "pos",
                  "type": "ordinal",
                  "range": "height",
                  "domain": {
                    "field": "irrigation"
                  }
                }
              ],
              "properties": {
                "enter": {
                  "y": {
                    "field": "key",
                    "scale": "cat"
                  },
                  "height": {
                    "band": true,
                    "scale": "cat"
                  }
                },
                "hover": {
                  "text_fill": {
                    "value": "#758290"
                  }
                }
              }
            },
            {
              "from": {
                "data": "separate_line"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "offset": -120
                  },
                  "y": {
                    "field": "y",
                    "offset": 235
                  },
                  "stroke": {
                    "value": "#eee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                }
              },
              "interactive": false
            }
          ],
          "width": 480,
          "height": 200,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "separate_line",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "separate_line",
                "field": "y"
              }
            },
            {
              "name": "cat",
              "type": "ordinal",
              "range": "height",
              "domain": {
                "data": "tabls",
                "field": "crop"
              },
              "padding": 0.2
            },
            {
              "name": "val",
              "nice": true,
              "type": "linear",
              "range": "width",
              "round": true,
              "domain": {
                "data": "tabls",
                "field": "area"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": [
                "#e24e2c",
                "#f6811d",
                "#f6bb0f",
                "#ffe01b",
                "#fffbca",
                "#f4f4f1"
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": [
                32,
                270
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "t"
              }
            }
          ],
          "legends": [
            {
              "fill": "color",
              "properties": {
                "labels": {
                  "x": {
                    "scale": "legend-series-x",
                    "offset": 10
                  },
                  "y": {
                    "value": 34
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "font_size": {
                    "value": 14
                  }
                },
                "legend": {
                  "x": {
                    "value": 0,
                    "offset": -108
                  },
                  "y": {
                    "field": {
                      "group": "height"
                    },
                    "value": 0,
                    "offset": 30
                  }
                },
                "symbols": {
                  "x": {
                    "scale": "legend-series-x"
                  },
                  "y": {
                    "value": 29
                  },
                  "size": {
                    "value": 100
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 10,
            "left": 115,
            "right": 70,
            "bottom": 85
          },
          "sql_config": [],
          "params_config": [
            {
              "key": "year",
              "required": true
            },
            {
              "key": "water_column",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "crop",
                    "label": "Crop"
                  },
                  {
                    "key": "irrigation",
                    "label": "Irrigation"
                  },
                  {
                    "key": "area",
                    "label": "Area",
                    "format": ".2s",
                    "suffix": " ha"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-21T11:12:12.412Z",
        "updatedAt": "2017-05-09T21:42:49.271Z"
      }
    },
    {
      "id": "9ffaa6e5-4f31-41a6-bb62-3c994b326f98",
      "type": "widget",
      "attributes": {
        "name": "Gender Development Index (UNDP)",
        "dataset": "9a74e4c4-33b5-46d8-90d0-ea0615b1620f",
        "slug": "gender-development-index-undp",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/9a74e4c4-33b5-46d8-90d0-ea0615b1620f?sql=SELECT value, REPLACE(development, 'development', '') as development FROM gender_development_index where country in ('total') and indicator ='Gender Development Index'",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "ticks": 5,
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT value, REPLACE(development, 'development', '') as development FROM gender_development_index where country in ('total') and indicator ='Gender Development Index'",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "name": "groupedbar",
          "marks": [
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "development"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "gender",
                        "scale": "pos"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "y2": {
                        "scale": "y",
                        "value": 0
                      },
                      "fill": {
                        "field": "gender",
                        "scale": "group"
                      },
                      "width": {
                        "band": true,
                        "scale": "pos",
                        "offset": -1
                      }
                    }
                  }
                }
              ],
              "scales": [
                {
                  "name": "pos",
                  "type": "ordinal",
                  "range": "width",
                  "domain": {
                    "data": "",
                    "field": "gender"
                  }
                }
              ],
              "properties": {
                "enter": {
                  "x": {
                    "field": "key",
                    "scale": "x"
                  },
                  "width": {
                    "band": true,
                    "scale": "x"
                  }
                }
              }
            }
          ],
          "width": 200,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "development"
              },
              "padding": 0.2
            },
            {
              "name": "y",
              "nice": true,
              "range": "height",
              "domain": {
                "data": "table",
                "field": "value"
              }
            },
            {
              "name": "group",
              "type": "ordinal",
              "range": [
                "#5bb1d2"
              ],
              "domain": {
                "data": "table",
                "field": "gender"
              }
            }
          ],
          "legends": [],
          "padding": {
            "top": 20,
            "left": 30,
            "right": 12,
            "bottom": 30
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T21:13:46.188Z",
        "updatedAt": "2017-02-06T21:13:46.188Z"
      }
    },
    {
      "id": "05567af7-4bf2-48f4-a381-0c164f03674f",
      "type": "widget",
      "attributes": {
        "name": "Crop's producing areas exposed to water stress.",
        "dataset": "419db543-70a9-4b37-925d-1ea79042e5dd",
        "slug": "crop-s-producing-areas-exposed-to-water-stress-area",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/419db543-70a9-4b37-925d-1ea79042e5dd?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with chstress as (SELECT iso, values from aqueduct_water_stress_country_ranking_bau where year in (2010,2020,2030,2040) and type = 'all' and values > 4 order by iso), crops as (SELECT commodity, iso, value, year FROM combined01_prepared {{where}} and (impactparameter = 'Yield') and irrigation = 'irrigated' and year in (2010,2020,2030,2040) and scenario = 'SSP2-MIRO'), production as (SELECT round((value)::numeric, 2) as countryproduction, iso, region, year FROM combined01_prepared {{where2}} and (impactparameter = 'Production') and year in (2010,2020,2030,2040) and scenario = 'SSP2-MIRO' group by iso, region, countryproduction, year order by iso, year), aaa as (select crops.iso as iso, round((crops.value)::numeric,2) as grownpercentage, crops.year as year, commodity from crops inner join chstress on crops.iso=chstress.iso group by crops.iso, crops.value, crops.year, commodity), t as (select production.countryproduction, production.region, production.iso, production.year, aaa.grownpercentage, aaa.commodity from production inner join aaa on production.iso=aaa.iso and production.year = aaa.year), sd as (select max(grownpercentage), iso from t group by iso order by 1 desc limit 5) select t.* from t inner join sd on t.iso=sd.iso",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "year"
                }
              ]
            },
            {
              "name": "current",
              "values": [
                {
                  "currentYear": "2010"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "region"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "region"
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "region",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "iso"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "grownpercentage",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "iso",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "nice": "year",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "year"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "grownpercentage"
              }
            },
            {
              "name": "size",
              "type": "log",
              "range": [
                2,
                20
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "countryproduction"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "region"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "signals": [
            {
              "name": "onMousemove",
              "streams": [
                {
                  "expr": "{ xval: +iscale('x', eventX()), yval: +iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ],
          "sqlConfig": [
            {
              "key": "where",
              "keyParams": [
                {
                  "key": "commodity",
                  "required": true
                }
              ]
            },
            {
              "key": "where2",
              "keyParams": [
                {
                  "key": "commodity",
                  "required": true
                }
              ]
            }
          ],
          "paramsConfig": [
            {
              "key": "commodity",
              "required": true
            },
            {
              "key": "year",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "type": "signal",
              "config": {
                "table": {
                  "from": "tables",
                  "title": {
                    "key": "year",
                    "parse": {}
                  },
                  "bisect": "year",
                  "columns": [
                    {
                      "key": "region",
                      "parse": {}
                    },
                    {
                      "key": "grownpercentage",
                      "parse": {
                        "format": ".2f",
                        "suffix": "%"
                      }
                    }
                  ],
                  "headers": [
                    "Country",
                    "Percentage"
                  ]
                }
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-20T16:54:33.151Z",
        "updatedAt": "2017-04-03T08:32:07.765Z"
      }
    },
    {
      "id": "3b17ba8d-e63c-4370-9c12-d1ff964d767a",
      "type": "widget",
      "attributes": {
        "name": "SDG Indicators Tracker",
        "dataset": "f3d6d6c1-3b3b-4dfc-a2a0-dcf38d258ae9",
        "slug": "sdg-indicators-tracker",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/f3d6d6c1-3b3b-4dfc-a2a0-dcf38d258ae9?sql=select * from crops",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=WITH a AS ( SELECT * FROM sdg_data WHERE country_name = 'World' ), b as (SELECT indicator_code, indicator_name as group, unnest(array[ 1990, 1991,1992, 1993, 1994, 1995,1996, 1997,1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014]) AS x, unnest(array[ y_1990, y_1991, y_1992, y_1993, y_1994, y_1995, y_1996, y_1997, y_1998, y_1999, y_2000, y_2001, y_2002, y_2003, y_2004, y_2005, y_2006, y_2007, y_2008, y_2009, y_2010, y_2011, y_2012, y_2013, y_2014]) AS y from a) select * FROM b where y != '' order by b.group, x",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "name": "Line vizzualitation",
          "marks": [
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "group"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x",
                        "scale": "x"
                      },
                      "y": {
                        "field": "y",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "group",
                        "scale": "group"
                      },
                      "strokeWidth": {
                        "value": 2
                      }
                    }
                  }
                }
              ]
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "group",
              "type": "ordinal",
              "range": [
                "#00a0e1",
                "#2e57b8",
                "#afc7ff"
              ],
              "domain": {
                "data": "table",
                "field": "group"
              }
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-04-18T08:39:46.222Z",
        "updatedAt": "2017-04-18T08:43:03.560Z"
      }
    },
    {
      "id": "8739c082-712e-4c06-8023-9387030711de",
      "type": "widget",
      "attributes": {
        "name": "Projected temperature changes in Puget Sound",
        "dataset": "4e6fbd04-253d-4fae-929e-0dbc8e106c86",
        "slug": "projected-temperature-changes-in-puget-sound",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "This graph shows average yearly air temperature for the Puget Sound region, relative to the average for 1950-1999 (horizontal gray line, corresponding to an annual average temperature of 44°F. The black line shows the average simulated air temperature for 1950-2005, based on the individual model results indicated by the thin grey lines. The thick colored lines show the average among model projections for two emissions scenarios (low: RCP 4.5, and high: RCP 8.5), while the thin colored lines show individual model projections for each scenario.",
        "source": "Multivariate Adaptive Constructed Analogs (MACA) Statistical Downscaling Method",
        "sourceUrl": null,
        "authors": "Abatzoglou and Brown (2011).",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/4e6fbd04-253d-4fae-929e-0dbc8e106c86?sql=select * from index_4e6fbd04253d4fae929e0dbc8e106c86 order by year ASC",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "title": "years",
              "values": [
                1950,
                1970,
                1990,
                2010,
                2030,
                2050,
                2070,
                2090
              ],
              "formatType": "string",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "top"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              }
            },
            {
              "grid": false,
              "type": "y",
              "scale": "y",
              "ticks": 3,
              "title": "ºF",
              "values": [
                -10,
                -5,
                0,
                5,
                10,
                15
              ],
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 0
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "y": {
                    "value": -20
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://prep-admin.carto.com/api/v2/sql?q=SELECT year, avg_hist,avg_rcp45, avg_rcp85, min_hist, min_rcp45, min_rcp85, max_hist, max_rcp45, max_rcp85 FROM temp_graph_1 order by year asc",
              "name": "data",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "hist",
              "source": "data",
              "transform": [
                {
                  "test": "datum.year < 2006",
                  "type": "filter"
                },
                {
                  "expr": "((datum.avg_hist - 44)+ 12.45)",
                  "type": "formula",
                  "field": "AVG_HIST_perc"
                },
                {
                  "expr": "((datum.min_hist - 44)+ 12.45)",
                  "type": "formula",
                  "field": "min_hist"
                },
                {
                  "expr": "((datum.max_hist - 44)+ 12.45)",
                  "type": "formula",
                  "field": "max_hist"
                }
              ]
            },
            {
              "name": "rcp45",
              "source": "data",
              "transform": [
                {
                  "test": "datum.year >= 2006",
                  "type": "filter"
                },
                {
                  "expr": "((datum.avg_rcp45 - 44)+ 12.45)",
                  "type": "formula",
                  "field": "AVG_RCP45_perc"
                },
                {
                  "expr": "((datum.min_rcp45 - 44)+ 12.45)",
                  "type": "formula",
                  "field": "min_rcp45"
                },
                {
                  "expr": "((datum.max_rcp45 - 44)+ 12.45)",
                  "type": "formula",
                  "field": "max_rcp45"
                }
              ]
            },
            {
              "name": "rcp85",
              "source": "data",
              "transform": [
                {
                  "test": "datum.year >= 2006",
                  "type": "filter"
                },
                {
                  "expr": "((datum.avg_rcp85 - 44) + 12.45)",
                  "type": "formula",
                  "field": "AVG_RCP85_perc"
                },
                {
                  "expr": "((datum.min_rcp85 - 44)+ 12.45)",
                  "type": "formula",
                  "field": "min_rcp85"
                },
                {
                  "expr": "((datum.max_rcp85 - 44)+ 12.45)",
                  "type": "formula",
                  "field": "max_rcp85"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Historical"
                },
                {
                  "cat": "Low emissions (RCP 4.5)"
                },
                {
                  "cat": "High emissions (RCP 4.5)"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "range-modeled",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "hist"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min_hist",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max_hist",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#111"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min_rcp45",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max_rcp45",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#fff000"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min_rcp85",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max_rcp85",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#c34545"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "datalines",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "hist"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "AVG_HIST_perc",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#3b4f63"
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "AVG_RCP45_perc",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#fff000"
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "AVG_RCP85_perc",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#f00"
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "tooltip",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.year}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.yval|number:'.2f'}} ºF"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "scale": "x",
                    "offset": 0,
                    "signal": "indexDate.xval"
                  },
                  "y": {
                    "scale": "y",
                    "offset": 0,
                    "signal": "indexDate.yval"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 60
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "ease": "linear",
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "scale": "x",
                    "signal": "indexDate.xval"
                  },
                  "y": {
                    "scale": "y",
                    "signal": "indexDate.yval"
                  },
                  "size": {
                    "value": 3
                  },
                  "shape": {
                    "value": "cross"
                  },
                  "stroke": {
                    "value": "#000"
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "hist",
                    "field": "year"
                  },
                  {
                    "data": "rcp45",
                    "field": "year"
                  },
                  {
                    "data": "rcp85",
                    "field": "year"
                  }
                ]
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "hist",
                    "field": "min_hist"
                  },
                  {
                    "data": "rcp45",
                    "field": "max_hist"
                  },
                  {
                    "data": "rcp85",
                    "field": "max_rcp85"
                  }
                ]
              },
              "domainMin": -10
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#111",
                "#fff000",
                "#c34545"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "offset": 50,
              "stroke": "color",
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.1,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.2,
                    "field": {
                      "group": "height"
                    },
                    "offset": -20
                  }
                },
                "symbols": {
                  "size": {
                    "value": 10
                  },
                  "shape": {
                    "value": "circle"
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 5,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "year": 1950
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xval: +iscale('x', eventX()),yval: +iscale('y', eventY()), year:round(iscale('x', eventX()))}",
                  "type": "@datalines:mouseover"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-08-25T11:16:32.424Z",
        "updatedAt": "2017-03-21T12:15:19.639Z"
      }
    },
    {
      "id": "9bf57ac9-8949-45d5-b2c0-838674494009",
      "type": "widget",
      "attributes": {
        "name": "Example Carto Dataset",
        "dataset": "be76f130-ed4e-4972-827d-aef8e0dc6b18",
        "slug": "example-carto-dataset",
        "userId": "5820ad9469a0287982f4cd18",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "rw"
        ],
        "verified": false,
        "default": false,
        "published": false,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-08T15:16:27.806Z",
        "updatedAt": "2017-02-08T15:16:27.806Z"
      }
    },
    {
      "id": "2a59debe-8a0d-4728-8e44-49aa245f7a9c",
      "type": "widget",
      "attributes": {
        "name": "Country Water Risk Exposure and Risk of Hunger",
        "dataset": "90199a31-1f11-4319-a615-35bf8a0c625f",
        "slug": "country-water-risk-exposure-and-risk-of-hunger",
        "userId": "57a0aa1071e394dd32ffe137",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/90199a31-1f11-4319-a615-35bf8a0c625f?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "axes": [
            {
              "grid": false,
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "tick_size": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  },
                  "stroke_width": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#eeeeee"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#758290"
                  },
                  "align": {
                    "value": "left"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "font_size": {
                    "value": 12
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 2
                  }
                }
              },
              "tick_width": 0,
              "tick_padding": 20
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 5,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "stroke_width": {
                    "value": 1
                  }
                },
                "marks": {
                  "interactive": {
                    "value": false
                  }
                },
                "labels": {
                  "dy": {
                    "value": 3
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "{{datum.data|number:'.2s'}}"
                  },
                  "type": {
                    "value": "axis"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "font_size": {
                    "value": 12
                  }
                }
              },
              "tick_padding": 10
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with chstress as (SELECT iso, values from aqueduct_water_stress_country_ranking_bau {{where}} and type = 'all' order by iso desc), crops as (SELECT * FROM combined01_prepared {{where2}} and impactparameter = 'Share Pop. at risk of hunger' and scenario = 'SSP2-GFDL'and region !='World') select crops.*, chstress.values from crops inner join chstress on crops.iso=chstress.iso order by values desc",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "arrow_hide",
              "values": [
                {
                  "x": 0,
                  "y": 0
                },
                {
                  "x": 6,
                  "y": 0
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "size": {
                "value": 150
              },
              "type": "symbol",
              "shape": "circle",
              "properties": {
                "enter": {
                  "x": {
                    "field": "value",
                    "scale": "x"
                  },
                  "y": {
                    "field": "values",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "steelblue"
                  },
                  "opacity": {
                    "value": 0.8
                  }
                },
                "hover": {
                  "opacity": {
                    "value": 0.3
                  }
                },
                "update": {
                  "opacity": {
                    "value": 0.8
                  }
                }
              }
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": 319
                  },
                  "y": {
                    "value": 252
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "Risk of Hunger"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              },
              "interactive": false
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": -100
                  },
                  "y": {
                    "value": 0
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "Water"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              },
              "interactive": false
            },
            {
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "value": -100
                  },
                  "y": {
                    "value": 22
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "text": {
                    "template": "Risk"
                  },
                  "font_size": {
                    "value": 16
                  }
                }
              },
              "interactive": false
            }
          ],
          "width": 426,
          "height": 200,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "value"
              }
            },
            {
              "name": "size",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "table",
                "field": "values"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "values"
              }
            }
          ],
          "padding": {
            "top": 50,
            "left": 130,
            "right": 30,
            "bottom": 90
          },
          "sql_config": [
            {
              "key": "where",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                }
              ]
            },
            {
              "key": "where2",
              "key_params": [
                {
                  "key": "year",
                  "required": true
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "water_column",
              "required": false
            },
            {
              "key": "year",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "region",
                    "label": "Country"
                  },
                  {
                    "key": "value",
                    "label": "Pop. at risk of hunger",
                    "format": ".2f",
                    "suffix": "%"
                  },
                  {
                    "key": "values",
                    "label": "Water risk",
                    "format": ".2f"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-21T17:13:56.322Z",
        "updatedAt": "2017-04-03T11:12:36.502Z"
      }
    },
    {
      "id": "ff9d1891-c53b-4041-8312-8ad346a74997",
      "type": "widget",
      "attributes": {
        "name": "Example Carto Dataset2",
        "dataset": "be76f130-ed4e-4972-827d-aef8e0dc6b18",
        "slug": "example-carto-dataset2",
        "userId": "5820ad9469a0287982f4cd18",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "rw"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": "{}",
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-08T15:19:12.451Z",
        "updatedAt": "2017-02-08T15:19:12.451Z"
      }
    },
    {
      "id": "6ad9d6ca-9a21-4f41-b8d7-410933606038",
      "type": "widget",
      "attributes": {
        "name": "Example Carto Dataset3",
        "dataset": "be76f130-ed4e-4972-827d-aef8e0dc6b18",
        "slug": "example-carto-dataset3",
        "userId": "5820ad9469a0287982f4cd18",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "rw"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": {},
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-08T15:22:25.638Z",
        "updatedAt": "2017-02-08T15:22:25.638Z"
      }
    },
    {
      "id": "ea066dee-d886-4c07-9e38-25aa41e4b6ba",
      "type": "widget",
      "attributes": {
        "name": "Projected increases in Climatic Water Deficit (in/year)",
        "dataset": "ffe1db43-3f06-4409-a26d-4b8cb62598fd",
        "slug": "http-resource-watch-github-io-insights-sonoma-maps-water-deficit-increases-html",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected change in 30-year climatic water deficit, in in/year, represented by 2 thresholds, with climatic water deficit exceeding 28 in/year in yellow, and exceeding 32 in/year in red.",
        "source": "",
        "sourceUrl": null,
        "authors": "L.E. Flint and A.L. Flint, 2014, California Basin Characterization Model: A Dataset of Historical and Future Hydrologic Response to Climate Change, U.S. Geological Survey Data Release, doi:10.5066/F76T0JPB",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "",
        "widgetConfig": {
          "url": "https://resource-watch.github.io/insights/sonoma-maps/water-deficit-increases.html",
          "type": "embed"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-20T15:14:58.932Z",
        "updatedAt": "2017-03-21T12:18:42.508Z"
      }
    },
    {
      "id": "606e07d5-e6be-48ca-9efd-51658af95198",
      "type": "widget",
      "attributes": {
        "name": "Maximum Annual Number of Consecutive Dry Days - Historical Climate",
        "dataset": "776ae93f-38bf-4639-b6f7-80169f875774",
        "slug": "historical-number-of-consecutive-dry-days-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Current regional trends of a drier south and a wetter north are projected to become more pronounced by mid-century (2041-2070 as compared to 1971-2000 averages). Maps show the maximum annual number of consecutive days in which limited (less than 0.01 inches) precipitation was recorded on average from 1971 to 2000 (top), projected changes in the number of consecutive dry days assuming substantial reductions in emissions (B1), and projected changes if emissions continue to rise (A2). The southeastern Great Plains, which is the wettest portion of the region, is projected to experience large increases in the number of consecutive dry days. (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_19-5_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "11d88f38-20d6-46db-978b-8438398cf603"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:41.832Z",
        "updatedAt": "2017-03-21T12:31:15.055Z"
      }
    },
    {
      "id": "25facdf3-acf6-4f0e-9a0a-5ec94216407f",
      "type": "widget",
      "attributes": {
        "name": "Rainfed vs Irrigated",
        "dataset": "3e7154d1-2aad-4f64-a7e7-01bcf8f7f488",
        "slug": "rainfed-vs-irrigated",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3e7154d1-2aad-4f64-a7e7-01bcf8f7f488?sql=SELECT * FROM crops_stats",
        "widgetConfig": {
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=with r as (SELECT sum(area*{{water_column}}/crop_total_area) as risk, crop, irrigation FROM all_crops_stats  group by crop, irrigation), s as (SELECT commodity, irrigation, sum(value) area FROM combined01_prepared where impactparameter='Area' and scenario='SSP2-GFDL' {{and}} group by irrigation, commodity), d as (select r.*, s.area from r join  s on  r.crop=lower(s.commodity) and r.irrigation=s.irrigation), h as (select area, crop, irrigation from d) select sum(area) AS value, irrigation as category from h group by irrigation",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "summary",
              "source": "table",
              "transform": [
                {
                  "type": "aggregate",
                  "summarize": {
                    "value": "sum"
                  }
                }
              ]
            },
            {
              "name": "layout",
              "source": "table",
              "transform": [
                {
                  "type": "cross",
                  "with": "summary"
                },
                {
                  "type": "pie",
                  "field": "a.value"
                },
                {
                  "expr": "round(datum.a.value / datum.b.sum_value * 100) === 0 ? '<1' : round(datum.a.value / datum.b.sum_value * 100)",
                  "type": "formula",
                  "field": "percentage"
                },
                {
                  "expr": "2*PI-datum.layout_end",
                  "type": "formula",
                  "field": "angle_start"
                },
                {
                  "expr": "datum.angle_start+datum.layout_end-datum.layout_start",
                  "type": "formula",
                  "field": "angle_end"
                },
                {
                  "expr": "2*PI-datum.layout_mid",
                  "type": "formula",
                  "field": "angle_mid"
                }
              ]
            },
            {
              "name": "categories",
              "values": [
                {
                  "category": "rainfed"
                },
                {
                  "category": "irrigated"
                }
              ]
            }
          ],
          "name": "arc",
          "marks": [
            {
              "from": {
                "data": "layout"
              },
              "type": "arc",
              "properties": {
                "enter": {
                  "x": {
                    "mult": 0.525,
                    "field": {
                      "group": "width"
                    }
                  },
                  "y": {
                    "mult": 0.475,
                    "field": {
                      "group": "height"
                    }
                  },
                  "fill": {
                    "field": "a.category",
                    "scale": "color"
                  },
                  "endAngle": {
                    "field": "angle_end"
                  },
                  "startAngle": {
                    "field": "angle_start"
                  },
                  "innerRadius": {
                    "mult": 0.38,
                    "value": 150
                  },
                  "outerRadius": {
                    "mult": 0.47,
                    "value": 225
                  }
                }
              }
            },
            {
              "from": {
                "data": "layout"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "mult": 0.5,
                    "field": {
                      "group": "width"
                    }
                  },
                  "y": {
                    "mult": 0.5,
                    "field": {
                      "group": "height"
                    }
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "\"Roboto\""
                  },
                  "text": {
                    "template": "{{datum.percentage}}%"
                  },
                  "align": {
                    "value": "left"
                  },
                  "theta": {
                    "field": "angle_mid"
                  },
                  "radius": {
                    "mult": 0.45,
                    "field": {
                      "group": "height"
                    }
                  },
                  "baseline": {
                    "value": "bottom"
                  },
                  "fontSize": {
                    "value": 12
                  },
                  "fontWeight": {
                    "value": "medium"
                  }
                }
              }
            }
          ],
          "height": 300,
          "scales": [
            {
              "name": "r",
              "type": "sqrt",
              "range": [
                0,
                100
              ],
              "domain": {
                "data": "table",
                "field": "value"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "data": "categories",
                "field": "category"
              }
            },
            {
              "name": "horizontal",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "categories",
                "field": "category"
              },
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": [
                175,
                330
              ],
              "domain": {
                "data": "categories",
                "field": "category"
              }
            }
          ],
          "legends": [
            {
              "fill": "color",
              "properties": {
                "labels": {
                  "x": {
                    "scale": "legend-series-x",
                    "offset": 10
                  },
                  "y": {
                    "value": 308
                  },
                  "text": {
                    "template": "{{datum.data|left:1|upper}}{{datum.data|slice:1|truncate:15}}"
                  },
                  "fontSize": {
                    "value": 14
                  }
                },
                "symbols": {
                  "x": {
                    "scale": "legend-series-x"
                  },
                  "y": {
                    "value": 304
                  },
                  "size": {
                    "value": 100
                  },
                  "shape": {
                    "value": "square"
                  }
                },
                "categories": {
                  "x": {
                    "value": 0,
                    "offset": -108
                  },
                  "y": {
                    "field": {
                      "group": "height"
                    },
                    "value": 0,
                    "offset": 30
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 30,
            "right": 30,
            "bottom": 30
          },
          "sqlConfig": [
            {
              "key": "and",
              "keyParams": [
                {
                  "key": "year",
                  "required": true
                },
                {
                  "key": "iso",
                  "required": false
                },
                {
                  "key": "commodity",
                  "required": false
                }
              ]
            }
          ],
          "sqlParams": [],
          "paramsConfig": [
            {
              "key": "water_column",
              "sufix": "r",
              "required": true
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "percentage",
                    "label": "Percentage",
                    "suffix": "%"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-07T09:28:28.398Z",
        "updatedAt": "2017-03-30T16:47:48.033Z"
      }
    },
    {
      "id": "18e72846-5eb2-43e3-b734-968c6a704a87",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Frost Free Season Length (days) - Higher Emissions (A2)",
        "dataset": "4d676794-7867-465e-a41b-db1b6986729c",
        "slug": "projeced-change-in-frost-free-season-length-u-s-midwest",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected increase in annual average temperatures by mid-century (2041-2070) as compared to the 1971-2000 period tell only part of the climate change story. Maps also show annual projected increases in the number of the hottest days (days over 95ÁF), longer frost-free seasons, and an increase in cooling degree days, defined as the number of degrees that a dayÍs average temperature is above 65ÁF, which generally leads to an increase in energy use for air conditioning. Projections are from global climate models that assume emissions of heat-trapping gases continue to rise (A2 scenario). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "a8aae286-ff3f-4ef6-8f56-78a584b6e2ba"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:40.872Z",
        "updatedAt": "2017-03-21T12:33:38.379Z"
      }
    },
    {
      "id": "049f074a-3528-427d-922b-3c2320e9caf6",
      "type": "widget",
      "attributes": {
        "name": "Growing crops under water stress conditions.",
        "dataset": "3f09c3eb-c259-4af0-9015-7077290fe6e8",
        "slug": "growing-crops-under-water-stress-conditions",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3f09c3eb-c259-4af0-9015-7077290fe6e8?sql=select * from aqueduct_projections_20150309 limit 100",
        "widgetConfig": {
          "data": {
            "url": "https://wri-01.carto.com/api/v2/sql?q=WITH chstress AS (SELECT iso, VALUES, country FROM aqueduct_water_stress_country_ranking_bau WHERE YEAR = {{year}} AND TYPE = 'all'), crops AS (SELECT * FROM combined01_prepared WHERE YEAR = {{year}} AND impactparameter = 'Area' AND scenario = 'SSP2-MIRO'), result as (SELECT year, commodity, crops.iso, chstress.country, round((sum(crops.value)*247.11)::numeric, 2) AS valuearea FROM crops INNER JOIN chstress ON crops.iso=chstress.iso WHERE lower(commodity) = '{{commodity}}' AND crops.iso = '{{iso}}' GROUP BY YEAR, commodity, crops.iso, chstress.country) SELECT case when year > 2010 then 'will be' else 'are' end as verb, case when year > 2010 then 'in ' || to_char(year, '9999') else '' end as year, commodity, iso, country, valuearea as value from result"
          },
          "type": "text",
          "template": "There {{verb}} an estimated {{value}} hectares of growing {{commodity}} crop under high water stress condition {{year}} in {{country}}.",
          "sql_config": [],
          "params_config": [
            {
              "key": "year",
              "required": true
            },
            {
              "key": "iso",
              "required": true
            },
            {
              "key": "commodity",
              "required": true
            }
          ],
          "template_config": [
            {
              "key": "verb"
            },
            {
              "key": "value",
              "format": ".2s"
            },
            {
              "key": "commodity"
            },
            {
              "key": "year"
            },
            {
              "key": "country"
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-12-19T16:20:48.824Z",
        "updatedAt": "2017-02-09T10:40:22.255Z"
      }
    },
    {
      "id": "63d3ff2c-394a-4c45-9fd8-f6aeda5ad3cc",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Temperature (ºF) - Higher Emissions (A2)",
        "dataset": "308f0bc1-ba4c-480e-ac11-1f261a208e2d",
        "slug": "projected-average-temperature-change-u-s-midwest",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Projected increase in annual average temperatures by mid-century (2041-2070) as compared to the 1971-2000 period tell only part of the climate change story. Maps also show annual projected increases in the number of the hottest days (days over 95ÁF), longer frost-free seasons, and an increase in cooling degree days, defined as the number of degrees that a dayÍs average temperature is above 65ÁF, which generally leads to an increase in energy use for air conditioning. Projections are from global climate models that assume emissions of heat-trapping gases continue to rise (A2 scenario). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "ftp://filsrv.cicsnc.org/tsu/nca3-data/Figure_18-2_files.tar.gz",
        "widgetConfig": {
          "type": "map",
          "layer_id": "b5dfc4dd-4c26-4b7d-96d4-7e9bfac54d54"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:39.935Z",
        "updatedAt": "2017-03-21T12:36:38.375Z"
      }
    },
    {
      "id": "4f322f4a-dde6-4f63-b7c9-10b0ba0c1402",
      "type": "widget",
      "attributes": {
        "name": "Water stress evolution over time for irrigated crops",
        "dataset": "9c35be67-2f1b-4991-be25-ca2a2baabe06",
        "slug": "water-stress-evolution-over-time-for-irrigated-crops",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/9c35be67-2f1b-4991-be25-ca2a2baabe06?sql=select * from crops",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[ 0.94205247,  0.70020149,  0.79683431,  0.45588935,  0.28945214, 0.79441105,  0.77567269,  0.8117399 ,  0.31352058,  0.89617214, 0.82046704,  0.72807327,  0.55336729,  0.73037416,  0.44196434,0.84153076,  0.34408864,  0.58752975]) as water_risk, unnest(Array['Cereals','Leguminous','Roots And Tubers','Fruit and nuts','Oilseed crops','All crops avg']) as cat, unnest(Array[2020,2020,2020,2020,2020,2020,2030,2030,2030,2030,2030,2030,2040,2040,2040,2040,2040,2040]) as year",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "year"
                }
              ]
            },
            {
              "name": "current",
              "values": [
                {
                  "currentYear": "2020"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "cat"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "nice": "year",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "year"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropCatColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "signals": [
            {
              "name": "onMousemove",
              "streams": [
                {
                  "expr": "{ xval: +iscale('x', eventX()), yval: +iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "type": "signal",
              "config": {
                "table": {
                  "from": "tables",
                  "title": {
                    "key": "year",
                    "parse": {}
                  },
                  "bisect": "year",
                  "columns": [
                    {
                      "key": "cat",
                      "parse": {}
                    },
                    {
                      "key": "water_risk",
                      "parse": {
                        "format": ".2f"
                      }
                    }
                  ],
                  "headers": [
                    "Category",
                    "Variability"
                  ]
                }
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T10:41:32.807Z",
        "updatedAt": "2017-04-03T08:18:15.706Z"
      }
    },
    {
      "id": "f2fbd06e-8e2e-4b06-a883-0e4c1146c79c",
      "type": "widget",
      "attributes": {
        "name": "Historical and Projected annual changes in summer air temperature (ºF)",
        "dataset": "3feaf26c-42c8-43ce-b1b5-07a02a773c36",
        "slug": "historical-and-projected-annual-changes-in-summer-air-temperature-c",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Yearly precipitation and yearly summer air temperature for Sonoma County, showing actual data before 2010 and projected data from multiple models after 2010. Six future climate projections are shown and the model closest to the mid-range of all the models, used throughout this dashboard, is highlighted in black. Dotted lines show 10th and 90th percentiles.",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3feaf26c-42c8-43ce-b1b5-07a02a773c36?sql=select * from index_3feaf26c42c843ceb1b507a02a773c36",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "title": "Years",
              "values": [
                1920,
                1940,
                1960,
                1980,
                2000,
                2020,
                2040,
                2060,
                2080,
                2099
              ],
              "formatType": "text",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "top"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              }
            },
            {
              "grid": false,
              "type": "y",
              "scale": "y",
              "ticks": 10,
              "title": "Summer maximum air temperature, degrees Fº",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "x": {
                    "value": 100
                  },
                  "y": {
                    "value": -20
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/3feaf26c-42c8-43ce-b1b5-07a02a773c36?sql=select * from index_3feaf26c42c843ceb1b507a02a773c36 order by date asc",
              "name": "data_brut",
              "format": {
                "type": "json",
                "property": "data"
              }
            },
            {
              "name": "data",
              "source": "data_brut",
              "transform": [
                {
                  "expr": "datum.date < 2010 ? ((datum.HST*1.8)+32) : 0",
                  "type": "formula",
                  "field": "HST"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.min*1.8)+32)",
                  "type": "formula",
                  "field": "min"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.max*1.8)+32)",
                  "type": "formula",
                  "field": "max"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.CCSM4_rcp85*1.8)+32)",
                  "type": "formula",
                  "field": "CCSM4_rcp85"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.CNRM_rcp85*1.8)+32)",
                  "type": "formula",
                  "field": "CNRM_rcp85"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.GFDL_A2*1.8)+32)",
                  "type": "formula",
                  "field": "GFDL_A2"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.GFDL_B1*1.8)+32)",
                  "type": "formula",
                  "field": "GFDL_B1"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.MIROC_rcp85*1.8)+32)",
                  "type": "formula",
                  "field": "MIROC_rcp85"
                },
                {
                  "expr": "datum.date < 2010 ? 0 : ((datum.PCM_A2*1.8)+32)",
                  "type": "formula",
                  "field": "PCM_A2"
                }
              ]
            },
            {
              "name": "hist",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date < 2010",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "modeled",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date > 2009",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Historic"
                },
                {
                  "cat": "CCSM4"
                },
                {
                  "cat": "Models amplitude"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date == indexDate.date",
                  "type": "filter"
                },
                {
                  "expr": "datum.date > 2060 ? indexDate.xRight : indexDate.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "datum.date < 2010 ? datum.HST : datum.CCSM4_rcp85",
                  "type": "formula",
                  "field": "value"
                },
                {
                  "expr": "indexDate.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "by": "date",
                  "type": "sort"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "datalines-hist",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "hist"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "HST",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#efa600"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "datalines-modeled",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "modeled"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#1a6d9e"
                      },
                      "fillOpacity": {
                        "value": 0.2
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "modeled"
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "CCSM4_rcp85",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#1a6d9e"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "90 perc",
              "type": "rule",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "scale": "y",
                    "value": 88.43
                  },
                  "x2": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "stroke": {
                    "value": "#263e57"
                  },
                  "strokeWidth": {
                    "value": 1.5
                  },
                  "strokeOpacity": {
                    "value": 0.05
                  }
                }
              }
            },
            {
              "name": "10 perc",
              "type": "rule",
              "properties": {
                "enter": {
                  "x": {
                    "value": 0
                  },
                  "y": {
                    "scale": "y",
                    "value": 84.74
                  },
                  "x2": {
                    "field": {
                      "group": "width"
                    }
                  },
                  "stroke": {
                    "value": "#263e57"
                  },
                  "strokeWidth": {
                    "value": 1.5
                  },
                  "strokeOpacity": {
                    "value": 0.05
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip"
              },
              "name": "tooltip",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.date}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{parent.value|number:'.2f'}} ºF"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 60
                  },
                  "height": {
                    "value": 55
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "rule",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "value": 0
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "stroke": {
                    "value": "#000000"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "value",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#c15467"
                  },
                  "size": {
                    "value": 20
                  }
                }
              }
            }
          ],
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "date"
                  }
                ]
              },
              "domainMax": 2100,
              "domainMin": 1920
            },
            {
              "name": "y",
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "max"
                  }
                ]
              },
              "domainMax": 100,
              "domainMin": 80
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#efa600",
                "#1a6d9e",
                "#D2E2EC"
              ],
              "domain": {
                "sort": false,
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "offset": 50,
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.05,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -10
                  }
                },
                "symbols": {
                  "size": {
                    "value": 30
                  },
                  "shape": {
                    "value": "square"
                  },
                  "strokeOpacity": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 5,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "yval": 0
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX() +10), xRight: +iscale('x', eventX() -70), date: round(iscale('x', eventX())), yval: iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T14:41:23.065Z",
        "updatedAt": "2017-03-21T15:15:23.612Z"
      }
    },
    {
      "id": "bfb80957-f41c-4610-8e88-15ac47e7c33f",
      "type": "widget",
      "attributes": {
        "name": "Water stress over crop area",
        "dataset": "d1c0ffe6-fe93-4027-976a-28ae05613c3e",
        "slug": "water-stress-over-crop-area",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/d1c0ffe6-fe93-4027-976a-28ae05613c3e?sql=select * from crops",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[ 0.13524776,  0.42454775,  0.69964833, 0.5524776,  0.322454775,  0.80964833]) as water_risk, unnest(Array['{{crop}}','All crops Avg.']) as cat, unnest(Array[2020,2020,2030,2030,2040,2040]) as year",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "year"
                }
              ]
            },
            {
              "name": "current",
              "values": [
                {
                  "currentYear": "2020"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "cat"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "nice": "year",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "year"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": [
                "{{color}}",
                "#aaa"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "signals": [
            {
              "name": "onMousemove",
              "streams": [
                {
                  "expr": "{ xval: +iscale('x', eventX()), yval: +iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "iso",
              "required": false
            },
            {
              "key": "color",
              "required": true
            },
            {
              "key": "crop",
              "required": true
            }
          ],
          "interactionConfig": [
            {
              "name": "tooltip",
              "type": "signal",
              "config": {
                "table": {
                  "from": "tables",
                  "title": {
                    "key": "year",
                    "parse": {}
                  },
                  "bisect": "year",
                  "columns": [
                    {
                      "key": "cat",
                      "parse": {}
                    },
                    {
                      "key": "water_risk",
                      "parse": {
                        "format": ".2f"
                      }
                    }
                  ],
                  "headers": [
                    "Category",
                    "Variability"
                  ]
                }
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T11:13:05.051Z",
        "updatedAt": "2017-04-03T08:50:30.196Z"
      }
    },
    {
      "id": "8af430e0-da39-4169-b88a-8a2b26e277f4",
      "type": "widget",
      "attributes": {
        "name": "Rainfall by month",
        "dataset": "31ecf690-73a9-4153-a13d-ba0f2a694b9b",
        "slug": "rainfall-by-month",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/31ecf690-73a9-4153-a13d-ba0f2a694b9b?sql=select * from water_risk_indicators",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "type": {
                    "value": "axis"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[  535.28313846,  1112.24011224,   511.29972326,   871.01609363, 430.69500723,   297.33897077,   754.17683616,   760.73458005, 627.83455877,   815.77575532,  1101.44650379,  1010.89923102]) as water_risk, unnest(Array['Rainfall by month']) as cat, unnest(Array['sep', 'oct', 'nov', 'dec', 'jan', 'feb', 'mar', 'apr','may','jun','jul', 'aug']) as month",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "month"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "cat"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "month",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "y2": {
                        "scale": "y",
                        "value": 0
                      },
                      "fill": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "width": {
                        "value": "30"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "month"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "sql_config": [],
          "params_config": [
            {
              "key": "iso",
              "required": false
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "month",
                    "label": "Month"
                  },
                  {
                    "key": "water_risk",
                    "label": "Value",
                    "format": ".2s"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T11:32:20.806Z",
        "updatedAt": "2017-04-03T11:56:04.480Z"
      }
    },
    {
      "id": "a5f6003d-c268-4380-a7aa-666fa2158d4d",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Consecutive Dry Days -- U.S. (Great PLains)",
        "dataset": "de274c78-2194-4f7c-83d4-1282c31ca2a9",
        "slug": "projected-change-in-number-of-consecutive-dry-days-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Current regional trends of a drier south and a wetter north are projected to become more pronounced by mid-century (2041-2070 as compared to 1971-2000 averages). Maps show the maximum annual number of consecutive days in which limited (less than 0.01 inches) precipitation was recorded on average from 1971 to 2000 (top), projected changes in the number of consecutive dry days assuming substantial reductions in emissions (B1), and projected changes if emissions continue to rise (A2). The southeastern Great Plains, which is the wettest portion of the region, is projected to experience large increases in the number of consecutive dry days. (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": {
          "type": "map",
          "layer_id": "e47b0777-55c4-40e7-ac61-7f15e7d24ab0"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:44.337Z",
        "updatedAt": "2017-03-21T14:07:28.704Z"
      }
    },
    {
      "id": "69963620-4cc4-4010-9072-0315cbc71265",
      "type": "widget",
      "attributes": {
        "name": "Water stress ranking for irrigated vs Seasonal variability ranking for rainfed crops",
        "dataset": "6a5a2dd0-8bd3-4d56-99a1-aee0100c4bed",
        "slug": "water-stress-ranking-for-irrigated-vs-seasonal-variability-ranking-for-rainfed-crops",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/6a5a2dd0-8bd3-4d56-99a1-aee0100c4bed?sql=select * from crops",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            },
            {
              "type": "y",
              "layer": "back",
              "scale": "y2",
              "orient": "right",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[ 0.442,  0.705,  0.90]) as water_risk, unnest(Array['Water stress']) as cat, unnest(Array[2020,2030,2040]) as year",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[ 0.20,  0.50,  0.10]) as water_risk, unnest(Array['Seasonal variability']) as cat, unnest(Array[2020,2030,2040]) as year",
              "name": "seasonal",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "year"
                }
              ]
            },
            {
              "name": "current",
              "values": [
                {
                  "currentYear": "2020"
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Water stress"
                },
                {
                  "cat": "Seasonal variability"
                }
              ],
              "transform": [
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            },
            {
              "from": {
                "data": "seasonal",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y2"
                      },
                      "stroke": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "nice": "year",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "year"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "y2",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "seasonal",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "signals": [
            {
              "name": "onMousemove",
              "streams": [
                {
                  "expr": "{ xval: +iscale('x', eventX()), yval: +iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "iso",
              "required": false
            },
            {
              "key": "crop",
              "required": false
            }
          ],
          "interactionConfig": [
            {
              "name": "tooltip",
              "type": "signal",
              "config": {
                "table": {
                  "from": "tables",
                  "title": {
                    "key": "year",
                    "parse": {}
                  },
                  "bisect": "year",
                  "columns": [
                    {
                      "key": "cat",
                      "parse": {}
                    },
                    {
                      "key": "water_risk",
                      "parse": {
                        "format": ".2f"
                      }
                    }
                  ],
                  "headers": [
                    "Category",
                    "Variability"
                  ]
                }
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T11:24:25.791Z",
        "updatedAt": "2017-04-03T08:56:04.164Z"
      }
    },
    {
      "id": "bafd137a-26e3-43a6-b85e-ea951614c0e4",
      "type": "widget",
      "attributes": {
        "name": "Seasonal variability change over time",
        "dataset": "cd3ca381-bca9-4d95-bcca-7e6031503c08",
        "slug": "seasonal-variability-change-over-time",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/cd3ca381-bca9-4d95-bcca-7e6031503c08?sql=select * from crops",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[ 0.442,  0.705,  0.90, 0.5524776,  0.322454775,  0.80964833]) as water_risk, unnest(Array['{{crop}}','All crops Avg.']) as cat, unnest(Array[2020,2020,2030,2030,2040,2040]) as year",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "year"
                }
              ]
            },
            {
              "name": "current",
              "values": [
                {
                  "currentYear": "2020"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "cat"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "nice": "year",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "year"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": [
                "{{color}}",
                "#aaa"
              ],
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "signals": [
            {
              "name": "onMousemove",
              "streams": [
                {
                  "expr": "{ xval: +iscale('x', eventX()), yval: +iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ],
          "params_config": [
            {
              "key": "iso",
              "required": false
            },
            {
              "key": "color",
              "required": true
            },
            {
              "key": "crop",
              "required": true
            }
          ],
          "interactionConfig": [
            {
              "name": "tooltip",
              "type": "signal",
              "config": {
                "table": {
                  "from": "tables",
                  "title": {
                    "key": "year",
                    "parse": {}
                  },
                  "bisect": "year",
                  "columns": [
                    {
                      "key": "cat",
                      "parse": {}
                    },
                    {
                      "key": "water_risk",
                      "parse": {
                        "format": ".2f"
                      }
                    }
                  ],
                  "headers": [
                    "Category",
                    "Variability"
                  ]
                }
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T11:16:39.086Z",
        "updatedAt": "2017-04-03T08:53:07.766Z"
      }
    },
    {
      "id": "abf5c0f9-4042-4ea6-9582-1b34209cb4ba",
      "type": "widget",
      "attributes": {
        "name": "Seasonal variability change over time for rainfed crops",
        "dataset": "dcc870ef-6137-470c-8bfd-22a9060729fb",
        "slug": "seasonal-variability-change-over-time-for-rainfed-crops",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/dcc870ef-6137-470c-8bfd-22a9060729fb?sql=select * from crops",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[ 0.09600429,  0.991519  ,  0.23050533,  0.17471493,  0.69110659, 0.30573123,  0.62629532,  0.49206873,  0.048547  ,  0.6322443 ,0.87878446,  0.21322737,  0.52704151,  0.08186764,  0.78085925, 0.03404986,  0.67157174,  0.30548074]) as water_risk, unnest(Array['Cereals','Leguminous','Roots And Tubers','Fruit and nuts','Oilseed crops','All crops avg']) as cat, unnest(Array[2020,2020,2020,2020,2020,2020,2030,2030,2030,2030,2030,2030,2040,2040,2040,2040,2040,2040]) as year",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "year"
                }
              ]
            },
            {
              "name": "current",
              "values": [
                {
                  "currentYear": "2020"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "cat"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              }
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              }
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "year",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "strokeWidth": {
                        "value": "2"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "nice": "year",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "year"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropCatColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "signals": [
            {
              "name": "onMousemove",
              "streams": [
                {
                  "expr": "{ xval: +iscale('x', eventX()), yval: +iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ],
          "interactionConfig": [
            {
              "name": "tooltip",
              "type": "signal",
              "config": {
                "table": {
                  "from": "tables",
                  "title": {
                    "key": "year",
                    "parse": {}
                  },
                  "bisect": "year",
                  "columns": [
                    {
                      "key": "cat",
                      "parse": {}
                    },
                    {
                      "key": "water_risk",
                      "parse": {
                        "format": ".2f"
                      }
                    }
                  ],
                  "headers": [
                    "Category",
                    "Variability"
                  ]
                }
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T10:51:57.369Z",
        "updatedAt": "2017-04-03T08:08:10.648Z"
      }
    },
    {
      "id": "8a149207-610d-47f7-a36b-1566323a3976",
      "type": "widget",
      "attributes": {
        "name": "Water stress by month",
        "dataset": "1923920e-37b9-44c3-9b9f-bcb8426ab9d7",
        "slug": "water-stress-by-month",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/1923920e-37b9-44c3-9b9f-bcb8426ab9d7?sql=select * from water_risk_indicators",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "type": {
                    "value": "axis"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[  535.28313846,  1112.24011224,   511.29972326,   871.01609363, 430.69500723,   297.33897077,   754.17683616,   760.73458005, 627.83455877,   815.77575532,  1101.44650379,  1010.89923102]) as water_risk, unnest(Array['Monthly water stress']) as cat, unnest(Array['sep', 'oct', 'nov', 'dec', 'jan', 'feb', 'mar', 'apr','may','jun','jul', 'aug']) as month",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "month"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": [
                    "cat"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "counts"
                      ],
                      "ops": [
                        "count"
                      ],
                      "field": "year"
                    }
                  ]
                },
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "axis"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x"
                  },
                  "y": {
                    "value": 150,
                    "offset": 20
                  },
                  "fill": {
                    "value": "#758290"
                  },
                  "font": {
                    "value": "Roboto"
                  },
                  "text": {
                    "field": "year"
                  },
                  "align": {
                    "value": "center"
                  },
                  "fontSize": {
                    "value": 12
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "text",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -70
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 200
                  },
                  "fill": {
                    "value": "grey"
                  },
                  "text": {
                    "field": "cat"
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "legend"
              },
              "type": "symbol",
              "properties": {
                "enter": {
                  "x": {
                    "field": "xPos",
                    "scale": "legend-series-x",
                    "offset": -80
                  },
                  "y": {
                    "field": "yPos",
                    "offset": 196
                  },
                  "fill": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "text": {
                    "field": "cat",
                    "scale": "color"
                  },
                  "shape": {
                    "value": "square"
                  }
                }
              },
              "interactive": false
            },
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "month",
                        "scale": "x"
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "y2": {
                        "scale": "y",
                        "value": 0
                      },
                      "fill": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "width": {
                        "value": "30"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "month"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "sql_config": [],
          "params_config": [
            {
              "key": "iso",
              "required": false
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "month",
                    "label": "Month"
                  },
                  {
                    "key": "water_risk",
                    "label": "Value",
                    "format": ".2s"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T11:34:46.733Z",
        "updatedAt": "2017-04-03T11:56:43.307Z"
      }
    },
    {
      "id": "8bd6eb5d-6f90-4d5c-b668-320699be7ce8",
      "type": "widget",
      "attributes": {
        "name": "Worldwide emission by type in the year 2011 - 2",
        "dataset": "3ec6d181-fc7a-46db-a98e-90c18cb9e5e0",
        "slug": "worldwide-emission-by-type-in-the-year-2011-2",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "CAIT",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3ec6d181-fc7a-46db-a98e-90c18cb9e5e0?sql=select * FROM public.cait_2_0_country_co2_emissions_energy_sub_sect_sum2011",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "align": {
                    "value": "left"
                  },
                  "angle": {
                    "value": 45
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "s",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_opacity": {
                    "value": "0.5"
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/3ec6d181-fc7a-46db-a98e-90c18cb9e5e0?sql=select * FROM public.cait_2_0_country_co2_emissions_energy_sub_sect_sum2011",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "emission_type",
                    "scale": "x"
                  },
                  "y": {
                    "field": "score",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "update": {
                  "fill": {
                    "value": "#5BB1D2"
                  }
                }
              }
            }
          ],
          "width": 270,
          "height": 240,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "emission_type"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "score"
              }
            }
          ],
          "padding": {
            "top": 25,
            "left": 38,
            "right": 40,
            "bottom": 85
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-24T10:21:35.654Z",
        "updatedAt": "2017-01-24T10:21:35.654Z"
      }
    },
    {
      "id": "1baf179f-f137-4df4-95e5-f4bdc3aa5bcc",
      "type": "widget",
      "attributes": {
        "name": "Worldwide emission by type in the year 2011",
        "dataset": "3ec6d181-fc7a-46db-a98e-90c18cb9e5e0",
        "slug": "worldwide-emission-by-type-in-the-year-2011",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "CAIT",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3ec6d181-fc7a-46db-a98e-90c18cb9e5e0?sql=select * FROM public.cait_2_0_country_co2_emissions_energy_sub_sect_sum2011",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "align": {
                    "value": "left"
                  },
                  "angle": {
                    "value": 45
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "s",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_opacity": {
                    "value": "0.5"
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/3ec6d181-fc7a-46db-a98e-90c18cb9e5e0?sql=select * FROM public.cait_2_0_country_co2_emissions_energy_sub_sect_sum2011",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "emission_type",
                    "scale": "x"
                  },
                  "y": {
                    "field": "score",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "update": {
                  "fill": {
                    "value": "#5BB1D2"
                  }
                }
              }
            }
          ],
          "width": 270,
          "height": 240,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "emission_type"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "score"
              }
            }
          ],
          "padding": {
            "top": 25,
            "left": 38,
            "right": 40,
            "bottom": 85
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-23T17:25:13.224Z",
        "updatedAt": "2017-01-23T17:25:13.224Z"
      }
    },
    {
      "id": "7e43cf2d-93f2-4275-aa84-6e07e5cf88e1",
      "type": "widget",
      "attributes": {
        "name": "Projected Change in Number of Warm Nights - Higher Emissions -- U.S. (Great Plains)",
        "dataset": "d4535f42-c6d6-436a-90b7-c97910f90b33",
        "slug": "projected-change-in-number-of-warm-nights-higher-emissions-u-s-great-plains",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "The number of nights with the warmest temperatures is projected to increase dramatically. The historical (1971-2000) distribution of temperature for the warmest 2% of nights (Top: about seven days each year) echoes the distinct north-south gradient in average temperatures. By mid-century (2041-2070), the projected change in number of nights exceeding those warmest temperatures is greatest in the south for both the lower emissions scenario (B1) and for the higher emissions scenario (A2). (Figure source: NOAA NCEI / CICS-NC).",
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "prep"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": null,
        "widgetConfig": {
          "type": "map",
          "layer_id": "6f3c32aa-5c57-430c-8d92-345d42960684"
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-15T15:48:44.033Z",
        "updatedAt": "2017-03-21T14:08:17.292Z"
      }
    },
    {
      "id": "61628091-8679-4db8-bc47-851c51784f32",
      "type": "widget",
      "attributes": {
        "name": "Yearly CO2 Emissions",
        "dataset": "61628091-8679-4db8-bc47-851c51784f32",
        "slug": "yearly-co2-emissions",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/89a6358e-27eb-4b9c-9f0d-befc4959f914?sql=SELECT year, total_ch4 FROM cait_2_0_country_ghg_emissions where iso = 'ESP' order by year asc limit 15",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "layer": "back",
              "scale": "x",
              "orient": "bottom",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "f",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_opacity": {
                    "value": "0.5"
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/89a6358e-27eb-4b9c-9f0d-befc4959f914?sql=SELECT to_number(year, '9999') as year, total_ch4, cartodb_id FROM cait_2_0_country_ghg_emissions where iso = 'ESP' order by year asc limit 15",
              "name": "table",
              "format": {
                "type": "json",
                "property": "data"
              }
            },
            {
              "name": "tooltip",
              "source": "table",
              "transform": [
                {
                  "test": "datum.year == indexDate.date",
                  "type": "filter"
                },
                {
                  "expr": "datum.year > 2001 ? indexDate.xRight : indexDate.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "indexDate.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "by": "type",
                  "type": "sort"
                }
              ]
            },
            {
              "name": "tooltip_rcp85",
              "source": "tooltip"
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "line",
              "properties": {
                "enter": {
                  "x": {
                    "field": "year",
                    "scale": "x",
                    "offset": 10
                  },
                  "y": {
                    "field": "total_ch4",
                    "scale": "y"
                  },
                  "stroke": {
                    "value": "steelblue"
                  },
                  "interpolate": {
                    "value": "monotone"
                  },
                  "fill_opacity": {
                    "value": 0
                  }
                }
              }
            },
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "expr": "if(datum.year % 2 == 0, datum.year, '')",
                    "type": "formula",
                    "field": "year1"
                  }
                ]
              },
              "name": "label",
              "type": "text",
              "properties": {
                "update": {
                  "x": {
                    "field": "year",
                    "scale": "x",
                    "offset": 4
                  },
                  "y": {
                    "scale": "y",
                    "value": 0,
                    "offset": 14
                  },
                  "dy": {
                    "scale": "x"
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "field": "year1"
                  },
                  "align": {
                    "value": "left"
                  },
                  "angle": {
                    "value": 45
                  },
                  "font_size": {
                    "value": 12
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip_rcp85"
              },
              "name": "tooltip_rcp85",
              "type": "group",
              "marks": [
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 13
                      },
                      "y": {
                        "value": 16
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "text": {
                        "template": "{{parent.year}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "font_size": {
                        "value": 11
                      },
                      "font_weight": {
                        "value": 700
                      }
                    }
                  }
                },
                {
                  "name": "mean2",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 13
                      },
                      "y": {
                        "value": 31
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "text": {
                        "template": "{{parent.total_ch4 | number: '.2f'}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "font_size": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "enter": {
                  "fill": {
                    "value": "#fff"
                  }
                },
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 10
                  },
                  "y": {
                    "scale": "y",
                    "offset": 0,
                    "signal": "indexDate.yval"
                  },
                  "width": {
                    "value": 60
                  },
                  "height": {
                    "value": 40
                  },
                  "fill_opacity": {
                    "value": 0.9
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip_rcp85"
              },
              "size": 4,
              "type": "rule",
              "properties": {
                "update": {
                  "x": {
                    "field": "year",
                    "scale": "x",
                    "offset": 10
                  },
                  "y": {
                    "value": 0
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "stroke": {
                    "value": "#000000"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "stroke_width": {
                    "value": 2
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip"
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "year",
                    "scale": "x",
                    "offset": 10
                  },
                  "y": {
                    "field": "total_ch4",
                    "scale": "y",
                    "offset": -1
                  },
                  "fill": {
                    "value": "#c15467"
                  },
                  "size": {
                    "value": 20
                  }
                }
              }
            }
          ],
          "width": 270,
          "height": 240,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "year"
              }
            },
            {
              "name": "xl",
              "type": "linear",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "year"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "total_ch4"
              }
            }
          ],
          "padding": {
            "top": 25,
            "left": 30,
            "right": 15,
            "bottom": 45
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "yval": 0
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX() + 10), xRight: +iscale('x', eventX() - 75 ), date: +iscale('x', eventX()), yval: iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-23T12:50:11.274Z",
        "updatedAt": "2017-02-13T14:43:33.436Z"
      }
    },
    {
      "id": "4d57184f-cb40-49ee-bf16-89eb82f6d335",
      "type": "widget",
      "attributes": {
        "name": "Worldwide emission by type in the year 2011 - 1",
        "dataset": "3ec6d181-fc7a-46db-a98e-90c18cb9e5e0",
        "slug": "worldwide-emission-by-type-in-the-year-2011-1",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "CAIT",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3ec6d181-fc7a-46db-a98e-90c18cb9e5e0?sql=select * FROM public.cait_2_0_country_co2_emissions_energy_sub_sect_sum2011",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "align": {
                    "value": "left"
                  },
                  "angle": {
                    "value": 45
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 7,
              "format": "s",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_opacity": {
                    "value": "0.5"
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/3ec6d181-fc7a-46db-a98e-90c18cb9e5e0?sql=select * FROM public.cait_2_0_country_co2_emissions_energy_sub_sect_sum2011",
              "name": "table",
              "format": {
                "type": "json",
                "property": "data"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "emission_type",
                    "scale": "x"
                  },
                  "y": {
                    "field": "score",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "update": {
                  "fill": {
                    "value": "#5BB1D2"
                  }
                }
              }
            }
          ],
          "width": 270,
          "height": 240,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "emission_type"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "score"
              }
            }
          ],
          "padding": {
            "top": 25,
            "left": 38,
            "right": 40,
            "bottom": 85
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-24T10:24:08.599Z",
        "updatedAt": "2017-01-24T12:14:43.766Z"
      }
    },
    {
      "id": "67a92276-1bb7-4648-aa63-6ef0f80124a8",
      "type": "widget",
      "attributes": {
        "name": "Percentage of urban population with access to an improved water source",
        "dataset": "8d513534-8ab0-4c05-b931-21bc8978fe17",
        "slug": "percentage-of-urban-population-with-access-to-an-improved-water-source",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "This data set distributed by the World Bank from the WHO/UNICEF Joint Monitoring Programme (JMP) for Water Supply and Sanitation shows the percent of the population with access to improved drinking water sources in 2015.  The improved drinking water source includes piped water on premises (piped household water connection located inside the user’s dwelling, plot or yard), and other improved drinking water sources (public taps or standpipes, tube wells or boreholes, protected dug wells, protected springs, and rainwater collection).  For additional information please see: http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS?view=map&year=2015",
        "source": "World Bank",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/8d513534-8ab0-4c05-b931-21bc8978fe17?sql=select * from table",
        "widgetConfig": {
          "axes": [
            {
              "name": "lbl",
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "format": "%Y",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                },
                "labels": {
                  "dx": {
                    "value": 5
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "align": {
                    "value": "left"
                  },
                  "angle": {
                    "value": 30
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                }
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "ticks": 15,
              "format": "s",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_width": {
                    "value": 0
                  }
                },
                "grid": {
                  "stroke": {
                    "value": "#9BA2AA"
                  },
                  "stroke_opacity": {
                    "value": "0.5"
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font_size": {
                    "value": 10
                  },
                  "font_weight": {
                    "value": 300
                  }
                },
                "major_ticks": {
                  "stroke_width": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.cartodb.com/api/v2/sql?q=SELECT country, values, year FROM urban_population_with_access_to_an_improved_water_source where year = '2010' order by values asc limit 10",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "country",
                    "scale": "x"
                  },
                  "y": {
                    "field": "values",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "value": "#5BB1D2"
                  }
                },
                "update": {
                  "fill": {
                    "value": "#5BB1D2"
                  }
                }
              }
            }
          ],
          "width": 270,
          "height": 240,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "country"
              }
            },
            {
              "name": "y",
              "nice": false,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "values"
              }
            }
          ],
          "padding": {
            "top": 25,
            "left": 78,
            "right": 40,
            "bottom": 75
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-22T17:46:44.484Z",
        "updatedAt": "2017-03-22T17:46:44.484Z"
      }
    },
    {
      "id": "d65417cf-5c4e-40e3-955d-937506b56b36",
      "type": "widget",
      "attributes": {
        "name": "Seasonal variability",
        "dataset": "43cf456f-e557-49d9-831d-6766a1fc2bc8",
        "slug": "seasonal-variability",
        "userId": "5858f37140621f11066fb2f7",
        "description": null,
        "source": null,
        "sourceUrl": null,
        "authors": null,
        "application": [
          "aqueduct"
        ],
        "verified": false,
        "default": false,
        "published": true,
        "queryUrl": "query/43cf456f-e557-49d9-831d-6766a1fc2bc8?sql=select * from water_risk_indicators",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": {
                "value": 0
              }
            },
            {
              "grid": true,
              "type": "y",
              "layer": "back",
              "scale": "y",
              "properties": {
                "grid": {
                  "stroke": {
                    "value": "#eeeeee"
                  },
                  "strokeWidth": {
                    "value": 1
                  }
                },
                "labels": {
                  "type": {
                    "value": "axis"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "bottom"
                  }
                }
              },
              "tickSizeEnd": 0
            }
          ],
          "data": [
            {
              "url": "https://wri-01.carto.com/api/v2/sql?q=select unnest(Array[  0.5,  0.68,   0.1,   1.2]) as water_risk, unnest(Array['Rainfall by month']) as cat, unnest(Array['Q1', 'Q2', 'Q3', 'Q4']) as month",
              "name": "tables",
              "format": {
                "type": "json",
                "property": "rows"
              }
            },
            {
              "name": "axis",
              "source": "tables",
              "transform": [
                {
                  "type": "aggregate",
                  "groupby": "month"
                }
              ]
            },
            {
              "name": "legend",
              "source": "tables",
              "transform": [
                {
                  "type": "rank"
                },
                {
                  "expr": "(datum.rank - 1) % 3",
                  "type": "formula",
                  "field": "xPos"
                },
                {
                  "expr": "floor(datum.rank / 3.1) * 20",
                  "type": "formula",
                  "field": "yPos"
                }
              ]
            }
          ],
          "marks": [
            {
              "from": {
                "data": "tables",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "cat"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "month",
                        "scale": "x",
                        "offset": 50
                      },
                      "y": {
                        "field": "water_risk",
                        "scale": "y"
                      },
                      "y2": {
                        "scale": "y",
                        "value": 0
                      },
                      "fill": {
                        "field": "cat",
                        "scale": "color"
                      },
                      "width": {
                        "value": "30"
                      }
                    }
                  }
                }
              ]
            }
          ],
          "height": 140,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "tables",
                "field": "month"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "range": [
                150,
                0
              ],
              "domain": {
                "data": "tables",
                "field": "water_risk"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "cropColor",
              "domain": {
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              }
            },
            {
              "name": "legend-series-x",
              "type": "ordinal",
              "range": "width",
              "domain": [
                0,
                1,
                2
              ],
              "points": true,
              "padding": 1
            },
            {
              "name": "legend-series-y",
              "type": "ordinal",
              "range": [
                -170,
                -170,
                -170,
                -170
              ],
              "domain": {
                "data": "legend",
                "field": "cat"
              }
            }
          ],
          "padding": {
            "top": 22,
            "left": 40,
            "right": 30,
            "bottom": 92
          },
          "sql_config": [],
          "params_config": [
            {
              "key": "iso",
              "required": false
            }
          ],
          "interaction_config": [
            {
              "name": "tooltip",
              "config": {
                "fields": [
                  {
                    "key": "month",
                    "label": "Quarter"
                  },
                  {
                    "key": "water_risk",
                    "label": "Value",
                    "format": ".2f"
                  }
                ]
              }
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-31T11:37:55.288Z",
        "updatedAt": "2017-04-03T11:20:38.120Z"
      }
    },
    {
      "id": "a43d3629-46b3-4537-a96c-9ac67a260e0c",
      "type": "widget",
      "attributes": {
        "name": "Precipitation in Porto Alegre",
        "dataset": "bd61bb68-592b-42ff-90d6-b6a5d0006101",
        "slug": "precipitation-in-porto-alegre",
        "userId": "58333dcfd9f39b189ca44c75",
        "description": "Annual historic and projected precipitation in millimeters derived from the NEX-GDDP downscaled data for the RCP4.5, which assumes stabilization shortly after 2100, and RCP 8.5 scenario, which assumes comparatively high greenhouse gas emissions. In addition to seasonal fluctuation, the mean and quantiles show a trend of increased annual precipitation from 1950 to 2100 for Porto Alegre. Flooding, which has devastated Porto Alegre in the past, could increase with this projected trend in precipitation.",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "prep"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/bd61bb68-592b-42ff-90d6-b6a5d0006101?sql=select * from index_bd61bb68592b42ff90d6b6a5d0006101",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "ticks": 5,
              "title": "years",
              "values": [
                1950,
                1970,
                1990,
                2010,
                2030,
                2050,
                2070,
                2090
              ],
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "center"
                  },
                  "baseline": {
                    "value": "top"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              }
            },
            {
              "grid": false,
              "type": "y",
              "scale": "y",
              "ticks": 10,
              "title": "mm",
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#E6E6E6"
                  },
                  "opacity": {
                    "value": 1
                  },
                  "strokeWidth": {
                    "value": 1.5
                  }
                },
                "ticks": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "title": {
                  "y": {
                    "value": -20
                  },
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "angle": 90,
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "font": {
                    "value": "\"Montserrat\", sans-serif"
                  },
                  "align": {
                    "value": "right"
                  },
                  "baseline": {
                    "value": "middle"
                  },
                  "fontSize": {
                    "value": 10
                  }
                }
              },
              "titleOffset": 15
            }
          ],
          "data": [
            {
              "url": "https://api.resourcewatch.org/query/bd61bb68-592b-42ff-90d6-b6a5d0006101?sql=select * from index_bd61bb68592b42ff90d6b6a5d0006101 order by date asc limit 1200",
              "name": "data",
              "format": {
                "type": "json",
                "property": "data"
              }
            },
            {
              "name": "rcp45",
              "source": "data",
              "transform": [
                {
                  "test": "test(/rcp45/gi, datum.type)",
                  "type": "filter"
                },
                {
                  "type": "aggregate",
                  "groupby": [
                    "date"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "min",
                        "max"
                      ],
                      "ops": [
                        "min",
                        "max"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "rcp85",
              "source": "data",
              "transform": [
                {
                  "test": "test(/rcp85/gi, datum.type)",
                  "type": "filter"
                },
                {
                  "type": "aggregate",
                  "groupby": [
                    "date"
                  ],
                  "summarize": [
                    {
                      "as": [
                        "min",
                        "max"
                      ],
                      "ops": [
                        "min",
                        "max"
                      ],
                      "field": "value"
                    }
                  ]
                }
              ]
            },
            {
              "name": "legend",
              "values": [
                {
                  "cat": "Mean RCP 4.5"
                },
                {
                  "cat": "Mean RCP 8.5"
                }
              ]
            },
            {
              "name": "tooltip",
              "source": "data",
              "transform": [
                {
                  "test": "datum.date == indexDate.date",
                  "type": "filter"
                },
                {
                  "expr": "datum.date > 2060 ? indexDate.xRight : indexDate.xLeft",
                  "type": "formula",
                  "field": "xTooltip"
                },
                {
                  "expr": "indexDate.xLeft",
                  "type": "formula",
                  "field": "xData"
                },
                {
                  "by": "type",
                  "type": "sort"
                }
              ]
            },
            {
              "name": "tooltip_rcp45",
              "source": "tooltip",
              "transform": [
                {
                  "test": "datum.type == 'hist_rcp45_mean'",
                  "type": "filter"
                }
              ]
            },
            {
              "name": "tooltip_rcp85",
              "source": "tooltip",
              "transform": [
                {
                  "test": "datum.type == 'hist_rcp85_mean'",
                  "type": "filter"
                }
              ]
            }
          ],
          "marks": [
            {
              "name": "datalines-rcp45",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "rcp45"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#25b5cd"
                      },
                      "fillOpacity": {
                        "value": 0.4
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "data",
                    "transform": [
                      {
                        "test": "datum.type == 'hist_rcp45_mean'",
                        "type": "filter"
                      }
                    ]
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#25b5cd"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "name": "datalines-rcp85",
              "type": "group",
              "marks": [
                {
                  "from": {
                    "data": "rcp85"
                  },
                  "type": "area",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "min",
                        "scale": "y"
                      },
                      "y2": {
                        "field": "max",
                        "scale": "y"
                      },
                      "fill": {
                        "value": "#efa600"
                      },
                      "fillOpacity": {
                        "value": 0.4
                      },
                      "interpolate": {
                        "value": "linear"
                      }
                    }
                  }
                },
                {
                  "from": {
                    "data": "data",
                    "transform": [
                      {
                        "test": "datum.type == 'hist_rcp85_mean'",
                        "type": "filter"
                      }
                    ]
                  },
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "date",
                        "scale": "x"
                      },
                      "y": {
                        "field": "value",
                        "scale": "y"
                      },
                      "height": {
                        "scale": "y"
                      },
                      "stroke": {
                        "value": "#efa600"
                      },
                      "strokeWidth": {
                        "value": 1.5
                      },
                      "strokeOpacity": {
                        "value": 1
                      }
                    }
                  }
                }
              ]
            },
            {
              "from": {
                "data": "tooltip_rcp45"
              },
              "name": "tooltip_rcp45",
              "type": "group",
              "marks": [
                {
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 10
                      },
                      "y": {
                        "value": 17
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "{{indexDate.xLeft}}"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      },
                      "fontWeight": {
                        "value": "bold"
                      }
                    }
                  }
                },
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 35
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "RCP 4.5: {{parent.value|number:'.2f'}} mm"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "fill": {
                    "value": "#fff"
                  },
                  "width": {
                    "value": 130
                  },
                  "height": {
                    "value": 55
                  },
                  "fillOpacity": {
                    "value": 0.85
                  }
                }
              }
            },
            {
              "from": {
                "data": "tooltip_rcp85"
              },
              "name": "tooltip_rcp85",
              "type": "group",
              "marks": [
                {
                  "name": "mean",
                  "type": "text",
                  "properties": {
                    "update": {
                      "x": {
                        "value": 11
                      },
                      "y": {
                        "value": 50
                      },
                      "fill": {
                        "value": "#3B4F63"
                      },
                      "font": {
                        "value": "\"Montserrat\", sans-serif"
                      },
                      "text": {
                        "template": "RCP 8.5: {{parent.value|number:'.2f'}} mm"
                      },
                      "opacity": {
                        "value": 0.8
                      },
                      "fontSize": {
                        "value": 11
                      }
                    }
                  }
                }
              ],
              "properties": {
                "update": {
                  "x": {
                    "field": "xTooltip",
                    "scale": "x",
                    "offset": 0
                  },
                  "y": {
                    "scale": "y",
                    "offset": -10,
                    "signal": "indexDate.yval"
                  },
                  "width": {
                    "value": 150
                  },
                  "height": {
                    "value": 45
                  },
                  "fillOpacity": {
                    "value": 1
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip_rcp45"
              },
              "size": 4,
              "type": "rule",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "value": 0
                  },
                  "y2": {
                    "field": {
                      "group": "height"
                    }
                  },
                  "stroke": {
                    "value": "#000000"
                  },
                  "opacity": {
                    "value": 0.2
                  },
                  "strokeWidth": {
                    "value": 2
                  }
                }
              }
            },
            {
              "ease": "in-out",
              "from": {
                "data": "tooltip",
                "transform": [
                  {
                    "test": "datum.type == 'hist_rcp45_mean' || datum.type == 'hist_rcp85_mean'",
                    "type": "filter"
                  }
                ]
              },
              "size": 4,
              "type": "symbol",
              "properties": {
                "update": {
                  "x": {
                    "field": "date",
                    "scale": "x"
                  },
                  "y": {
                    "field": "value",
                    "scale": "y"
                  },
                  "fill": {
                    "value": "#c15467"
                  },
                  "size": {
                    "value": 20
                  }
                }
              }
            }
          ],
          "width": 600,
          "height": 400,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "date"
                  }
                ]
              }
            },
            {
              "name": "y",
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "fields": [
                  {
                    "data": "data",
                    "field": "value"
                  }
                ]
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "zero": false,
              "range": [
                "#25b5cd",
                "#efa600"
              ],
              "domain": {
                "sort": true,
                "fields": [
                  {
                    "data": "legend",
                    "field": "cat"
                  }
                ]
              },
              "points": true
            }
          ],
          "legends": [
            {
              "fill": "color",
              "offset": 50,
              "properties": {
                "title": {
                  "dx": {
                    "value": 0
                  },
                  "dy": {
                    "value": -2
                  },
                  "fontSize": {
                    "value": 12
                  }
                },
                "labels": {
                  "fill": {
                    "value": "#9BA2AA"
                  },
                  "text": {
                    "template": "{{datum.data}}"
                  },
                  "fontSize": {
                    "value": 10
                  }
                },
                "legend": {
                  "x": {
                    "mult": 0.05,
                    "field": {
                      "group": "width"
                    },
                    "offset": 0
                  },
                  "y": {
                    "mult": 0.05,
                    "field": {
                      "group": "height"
                    },
                    "offset": -10
                  }
                },
                "symbols": {
                  "size": {
                    "value": 30
                  },
                  "shape": {
                    "value": "square"
                  },
                  "strokeOpacity": {
                    "value": 0
                  }
                }
              }
            }
          ],
          "padding": {
            "top": 30,
            "left": 35,
            "right": 5,
            "bottom": 40
          },
          "signals": [
            {
              "init": {
                "xval": 0,
                "yval": 0
              },
              "name": "indexDate",
              "streams": [
                {
                  "expr": "{xLeft: +iscale('x', eventX() + 10), xRight: +iscale('x', eventX() - 130), date: +iscale('x', eventX()), yval: iscale('y', eventY())}",
                  "type": "mousemove"
                }
              ]
            }
          ]
        },
        "template": false,
        "layerId": null,
        "createdAt": "2016-09-06T10:04:59.658Z",
        "updatedAt": "2017-03-21T14:16:39.563Z"
      }
    },
    {
      "id": "acf093a0-c627-4ca7-9963-9cf1cc0c563e",
      "type": "widget",
      "attributes": {
        "name": "Poorest countries in the world in 2011",
        "dataset": "2b569ae2-9452-44f8-9c81-3c3afb6c3c25",
        "slug": "poorest-countries-in-the-world",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/2b569ae2-9452-44f8-9c81-3c3afb6c3c25?sql=SELECT country_code as iso3,country_name as country, y2011 as total,rank() over (ORDER BY y2011 desc) as rank FROM subnational_poverty_data where length(country_code)<4 and y2011 is not null order by y2011 desc",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT%20country_code%2C%20country_name%20as%20x%2C%20y2011%20as%20y%20FROM%20subnational_poverty_data%20where%20length(country_code)%3C4%20and%20indicator_name%20%3D%20'Poverty%20headcount%20ratio%20at%20national%20poverty%20line%20(%25%20of%20population)'%20and%20y2011%20is%20not%20null%20order%20by%20y2011%20desc",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T15:53:44.164Z",
        "updatedAt": "2017-04-06T10:14:05.590Z"
      }
    },
    {
      "id": "1a8989b1-1544-40f0-8a41-d3280e2c65c8",
      "type": "widget",
      "attributes": {
        "name": "Population using improved drinking-water sources (%)",
        "dataset": "f2fe7588-6d1b-400e-b79c-0c86bf1273ea",
        "slug": "population-using-improved-drinking-water-sources",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/f2fe7588-6d1b-400e-b79c-0c86bf1273ea?sql=select * from table",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.cartodb.com/api/v2/sql?q=SELECT country as x, value as y FROM population_using_improved_drinking_water_sources where (year = '2015' and indicator = 'Population using improved drinking-water sources in percentage' and type = 'total') order by y asc limit 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-15T11:52:09.002Z",
        "updatedAt": "2017-04-06T08:05:46.642Z"
      }
    },
    {
      "id": "2e929ef4-8a00-472d-8ae6-a07e18237665",
      "type": "widget",
      "attributes": {
        "name": "Greatest GDP in 2015",
        "dataset": "3973a9b5-4ee7-44a9-aaba-24e6a4f23358",
        "slug": "greatest-gdp-in-2015",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/3973a9b5-4ee7-44a9-aaba-24e6a4f23358?sql=SELECT _2015_yr2015 as total,  country_code as iso3, country_name as country, rank() over (order by _2015_yr2015 desc) as rank FROM gdp where _2015_yr2015 is not null",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT _2015_yr2015 as y, country_name as x, rank() over (order by _2015_yr2015 desc) as rank FROM gdp where _2015_yr2015 is not null LIMIT 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T16:32:35.582Z",
        "updatedAt": "2017-04-06T08:09:42.678Z"
      }
    },
    {
      "id": "d53ce770-ff0a-49a8-8e1c-65b1150b3d48",
      "type": "widget",
      "attributes": {
        "name": "Worldwide CO2 Emission in 2011 referenced to average CO2 Emission of the last 10 years",
        "dataset": "c465b42e-8c22-4dcb-9838-f6447393e28d",
        "slug": "worldwide-co2-emission-in-2011-referenced-to-average-co2-emission-of-the-last-10-years",
        "userId": "5858f37140621f11066fb2f7",
        "description": "This dataset shows the worldwide CO2 emission in 2011 referenced to the average CO2 emission of the last 10 years.",
        "source": "CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.",
        "sourceUrl": null,
        "authors": "CAIT",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/c465b42e-8c22-4dcb-9838-f6447393e28d?sql=SELECT avg, year FROM cait_2_0_country_ghg_emissions_onlyco2 order by avg asc",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT year as x, avg as y FROM cait_2_0_country_ghg_emissions_onlyco2 order by avg asc",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-23T14:50:09.917Z",
        "updatedAt": "2017-04-06T07:59:48.156Z"
      }
    },
    {
      "id": "7592da9e-8844-429d-9f2b-0147dde29ff5",
      "type": "widget",
      "attributes": {
        "name": "Environmental Democracy Index",
        "dataset": "0b9f0100-ce5b-430f-ad8f-3363efa05481",
        "slug": "environmental-democracy-index",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=select * from edi",
        "widgetConfig": {
          "data": [
            {
              "url": "https://insights.cartodb.com/api/v2/sql?q=with a as (select region, overall_score from edi) select region as x, avg(overall_score) as y from a group by region order by region asc",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "pie",
                    "field": "y"
                  }
                ]
              },
              "type": "arc",
              "properties": {
                "enter": {
                  "x": {
                    "mult": 0.5,
                    "field": {
                      "group": "width"
                    }
                  },
                  "y": {
                    "mult": 0.5,
                    "field": {
                      "group": "height"
                    }
                  },
                  "fill": {
                    "field": "x",
                    "scale": "color"
                  },
                  "stroke": {
                    "value": "white"
                  },
                  "endAngle": {
                    "field": "layout_end"
                  },
                  "startAngle": {
                    "field": "layout_start"
                  },
                  "innerRadius": {
                    "value": 45
                  },
                  "outerRadius": {
                    "value": 65
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1",
              "domain": {
                "data": "table",
                "field": "x_percent"
              }
            }
          ],
          "padding": {
            "top": 0,
            "left": 0,
            "right": 0,
            "bottom": 0
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-28T17:01:20.031Z",
        "updatedAt": "2017-04-06T10:06:17.856Z"
      }
    },
    {
      "id": "0d9f7ab0-c519-40b1-9083-bbe66032c6ec",
      "type": "widget",
      "attributes": {
        "name": "Sustainable Development Goals Indicators Tracker.",
        "dataset": "f3d6d6c1-3b3b-4dfc-a2a0-dcf38d258ae9",
        "slug": "sustainable-development-goals-indicators-tracker",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "World Bank",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/f3d6d6c1-3b3b-4dfc-a2a0-dcf38d258ae9?sql=select * from sdg_data",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=WITH a AS ( SELECT * FROM sdg_data WHERE country_name = 'World' ), b as (SELECT indicator_code as grupo, indicator_name, unnest(array[ 1990, 1991,1992, 1993, 1994, 1995,1996, 1997,1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014]) AS x, unnest(array[ y_1990, y_1991, y_1992, y_1993, y_1994, y_1995, y_1996, y_1997, y_1998, y_1999, y_2000, y_2001, y_2002, y_2003, y_2004, y_2005, y_2006, y_2007, y_2008, y_2009, y_2010, y_2011, y_2012, y_2013, y_2014]) AS y from a order by x), c as (SELECT x, grupo, y FROM b where y != '' and (grupo = 'BX.TRF.PWKR.DT.GD.ZS' or  grupo = 'EN.ATM.CO2E.KD.GD' or grupo = 'EN.ATM.CO2E.PP.GD.KD' or grupo = 'NY.GDP.FRST.RT.ZS') order by grupo, x asc) select grupo as group, x, y from c",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "name": "Line vizzualitation",
          "marks": [
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "group"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "line",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x",
                        "scale": "x"
                      },
                      "y": {
                        "field": "y",
                        "scale": "y"
                      },
                      "stroke": {
                        "field": "group",
                        "scale": "group"
                      },
                      "strokeWidth": {
                        "value": 2
                      }
                    }
                  }
                }
              ]
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "linear",
              "zero": false,
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "type": "linear",
              "zero": false,
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "group",
              "type": "ordinal",
              "range": "colorRange1",
              "domain": {
                "data": "table",
                "field": "group"
              }
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-30T09:42:35.594Z",
        "updatedAt": "2017-04-06T10:00:40.600Z"
      }
    },
    {
      "id": "c7c5b46f-3249-4f8c-8790-ed461472c55d",
      "type": "widget",
      "attributes": {
        "name": "Most polluting countries in 2011",
        "dataset": "1170030b-9725-4bfe-8fb4-1b0eb81020d2",
        "slug": "most-and-least-pollutive-countries-in-2011",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/1170030b-9725-4bfe-8fb4-1b0eb81020d2?sql=select country, iso, sum_2 FROM public.cait_2_0_country_ghg_emissions_toplow2011_new order by sum_2 desc",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.cartodb.com/api/v2/sql?q=SELECT total_ghg_lucf as y, iso as group, country as x FROM cait_2_0_country_ghg_emissions where total_ghg_lucf is not null and iso != '' and year = '2011' order by total_ghg_lucf desc limit 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-01-23T16:17:05.135Z",
        "updatedAt": "2017-04-06T10:08:25.799Z"
      }
    },
    {
      "id": "19143822-3b11-407a-b3f7-7e98f6a1a024",
      "type": "widget",
      "attributes": {
        "name": "Percentage of population with access to an improved water source",
        "dataset": "118311ed-4b1b-4e75-bdc7-636f644de0c2",
        "slug": "percentage-of-population-with-access-to-an-improved-water-source",
        "userId": "5858f37140621f11066fb2f7",
        "description": "This data set distributed by the World Bank from the WHO/UNICEF Joint Monitoring Programme (JMP) for Water Supply and Sanitation shows the percent of the population with access to improved drinking water sources in 2015.  The improved drinking water source includes piped water on premises (piped household water connection located inside the user’s dwelling, plot or yard), and other improved drinking water sources (public taps or standpipes, tube wells or boreholes, protected dug wells, protected springs, and rainwater collection).  For additional information please see: http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS?view=map&year=2015",
        "source": "World Bank",
        "sourceUrl": null,
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/118311ed-4b1b-4e75-bdc7-636f644de0c2?sql=select * from table",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.cartodb.com/api/v2/sql?q=SELECT country_name as x, values as y FROM population_with_access_to_an_improved_water_source where year = '2010' order by values asc limit 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-03-22T14:39:41.070Z",
        "updatedAt": "2017-04-06T10:10:15.913Z"
      }
    },
    {
      "id": "e119413a-516a-43f9-841c-ea1520042c39",
      "type": "widget",
      "attributes": {
        "name": "Multidimensional Poverty Index (UNDP) ranking",
        "dataset": "426fa4e2-edee-4f54-93d1-af95d7f4aec8",
        "slug": "multidimensional-poverty-index-undp-ranking",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/426fa4e2-edee-4f54-93d1-af95d7f4aec8?sql=SELECT mpi_perc as total, country, rank() over (order by mpi_perc desc) FROM multidimensional_poverty_index order by mpi_perc desc",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT mpi_perc as y, country as x, rank() over (order by mpi_perc desc) FROM multidimensional_poverty_index order by mpi_perc desc LIMIT 50",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "marks": [
            {
              "from": {
                "data": "table"
              },
              "type": "rect",
              "properties": {
                "enter": {
                  "x": {
                    "field": "x",
                    "scale": "x"
                  },
                  "y": {
                    "field": "y",
                    "scale": "y"
                  },
                  "y2": {
                    "scale": "y",
                    "value": 0
                  },
                  "width": {
                    "band": true,
                    "scale": "x",
                    "offset": -1
                  }
                },
                "hover": {
                  "fill": {
                    "scale": "color"
                  }
                },
                "update": {
                  "fill": {
                    "scale": "color"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "x"
              }
            },
            {
              "name": "y",
              "nice": true,
              "type": "linear",
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "color",
              "type": "ordinal",
              "range": "colorRange1"
            }
          ],
          "padding": {
            "top": 5,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T16:47:08.374Z",
        "updatedAt": "2017-04-06T10:12:28.632Z"
      }
    },
    {
      "id": "9254dc77-886f-46b0-b2de-8bef109e86e5",
      "type": "widget",
      "attributes": {
        "name": "Human Development Index (UNDP)",
        "dataset": "24f9654b-c542-4987-a6fc-7d5b6339e3c4",
        "slug": "human-development-index-undp",
        "userId": "5858f37140621f11066fb2f7",
        "description": "",
        "source": "",
        "sourceUrl": "",
        "authors": "",
        "application": [
          "rw"
        ],
        "verified": false,
        "default": true,
        "published": true,
        "queryUrl": "query/24f9654b-c542-4987-a6fc-7d5b6339e3c4?sql=SELECT%20gender%2C%20value%2C%20REPLACE(development%2C%20%27development%27%2C%20%27%27)%20as%20development%20FROM%20gender_development_index%20where%20country%20in%20(%27total%27)%20and%20indicator%20%3D%27Human%20Development%20Index%27",
        "widgetConfig": {
          "axes": [
            {
              "type": "x",
              "scale": "x",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "#9BA2AA"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            },
            {
              "type": "y",
              "scale": "y",
              "tickSize": 0,
              "properties": {
                "axis": {
                  "stroke": {
                    "value": "transparent"
                  }
                },
                "labels": {
                  "text": {
                    "template": ""
                  }
                }
              }
            }
          ],
          "data": [
            {
              "url": "https://insights.carto.com/api/v2/sql?q=SELECT gender as x, value as y, REPLACE(development, 'development', '') as group FROM gender_development_index where country in ('total') and indicator ='Human Development Index'",
              "name": "table",
              "format": {
                "type": "json",
                "property": "rows"
              }
            }
          ],
          "name": "groupedbar",
          "marks": [
            {
              "from": {
                "data": "table",
                "transform": [
                  {
                    "type": "facet",
                    "groupby": [
                      "group"
                    ]
                  }
                ]
              },
              "type": "group",
              "marks": [
                {
                  "type": "rect",
                  "properties": {
                    "enter": {
                      "x": {
                        "field": "x",
                        "scale": "pos"
                      },
                      "y": {
                        "field": "y",
                        "scale": "y"
                      },
                      "y2": {
                        "scale": "y",
                        "value": 0
                      },
                      "fill": {
                        "field": "x",
                        "scale": "group"
                      },
                      "width": {
                        "band": true,
                        "scale": "pos",
                        "offset": -1
                      }
                    }
                  }
                }
              ],
              "scales": [
                {
                  "name": "pos",
                  "type": "ordinal",
                  "range": "width",
                  "domain": {
                    "data": "",
                    "field": "x"
                  }
                }
              ],
              "properties": {
                "enter": {
                  "x": {
                    "field": "key",
                    "scale": "x"
                  },
                  "width": {
                    "band": true,
                    "scale": "x"
                  }
                }
              }
            }
          ],
          "width": 150,
          "height": 150,
          "scales": [
            {
              "name": "x",
              "type": "ordinal",
              "range": "width",
              "domain": {
                "data": "table",
                "field": "group"
              },
              "padding": 0.2
            },
            {
              "name": "y",
              "nice": true,
              "range": "height",
              "domain": {
                "data": "table",
                "field": "y"
              }
            },
            {
              "name": "group",
              "type": "ordinal",
              "range": "colorRange1",
              "domain": {
                "data": "table",
                "field": "x"
              }
            }
          ],
          "legends": [],
          "padding": {
            "top": 0,
            "left": 5,
            "right": 5,
            "bottom": 5
          }
        },
        "template": false,
        "layerId": null,
        "createdAt": "2017-02-06T20:44:57.901Z",
        "updatedAt": "2017-04-06T10:15:08.804Z"
      }
    }
  ],
  "links": {
    "self": "http://api.resourcewatch.org/v1/widget/?page[number]=1&page[size]=9999999",
    "first": "http://api.resourcewatch.org/v1/widget/?page[number]=1&page[size]=9999999",
    "last": "http://api.resourcewatch.org/v1/widget/?page[number]=1&page[size]=9999999",
    "prev": "http://api.resourcewatch.org/v1/widget/?page[number]=1&page[size]=9999999",
    "next": "http://api.resourcewatch.org/v1/widget/?page[number]=1&page[size]=9999999"
  }
}